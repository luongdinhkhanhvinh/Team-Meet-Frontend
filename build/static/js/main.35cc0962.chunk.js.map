{"version":3,"sources":["components/Button/Button.module.scss","components/Input/Input.module.scss","components/FloatButton/FloatButton.module.scss","components/VideoNative/VideoNative.module.scss","pages/Meeting/Meeting.module.scss","../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/peerjs/dist sync","serviceWorker.ts","services/ServiceWorkerService.ts","components/Brand/Brand.tsx","components/App/App.state.ts","components/Alert/Alert.state.ts","pages/Meeting/Meeting.state.ts","pages/Hosts/Hosts.state.ts","components/ActionsToggle/ActionsToggle.state.ts","store.ts","services/AlertService.ts","components/Alert/Alert.tsx","components/Page/Page.tsx","pages/Preload/Preload.tsx","components/Button/Button.tsx","pages/Home/Home.tsx","pages/MeetingJoin/MeetingJoin.state.ts","components/Input/Input.tsx","pages/MeetingJoin/MeetingJoin.tsx","services/StorageService.ts","services/AccessTokenService.ts","services/RequestService.ts","pages/MeetingStart/MeetingStart.request.ts","pages/MeetingStart/MeetingStart.state.ts","pages/MeetingStart/MeetingStart.tsx","services/PeerService.ts","services/MediaService.ts","services/AuthService.ts","services/MeetingService.ts","services/VideoService.ts","services/NotificationService.ts","middleware/HostMiddleware.ts","services/SocketService.ts","pages/Meeting/Meeting.socket.ts","components/Skeleton/Skeleton.tsx","components/VideoSkeleton/VideoSkeleton.tsx","components/Action/Action.tsx","components/ActionsToggle/ActionsToggle.tsx","components/Actions/Actions.tsx","components/FloatButton/FloatButton.tsx","components/VideoNative/VideoNative.tsx","components/Video/Video.tsx","pages/Meeting/Meeting.tsx","pages/Install/Install.request.ts","pages/Install/Install.tsx","pages/AdminSignIn/AdminSignIn.request.ts","pages/AdminSignIn/AdminSignIn.tsx","pages/Hosts/Hosts.request.ts","middleware/AdminMiddleware.ts","components/HostSkeleton/HostSkeleton.tsx","components/HostCreate/HostCreate.request.ts","components/HostCreate/HostCreate.tsx","components/Host/Host.request.ts","components/Host/Host.tsx","components/AdminMenu/AdminMenu.tsx","pages/Hosts/Hosts.tsx","pages/PrivacyEdit/PrivacyEdit.request.ts","pages/PrivacyEdit/PrivacyEdit.tsx","pages/Privacy/Privacy.request.ts","components/PrivacySkeleton/PrivacySkeleton.tsx","pages/Privacy/Privacy.tsx","pages/NotFound/NotFound.tsx","routes.ts","components/App/App.localStorage.ts","components/Provider/Provider.tsx","components/App/App.tsx","index.tsx","components/Host/Host.module.scss","components/Alert/Alert.module.scss","components/Page/Page.module.scss","components/Video/Video.module.scss","components/Brand/Brand.module.scss","components/AdminMenu/AdminMenu.module.scss","pages/Home/Home.module.scss","components/ActionsToggle/ActionsToggle.module.scss","components/HostSkeleton/HostSkeleton.module.scss","pages/NotFound/NotFound.module.scss","components/Skeleton/Skeleton.module.scss","components/VideoSkeleton/VideoSkeleton.module.scss","components/Action/Action.module.scss","components/Actions/Actions.module.scss","pages/PrivacyEdit/PrivacyEdit.module.scss","pages/Privacy/Privacy.module.scss"],"names":["module","exports","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","webpackEmptyContext","isLocalhost","Boolean","window","location","hostname","match","register","config","navigator","URL","process","href","origin","addEventListener","swUrl","fetch","headers","response","contentType","get","status","indexOf","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","error","ServiceWorkerService","some","ignorePlatforms","platform","isPlatform","Brand","className","this","role","to","routes","home","path","styles","logo","src","alt","tagline","invertClass","props","invert","brand","pathResolve","Component","app","auth","type","actions","alert","message","handleProceed","timeoutId","selectors","cloneDeep","meeting","connectionId","videos","replaceId","replaceConnectionId","replaceVideos","setVideoRaiseHand","raiseHand","payload","setVideoActive","active","pushVideo","video","pullVideo","reset","hosts","host","actionsToggle","expanded","replaceExpanded","reducers","combineReducers","action","find","activeVideo","targetVideo","isExists","push","reject","unshift","createStore","composeWithDevTools","applyMiddleware","AlertService","alertSelectors","store","getState","clearTimeout","dispatch","alertActions","setTimeout","clearAutoClose","timeout","pull","setAutoClose","Alert","alertService","handleClick","bind","handleCancelClick","handleProceedClick","alertClass","onClick","iconAndMessage","icon","alertCircleOutline","cancel","proceed","cursorStyle","cursor","connect","Page","main","flip","content","children","footer","background","flipClass","containerClass","container","page","Preload","callback","history","Plugins","App","addListener","data","slug","url","split","pop","isJoin","startsWith","isStart","includes","autoRouteToHome","initializeDeeplink","withRouter","Button","button","shape","expand","text","Home","handleStartClick","handleJoinClick","meetingStart","meetingJoin","fullscreen","privacy","copyright","dangerouslySetInnerHTML","Date","getFullYear","__html","replaceMeetingId","meetingActions","Input","input","name","value","placeholder","onChange","handleChange","MeetingJoin","meetingId","handleInputChange","event","target","setState","trim","search","qs","parse","ignoreQueryPrefix","setMeetingId","StorageService","storage","Storage","isElectron","key","localStorage","getItem","setItem","set","removeItem","remove","AccessTokenService","storageService","accessToken","RequestService","accessTokenService","axios","create","baseURL","Authorization","client","handleError","post","patch","delete","MeetingStartRequest","requestService","credentials","a","updateLastMeetingAt","appActions","replaceAppAuth","MeetingStart","request","Request","username","password","signIn","PeerService","Peer","options","on","getErrorMessage","localConnectionId","stream","call","localStream","answer","remoteStream","remoteConnectionId","peer","destroy","secure","MediaService","getUserMedia","mediaDevices","constraints","audio","tracks","getTracks","forEach","track","stop","first","getVideoTracks","enabled","getAudioTracks","AuthService","MeetingService","authService","isHostAuth","meetingSelectors","setConnectionId","getMeetingId","isHostMeeting","isExistsUserVideo","VideoService","meetingService","mediaService","memberRemove","canMemberRemove","renderId","nanoid","getVideo","userVideo","getUserVideo","stopStream","NotificationService","Howl","play","canNotifyHost","playNotification","canNotifyMember","HostMiddleware","SocketService","endpoint","Client","channel","subscribe","unsubscribe","publish","conferenceCall","remoteDisconnect","Skeleton","style","width","height","marginTop","marginBottom","paddingBottom","shapeClass","skeleton","defaultProps","VideoSkeleton","size","videoSkeleton","videocamOutline","Action","activeClass","personAddOutline","handRightOutline","closeCircleOutline","micOutline","ActionsToggle","chevronDown","chevronUp","Actions","videoService","isVideoEnabled","isAudioEnabled","handleInviteClick","handleRaiseHandClick","handleEndClick","handleVideoClick","handleAudioClick","canInvite","SocialSharing","share","inviteText","copyToClipboard","isRaiseHandActive","meetingSocket","canEnd","handleEnd","toggleVideoMute","toggleAudioMute","buttons","actionsToggleSelectors","canVisibleButtons","FloatButton","floatButton","color","VideoNative","element","srcObject","hasChange","autoPlay","muted","isMuted","playsInline","ref","setSource","isUserMeeting","Video","handleMemberRemoveClick","stopPropagation","meetignId","ratio","personRemoveOutline","Meeting","peerService","notificationService","hostMiddleware","index","source","socket","raiseHandTimeout","disconnect","stopUserVideo","resetMeeting","socketUnsubscribe","resetType","onDisconnect","exitMeeting","createVideo","localVideo","onCalling","remoteVideo","onReceiveCall","answerCall","notifyHost","handleCallStreaming","isMemberMeeting","notifyMember","canConferenceCall","handleErrors","onOpen","setId","handleRaiseHand","handleMemberRemove","handleDisconnect","getStream","handleUserStream","handleReceiveCall","joinMeeting","handleConferenceCall","handleRemoteDisconnect","handleMeeting","activeVideoCol","filter","InstallRequest","admin","adminSignIn","Install","confirmPassword","handleCreateClick","validateIntall","createAdmin","validateInstall","AdminSignInRequest","AdminSignIn","handleSignInClick","HostsRequest","AdminMiddleware","HostSkeleton","user","random","HostCreateRequest","hostsActions","HostCreate","handleAddHostClick","appUrl","createHost","copyCredentials","clearForm","HostRequest","Host","handleDeleteClick","lastMeeting","heading","time","lastMeetingAt","moment","format","AdminMenu","handleSignOutClick","adminMenu","links","activeClassName","privacyEdit","Hosts","adminMiddleware","sizeSm","listHosts","hostsSkeleton","isEmpty","range","hostSkeleton","PrivacyEditRequest","body","PrivacyEdit","handleSaveClick","quill","read","delta","clipboard","convert","setContents","root","innerHTML","Quill","modules","toolbar","header","list","align","matchVisual","theme","update","initializeEditor","setContent","handleContentChange","save","PrivacyRequest","PrivacySkeleton","lines","line","paragraph","Privacy","setPrivacy","NotFound","handleRouteClick","notFound","description","preload","component","install","AppLocalStorage","pwaInstallPrompted","JSON","stringify","Provider","LocalStorage","setupConfig","mode","isPwaAlreadyPrompted","preventDefault","setPwaInstallPrompted","deferredPrompt","prompt","userChoice","outcome","promptPwaInstall","exact","ReactDOM","render","document","getElementById","registerWorker"],"mappings":"yFACAA,EAAOC,QAAU,CAAC,OAAS,yB,oBCA3BD,EAAOC,QAAU,CAAC,MAAQ,uB,oBCA1BD,EAAOC,QAAU,CAAC,YAAc,mC,oBCAhCD,EAAOC,QAAU,CAAC,MAAQ,6B,oBCA1BD,EAAOC,QAAU,CAAC,QAAU,2B,0DCD5B,IAAIC,EAAM,CACT,8BAA+B,CAC9B,IACA,GAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,sBAAuB,CACtB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mCAAoC,CACnC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,IAED,yBAA0B,CACzB,IACA,GAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,gCAAiC,CAChC,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,WACzC,OAAOJ,EAAoBS,MAG7BX,EAAoBY,KAAO,WAC1B,OAAOC,OAAOD,KAAKb,IAEpBC,EAAoBW,GAAK,IACzBd,EAAOC,QAAUE,G,oBChMjB,IAAID,EAAM,CACT,sBAAuB,CACtB,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,WACzC,OAAOJ,EAAoBS,MAG7BX,EAAoBY,KAAO,WAC1B,OAAOC,OAAOD,KAAKb,IAEpBC,EAAoBW,GAAK,IACzBd,EAAOC,QAAUE,G,kBCxBjB,SAASc,EAAoBb,GAC5B,IAAIM,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,EAEPO,EAAoBF,KAAO,WAAa,MAAO,IAC/CE,EAAoBT,QAAUS,EAC9BjB,EAAOC,QAAUgB,EACjBA,EAAoBH,GAAK,K,+HCInBI,EAAcC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DASC,SAASC,EAAUC,GACxB,GAA6C,kBAAmBC,UAAW,CAMzE,GAJkB,IAAIC,IACpBC,GACAR,OAAOC,SAASQ,MAEJC,SAAWV,OAAOC,SAASS,OAIvC,OAGFV,OAAOW,iBAAiB,QAAQ,WAC9B,IAAMC,EAAK,UAAMJ,GAAN,sBAEPV,IAgEV,SAAkCc,EAAeP,GAE/CQ,MAAMD,EAAO,CACXE,QAAS,CAAE,iBAAkB,YAE5BzB,MAAK,SAAA0B,GAEJ,IAAMC,EAAcD,EAASD,QAAQG,IAAI,gBAEnB,MAApBF,EAASG,QACO,MAAfF,IAA8D,IAAvCA,EAAYG,QAAQ,cAG5Cb,UAAUc,cAAcC,MAAMhC,MAAK,SAAAiC,GACjCA,EAAaC,aAAalC,MAAK,WAC7BW,OAAOC,SAASuB,eAKpBC,EAAgBb,EAAOP,MAG1BqB,OAAM,WACLC,QAAQC,IACN,oEAvFAC,CAAwBjB,EAAOP,GAI/BC,UAAUc,cAAcC,MAAMhC,MAAK,WACjCsC,QAAQC,IACN,iHAMJH,EAAgBb,EAAOP,OAM/B,SAASoB,EAAiBb,EAAeP,GACvCC,UAAUc,cACPhB,SAASQ,GACTvB,MAAK,SAAAiC,GACJA,EAAaQ,cAAgB,WAC3B,IAAMC,EAAmBT,EAAaU,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBG,QACf5B,UAAUc,cAAce,YAI1BR,QAAQC,IACN,iHAKEvB,GAAUA,EAAO+B,UACnB/B,EAAO+B,SAASd,KAMlBK,QAAQC,IAAI,sCAGRvB,GAAUA,EAAOgC,WACnBhC,EAAOgC,UAAUf,WAO5BI,OAAM,SAAAY,GACLX,QAAQW,MAAM,4CAA6CA,M,ICnG5CC,E,8GAISC,eACxBD,EAAqBE,iBACrB,SAACC,GAAD,OAAyBC,YAAWD,OAEdtB,Q,KARPmB,EACJE,gBAA+B,CAAC,UAAW,Y,mFCIvCG,E,uKAkBjB,OACE,yBAAKC,UAAWC,KAAKD,UAAWE,KAAK,SACnC,kBAAC,IAAD,CAAMC,GAAIC,GAAOC,KAAKC,MACpB,yBACEN,UAAWO,IAAOC,KAClBC,IAAKR,KAAKO,KACVE,IAAI,OACJR,KAAK,UAET,yBACEF,UAAWO,IAAOI,QAClBT,KAAK,WACJvC,iD,gCAxBP,IAAMiD,EAAcX,KAAKY,MAAMC,QAAUP,IAAOO,OAChD,MAAM,GAAN,OAAUP,IAAOQ,MAAjB,YAA0BH,K,2BAI1B,IAAMI,EAAc,SAACR,GAAD,6BAAkCA,IACtD,OAAOP,KAAKY,MAAMC,OACdE,EAAY,kBACZA,EAAY,gB,GAdeC,a,wCCA7BC,EAAgB,CACpBC,KAAM,CACJC,KAAM,OAIGC,EAAU,SACRF,GACX,MAAO,CAAEC,KAAM,mBAAoBD,SCVvC,IAAMG,EAAoB,CACxBC,QAAS,GACTC,cAAe,KACfC,UAAW,GAGAJ,EAAU,SACLE,GACd,MAAO,CAAEH,KAAM,wBAAyBG,YAF/BF,EAAU,SAICG,GACpB,MAAO,CAAEJ,KAAM,+BAAgCI,kBALtCH,EAAU,SAOHI,GAChB,MAAO,CAAEL,KAAM,2BAA4BK,cAqBxC,SAASC,EAAWrC,GACzB,OAAOsC,oBAAUtC,EAAMiC,OC3BzB,IAAMM,EAAwB,CAC5B/E,GAAI,GACJgF,aAAc,GACdC,OAAQ,IAGGT,EAAU,CACrBU,UADqB,SACVlF,GACT,MAAO,CAAEuE,KAAM,qBAAsBvE,OAEvCmF,oBAJqB,SAIAH,GACnB,MAAO,CAAET,KAAM,gCAAiCS,iBAElDI,cAPqB,SAONH,GACb,MAAO,CAAEV,KAAM,yBAA0BU,WAE3CI,kBAVqB,SAUFL,EAAsBM,GAEvC,MAAO,CAAEf,KAAM,+BAAgCgB,QAD/B,CAAEP,eAAcM,eAGlCE,eAdqB,SAcLR,EAAsBS,GAEpC,MAAO,CAAElB,KAAM,2BAA4BgB,QAD3B,CAAEP,eAAcS,YAGlCC,UAlBqB,SAkBVC,GACT,MAAO,CAAEpB,KAAM,qBAAsBoB,UAEvCC,UArBqB,SAqBVZ,GACT,MAAO,CAAET,KAAM,qBAAsBS,iBAEvCa,MAxBqB,WAyBnB,MAAO,CAAEtB,KAAM,mBAqDZ,SAASM,EAAWrC,GACzB,OAAOsC,oBAAUtC,EAAMuC,SCvFzB,IAAMe,EAAoB,CACxBA,MAAO,IAGItB,EAAU,SACPsB,GACZ,MAAO,CAAEvB,KAAM,sBAAuBuB,UAF7BtB,EAAU,SAIXuB,GACR,MAAO,CAAExB,KAAM,kBAAmBwB,SALzBvB,EAAU,SAOXxE,GACR,MAAO,CAAEuE,KAAM,kBAAmBvE,OCrBtC,IAAMgG,EAAoC,CACxCC,UAAU,GAGCzB,EAAU,CACrB0B,gBADqB,SACJD,GACf,MAAO,CAAE1B,KAAM,kCAAmC0B,cAc/C,SAASpB,EAAWrC,GACzB,OAAOsC,oBAAUtC,EAAMwD,eClBzB,IAAMG,EAAWC,0BAAgB,CAC/B/B,ILYK,WAA8C,IAA3B7B,EAA0B,uDAAlB6B,EAAKgC,EAAa,uCAClD,OAAQA,EAAO9B,MACb,IAAK,mBAEH,OADAF,EAAIC,KAAO+B,EAAO/B,KACXQ,oBAAUT,GACnB,QACE,OAAO7B,IKjBXiC,MJeK,WAAgD,IAA7BjC,EAA4B,uDAApBiC,EAAO4B,EAAa,uCACpD,OAAQA,EAAO9B,MACb,IAAK,wBAEH,OADAE,EAAMC,QAAU2B,EAAO3B,QAChBI,oBAAUL,GACnB,IAAK,+BAEH,OADAA,EAAME,cAAgB0B,EAAO1B,cACtBG,oBAAUL,GACnB,IAAK,2BAEH,OADAA,EAAMG,UAAYyB,EAAOzB,UAClBE,oBAAUL,GAEnB,QACE,OAAOjC,II3BXuC,QHwCK,WAAkD,IAA/BvC,EAA8B,uDAAtBuC,EAASsB,EAAa,uCACtD,OAAQA,EAAO9B,MACb,IAAK,qBAEH,OADAQ,EAAQ/E,GAAKqG,EAAOrG,GACb8E,oBAAUC,GACnB,IAAK,gCAEH,OADAA,EAAQC,aAAeqB,EAAOrB,aACvBF,oBAAUC,GACnB,IAAK,yBAEH,OADAA,EAAQE,OAASoB,EAAOpB,OACjBH,oBAAUC,GACnB,IAAK,+BAAiC,IAAD,EACCsB,EAAOd,QAAnCP,EAD2B,EAC3BA,aAAcM,EADa,EACbA,UAChBK,EAAQW,eAAKvB,EAAQE,OAAQ,CAAEjF,GAAIgF,IAEzC,OADIW,IAASA,EAAML,UAAYA,GACxBR,oBAAUC,GAEnB,IAAK,2BAA6B,IAAD,EACEsB,EAAOd,QAAhCP,EADuB,EACvBA,aAAcS,EADS,EACTA,OAChBc,EAAcD,eAAKvB,EAAQE,OAAQ,CAAEQ,WACrCe,EAAcF,eAAKvB,EAAQE,OAAQ,CAAEjF,GAAIgF,IAG/C,OAFIuB,IAAeA,EAAYd,QAAUA,GACrCe,IAAeA,EAAYf,OAASA,GACjCX,oBAAUC,GAEnB,IAAK,qBACH,IAAM0B,EAAW3D,eAAKiC,EAAQE,OAAQ,CAAEjF,GAAIqG,EAAOV,MAAM3F,KAEzD,OADKyG,GAAU1B,EAAQE,OAAOyB,KAAKL,EAAOV,OACnCb,oBAAUC,GAEnB,IAAK,qBAAuB,IACJ/E,EAAOqG,EAArBrB,aACFyB,EAAW3D,eAAKiC,EAAQE,OAAQ,CAAEjF,OAIxC,OAHIyG,IACF1B,EAAQE,OAAS0B,iBAAO5B,EAAQE,OAAQ,CAAEjF,QAErC8E,oBAAUC,GAEnB,IAAK,gBAIH,OAHAA,EAAQ/E,GAAK,GACb+E,EAAQC,aAAe,GACvBD,EAAQE,OAAS,GACVH,oBAAUC,GAEnB,QACE,OAAOvC,IGpFXsD,MFkBK,WAAgD,IAA7BtD,EAA4B,uDAApBsD,EAAOO,EAAa,uCACpD,OAAQA,EAAO9B,MACb,IAAK,sBAEH,OADAuB,EAAMA,MAAQO,EAAOP,MACdhB,oBAAUgB,GACnB,IAAK,kBAEH,OADAA,EAAMA,MAAMc,QAAQP,EAAON,MACpBjB,oBAAUgB,GACnB,IAAK,kBACH,IAAM9F,EAAKqG,EAAOrG,GACZyG,EAAW3D,eAAKgD,EAAMA,MAAO,CAAE9F,OAIrC,OAHIyG,IACFX,EAAMA,MAAQa,iBAAOb,EAAMA,MAAO,CAAE9F,QAE/B8E,oBAAUgB,GAEnB,QACE,OAAOtD,IElCXwD,cDEK,WAAwD,IAArCxD,EAAoC,uDAA5BwD,EAAeK,EAAa,uCAC5D,OAAQA,EAAO9B,MACb,IAAK,kCAEH,OADAyB,EAAcC,SAAWI,EAAOJ,SACzBnB,oBAAUkB,GACnB,QACE,OAAOxD,MCLEqE,wBAAYV,EAAUW,8BAAoBC,8BCXpCC,E,yGAGgB,IACzBpC,EAAcqC,EAAeC,EAAMC,YAAnCvC,UACRwC,aAAaxC,GACbsC,EAAMG,SAASC,EAA8B,M,qCAGd,IAAD,OACxB1C,EAAoBtE,OAAOiH,YAAW,WAC1CL,EAAMG,SAASC,EAA4B,KAC3C,EAAKE,mBACJR,EAAaS,SAChBP,EAAMG,SAASC,EAA8B1C,M,2BAGzCF,EAAiBC,GACrBvB,KAAKsE,OACLR,EAAMG,SAASC,EAA4B5C,IACvCC,EACFuC,EAAMG,SAASC,EAAkC3C,IAC5CvB,KAAKuE,iB,6BAIZvE,KAAKoE,iBACLN,EAAMG,SAASC,EAA4B,KAC3CJ,EAAMG,SAASC,EAAkC,W,KA5BhCN,EACFS,QAAkB,I,qBCM/BG,E,kDAGJ,WAAa5D,GAAoB,IAAD,8BAC9B,cAAMA,IAHE6D,kBAEsB,EAE9B,EAAKA,aAAe,IAAIb,EACxB,EAAKc,YAAc,EAAKA,YAAYC,KAAjB,gBACnB,EAAKC,kBAAoB,EAAKA,kBAAkBD,KAAvB,gBACzB,EAAKE,mBAAqB,EAAKA,mBAAmBF,KAAxB,gBALI,E,0DAiCzB3E,KAAKY,MAAMW,eAAevB,KAAKyE,aAAaH,S,0CAIjDtE,KAAKyE,aAAaH,S,2CAIdtE,KAAKY,MAAMW,gBACbvB,KAAKY,MAAMW,gBACXvB,KAAKyE,aAAaH,U,+BAKpB,OACEtE,KAAKY,MAAMU,SACX,yBAAKvB,UAAWC,KAAK8E,WAAYC,QAAS/E,KAAK0E,aAC5C1E,KAAKgF,eACLhF,KAAKoB,W,qCA3CV,OACE,yBAAKrB,UAAWO,IAAO0E,gBACrB,kBAAC,IAAD,CAASC,KAAMC,IAAoBjF,KAAK,SACxC,0BAAMF,UAAWO,IAAOgB,SAAUtB,KAAKY,MAAMU,Y,8BAMjD,OACEtB,KAAKY,MAAMW,eACX,yBAAKxB,UAAWO,IAAOc,QAASnB,KAAK,WACnC,yBAAKF,UAAWO,IAAO6E,OAAQJ,QAAS/E,KAAK4E,mBAA7C,MACA,yBAAK7E,UAAWO,IAAO8E,QAASL,QAAS/E,KAAK6E,oBAA9C,U,iCAMJ,IAAMQ,EAAcrF,KAAKY,MAAMW,cAAgB,GAAKjB,IAAOgF,OAC3D,MAAM,GAAN,OAAUhF,IAAOe,MAAjB,YAA0BgE,O,GAhCVrE,aA6DLuE,eAAQ9D,EAAW,KAAnB8D,CAAyBf,G,oBC/DnBgB,G,uKAcjB,OACE,yBAAKzF,UAAWC,KAAKD,UAAWE,KAAK,QACnC,yBAAKF,UAAWO,KAAOmF,MACrB,kBAAC,EAAD,CAAO5E,OAAQb,KAAKY,MAAM8E,OAC1B,yBAAK3F,UAAWO,KAAOqF,SACpB3F,KAAKY,MAAMgF,WAGhB,yBAAK7F,UAAWO,KAAOuF,QACrB,yBACE9F,UAAWO,KAAOwF,WAClBtF,IAAI,yBACJC,IAAI,gBAER,kBAAC,GAAD,S,gCApBJ,IAAMsF,EAAY/F,KAAKY,MAAM8E,MAAQpF,KAAOoF,KACtCM,EAAiB1F,KAAON,KAAKY,MAAMqF,WACzC,MAAM,GAAN,OAAU3F,KAAO4F,KAAjB,YAAyBH,EAAzB,YAAsCC,O,GAVRhF,aCD5BmF,G,8KAGaC,GAAwC,IAAD,OAItDA,EAH0BlJ,OAAOiH,YAAW,WAC1C,EAAKvD,MAAMyF,QAAQ/C,KAAKnD,GAAOC,KAAKC,QACnC8F,EAAQ9B,Y,yCAIO+B,GAAuB,IAAD,OACxCE,IAAQC,IAAIC,YAAY,cAAc,SAACC,GACrC,IAAMC,EAAOD,EAAKE,IAAIC,MAAMlJ,eAA4BmJ,MAClDC,EAASC,qBAAWL,EAAM,aAC1BM,EAAUC,mBAAS,CAAC,SAAU,WAAYP,IAC5CI,GAAUE,KACZ,EAAKpG,MAAMyF,QAAQ/C,KAAKoD,GACxBN,U,0CAKgB,IAAD,OACnBpG,KAAKkH,iBAAgB,SAAA1F,GACnB,EAAK2F,oBAAmB,WACtBnD,aAAaxC,W,+BAMjB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAMkE,MAAM,EAAMO,UAAU,gB,GAlChBjF,aAAhBmF,GACG9B,QAAkB,IAwCZ+C,mBAAWjB,I,qBCzCLkB,G,uKAOjB,OACE,yBAAKtH,UAAWO,KAAOgH,QACrB,kBAAC,IAAD,CACEC,MAAM,QACNC,OAAO,QACPzC,QAAS/E,KAAKY,MAAM8D,aACnB1E,KAAKY,MAAM6G,W,GAbczG,a,oBCC9B0G,G,kDACJ,WAAa9G,GAAmB,IAAD,8BAC7B,cAAMA,IACD+G,iBAAmB,EAAKA,iBAAiBhD,KAAtB,gBACxB,EAAKiD,gBAAkB,EAAKA,gBAAgBjD,KAArB,gBAHM,E,+DAO7B3E,KAAKY,MAAMyF,QAAQ/C,KAAKnD,GAAO0H,aAAaxH,Q,wCAI5CL,KAAKY,MAAMyF,QAAQ/C,KAAKnD,GAAO2H,YAAYzH,Q,+BAS3C,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAY0H,YAAU,GACpB,kBAAC,GAAD,CAAMrC,MAAM,EAAOO,UAAU,SAC3B,yBAAKlG,UAAWO,KAAOF,MACrB,kBAAC,GAAD,CACEqH,KAAK,kBACL/C,YAAa1E,KAAK2H,mBACpB,kBAAC,GAAD,CACEF,KAAK,iBACL/C,YAAa1E,KAAK4H,kBACpB,yBAAK7H,UAAWO,KAAOuF,QACrB,kBAAC,IAAD,CAAM3F,GAAIC,GAAO6H,QAAQ3H,MAAzB,kBACA,uBACEN,UAAWO,KAAO2H,UAClBC,wBAAyBlI,KAAKiI,mB,gCApB5C,IAAMR,EAAI,UAAM/J,WAAN,aAAoC,IAAIyK,MAAOC,eACzD,MAAO,CAAEC,OAAO,UAAD,OAAYZ,Q,GAjBZzG,aA8CJoG,eAAWM,I,qBChDbtG,GAA8B,CACzCkH,iBADyC,SACvB1L,GAChB,OAAO2L,EAAezG,UAAUlF,K,qBCCf4L,G,uKAUjB,OACE,2BACEzI,UAAWO,KAAOmI,MAClBC,KAAM1I,KAAKY,MAAM8H,KACjBvH,KAAMnB,KAAKY,MAAMO,KACjBwH,MAAO3I,KAAKY,MAAM+H,MAClBC,YAAa5I,KAAKY,MAAMgI,YACxB3I,KAAK,QACL4I,SAAU7I,KAAKY,MAAMkI,mB,GAlBM9H,aCO7B+H,G,kDAGJ,WAAanI,GAAa,IAAD,8BACvB,cAAMA,IAHE6D,kBAEe,EAEvB,EAAKrF,MAAQ,CACX4J,UAAW,IAEb,EAAKvE,aAAe,IAAIb,EACxB,EAAKqF,kBAAoB,EAAKA,kBAAkBtE,KAAvB,gBACzB,EAAKiD,gBAAkB,EAAKA,gBAAgBjD,KAArB,gBAPA,E,8DAUNuE,GACjB,IAAMC,EAASD,EAAMC,OACbR,EAAgBQ,EAAhBR,MACK,cADWQ,EAATT,MACW1I,KAAKoJ,SAAS,CAAEJ,UAAWL,M,wCAIrD,IAAMK,EAAYK,eAAKrJ,KAAKZ,MAAM4J,WAClC,IAAKA,EAAW,CAEd,OAAOhJ,KAAKyE,aAAanB,KADT,yCAGlBtD,KAAKY,MAAM0H,iBAAiBU,GAC5BhJ,KAAKY,MAAMyF,QAAQ/C,KAAKnD,GAAOwB,QAAQtB,Q,qCAGxB,IACPiJ,EAAWtJ,KAAKY,MAAMyF,QAAQlJ,SAA9BmM,OAEFN,EADQO,KAAGC,MAAMF,EAAQ,CAAEG,mBAAmB,IAC5B7M,GACpBoM,GAAWhJ,KAAKoJ,SAAS,CAAEJ,gB,0CAI/BhJ,KAAK0J,iB,+BAIL,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAMhE,MAAM,EAAOO,UAAU,SAC3B,kBAAC,WAAD,KACE,kBAAC,GAAD,CACEyC,KAAK,YACLvH,KAAK,OACLwH,MAAO3I,KAAKZ,MAAM4J,UAClBJ,YAAY,aACZE,aAAc9I,KAAKiJ,oBACrB,kBAAC,GAAD,CACExB,KAAK,eACL/C,YAAa1E,KAAK4H,0B,GAtDR5G,aA+DXoG,eAAW7B,YAAQ,KAAMnE,GAAdmE,CAAuBwD,K,qBC/E5BY,G,iDACTC,QAAyBtD,IAAQuD,Q,KAEjCC,WAAsBjK,YAAW,Y,yFAEhCkK,G,6EACL/J,KAAK8J,W,yCACA5M,OAAO8M,aAAaC,QAAQF,I,uBAEX/J,KAAK4J,QAAQzL,IAAI,CAAE4L,Q,uBAAnCpB,E,EAAAA,M,kBACDA,G,0KAIAoB,EAAapB,G,qEAClB3I,KAAK8J,W,gBACP5M,OAAO8M,aAAaE,QAAQH,EAAKpB,G,sCAE3B3I,KAAK4J,QAAQO,IAAI,CAAEJ,MAAKpB,U,+KAIpBoB,G,qEACR/J,KAAK8J,W,gBACP5M,OAAO8M,aAAaI,WAAWL,G,sCAEzB/J,KAAK4J,QAAQS,OAAO,CAAEN,Q,8GC3BbO,G,WAKnB,aAAgB,yBAJNP,IAAc,cAIT,KAFLQ,oBAEK,EACbvK,KAAKuK,eAAiB,IAAIZ,G,kDAI1B,OAAO3J,KAAKuK,eAAepM,IAAI6B,KAAK+J,O,0BAGjCS,GACH,OAAOxK,KAAKuK,eAAeJ,IAAInK,KAAK+J,IAAKS,K,+BAIzC,OAAOxK,KAAKuK,eAAeF,OAAOrK,KAAK+J,S,KChBtBU,G,WAKnB,aAAgB,yBAJNhG,kBAIK,OAFLiG,wBAEK,EACb1K,KAAKyE,aAAe,IAAIb,EACxB5D,KAAK0K,mBAAqB,IAAIJ,G,qLAIJtK,KAAK0K,mBAAmBvM,M,cAA5CqM,E,yBACCG,KAAMC,OAAO,CAClBC,QAAQ,WAAD,OAAanN,mBACpBM,QAAS,CAAE8M,cAAc,UAAD,OAAYN,O,wIAIjBhL,GACrB,IACM8B,EADe9B,EAAMvB,UAAYuB,EAAMvB,SAASwI,KAAKnF,SAC5B9B,EAAM8B,QACrCtB,KAAKyE,aAAanB,KAAKhC,K,mEAGdjB,EAAc+F,G,4FACFpG,KAAK+K,S,cACnB5M,IAAIkC,GACR9D,MAAK,SAAA0B,GAAQ,OAAImI,EAASnI,EAASwI,SACnC7H,OAAM,SAAAY,GACL4G,EAAS,MACT,EAAK4E,YAAYxL,M,6KAIXa,EAAc8B,EAAciE,G,4FACjBpG,KAAK+K,S,cACnBE,KAAK5K,EAAM8B,GACf5F,MAAK,SAAA0B,GAAQ,OAAImI,EAASnI,EAASwI,SACnC7H,OAAM,SAAAY,GACL4G,EAAS,MACT,EAAK4E,YAAYxL,M,gLAIVa,EAAc8B,EAAciE,G,4FAClBpG,KAAK+K,S,cACnBG,MAAM7K,EAAM8B,GAChB5F,MAAK,SAAA0B,GAAQ,OAAImI,EAASnI,EAASwI,SACnC7H,OAAM,SAAAY,GACL4G,EAAS,MACT,EAAK4E,YAAYxL,M,iLAITa,EAAc8B,EAAciE,G,4FACnBpG,KAAK+K,S,cACnBI,OAAO9K,EAAM,CAAEoG,KAAMtE,IACzB5F,MAAK,SAAA0B,GAAQ,OAAImI,EAASnI,EAASwI,SACnC7H,OAAM,SAAAY,GACL4G,EAAS,MACT,EAAK4E,YAAYxL,M,kHC7CJ4L,G,WAKnB,aAAgB,yBAJNC,oBAIK,OAFLX,wBAEK,EACb1K,KAAKqL,eAAiB,IAAIZ,GAC1BzK,KAAK0K,mBAAqB,IAAIJ,G,mDAGxBgB,EAAgCjF,GAAmB,IAAD,OACxDrG,KAAKqL,eAAeJ,KAAK,eAAgBK,EAAzC,uCAAsD,WAAMrN,GAAN,mBAAAsN,EAAA,0DAChDtN,EADgD,uBAE1CrB,EAAoBqB,EAApBrB,GAAI4N,EAAgBvM,EAAhBuM,YAFsC,SAG5C,EAAKE,mBAAmBP,IAAIK,GAHgB,OAI5C7H,EAAgC,CAAE/F,MACxC,EAAK4O,oBAAoB7I,GAAM,WAE7BmB,EAAMG,SAASwH,EADS,CAAEtK,KAAM,UAEhCkF,EAAQ/C,KAAKnD,GAAOwB,QAAQtB,SARoB,2CAAtD,kCAAAL,KAAA,kB,0CAcmB2C,EAA+ByD,GAClDpG,KAAKqL,eAAeH,MAAM,sBAAuBvI,GAAM,SAAA1E,GACjDA,GAAUmI,W,KCrCPhF,GAA+B,CAC1CsK,eAD0C,SAC1BxK,GACd,OAAOuK,EAAuBvK,KCM5ByK,G,kDAGJ,WAAa/K,GAAa,IAAD,8BACvB,cAAMA,IAHEgL,aAEe,EAEvB,EAAKA,QAAU,IAAIC,GACnB,EAAKzM,MAAQ,CACX0M,SAAU,GACVC,SAAU,IAEZ,EAAK9C,kBAAoB,EAAKA,kBAAkBtE,KAAvB,gBACzB,EAAKgD,iBAAmB,EAAKA,iBAAiBhD,KAAtB,gBARD,E,8DAWNuE,GACjB,IAAMC,EAASD,EAAMC,OACbR,EAAgBQ,EAAhBR,MACR,OADwBQ,EAATT,MAEb,IAAK,WACH1I,KAAKoJ,SAAS,CAAE0C,SAAUnD,IAC1B,MACF,IAAK,WACH3I,KAAKoJ,SAAS,CAAE2C,SAAUpD,O,yCAKX,IAAD,EACa3I,KAAKZ,MAC9BkM,EAAc,CAAEQ,SAFJ,EACVA,SACwBC,SAFd,EACAA,UAElB/L,KAAK4L,QAAQI,OAAOV,EAAatL,KAAKY,MAAMyF,W,+BAI5C,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAY0B,YAAU,GACpB,kBAAC,GAAD,CAAMrC,MAAM,EAAOO,UAAU,SAC3B,kBAAC,WAAD,KACE,kBAAC,GAAD,CACEyC,KAAK,WACLvH,KAAK,OACLwH,MAAO3I,KAAKZ,MAAM0M,SAClBlD,YAAY,WACZE,aAAc9I,KAAKiJ,oBACrB,kBAAC,GAAD,CACEP,KAAK,WACLvH,KAAK,WACLwH,MAAO3I,KAAKZ,MAAM2M,SAClBnD,YAAY,WACZE,aAAc9I,KAAKiJ,oBACrB,kBAAC,GAAD,CACExB,KAAK,gBACL/C,YAAa1E,KAAK2H,2B,GArDP3G,aA8DZoG,eAAW7B,YAAQ,KAAMnE,GAAdmE,CAAuBoG,K,qBCzE5BM,G,WAWnB,aAAgB,yBAJNlB,YAIK,OAFLtG,kBAEK,EACbzE,KAAK+K,OAAS,IAAImB,KAAKD,EAAYE,SACnCnM,KAAKyE,aAAe,IAAIb,E,4DAGCzC,GACzB,OAAQA,GACN,IAAK,uBACH,MAAO,gCACT,IAAK,eACH,MAAO,+BACT,IAAK,aACH,MAAO,wBACT,IAAK,cACH,MAAO,kBACT,IAAK,UACH,MAAO,qCACT,IAAK,mBACH,MAAO,2BACT,IAAK,kBACH,MAAO,6BACT,IAAK,eACH,MAAO,yBACT,IAAK,eACH,MAAO,0BACT,IAAK,gBACH,MAAO,2BACT,IAAK,iBACH,MAAO,8BACT,IAAK,SACH,MAAO,gCACT,QACE,MAAO,0B,mCAICkF,GAAmB,IAAD,OAC9BrG,KAAK+K,OAAOqB,GAAG,SAAS,SAAA5M,GAAU,IACxB2B,EAAS3B,EAAT2B,KACFG,EAAU,EAAK+K,gBAAgBlL,GACrC,EAAKsD,aAAanB,KAAKhC,GAEN2F,mBADO,CAAC,UAAW,eAAgB,oBACT9F,IAC7BkF,EAAQ/C,KAAKnD,GAAOC,KAAKC,W,6BAInC+F,GACNpG,KAAK+K,OAAOqB,GAAG,QAAQ,SAAAE,GAAiB,OAAIlG,EAASkG,Q,2BAIrDtD,EACAuD,EACAnG,GACA,IAAMoG,EAAOxM,KAAK+K,OAAOyB,KAAKxD,EAAWuD,GACzCnG,EAASoG,K,oCAGIpG,GACbpG,KAAK+K,OAAOqB,GAAG,QAAQ,SAAAI,GAAI,OAAIpG,EAASoG,Q,iCAG9BA,EAAuBC,GACjCD,EAAKE,OAAOD,K,gCAIZD,EACApG,GAEAoG,EAAKJ,GAAG,UAAU,SAAAO,GAChB,IAAMC,EAAqBJ,EAAKK,KAChCzG,EAASwG,EAAoBD,Q,mCAK/B3M,KAAK+K,OAAO+B,Y,mCAGA1G,GACZpG,KAAK+K,OAAOqB,GAAG,SAAS,kBAAMhG,W,KA7Fb6F,GACFE,QAAU,CACzBxJ,KAAMjF,kBACN2C,KAAM,QACN0M,QAAQ,G,ICLSC,G,WAGnB,aAAgB,yBAFNvI,kBAEK,EACbzE,KAAKyE,aAAe,IAAIb,E,+FAGTyC,EAAkBD,G,2FAEvB6G,EAAiBzP,UAAU0P,aAA3BD,aACFE,EAAc,CAAE5K,OAAO,EAAM6K,OAAO,G,SACHH,EAAaE,G,OAA9CV,E,OACNrG,EAASqG,G,gDAETzM,KAAKyE,aAAanB,KAAK,iCACvB+C,EAAQ/C,KAAKnD,GAAOC,KAAKC,M,mJAIjBoM,GACV,IAAMY,EAASZ,EAAYa,YAC3BC,kBAAQF,GAAQ,SAAAG,GAAK,OAAIA,EAAMC,Y,sCAI/BlB,EACAnG,GACA,IAAMoH,EAAQE,gBAAMnB,EAAOoB,kBACvBH,IAAOA,EAAMI,SAAWJ,EAAMI,SAElCxH,IADgBoH,GAAQA,EAAMI,W,sCAK9BrB,EACAnG,GACA,IAAMoH,EAAQE,gBAAMnB,EAAOsB,kBACvBL,IAAOA,EAAMI,SAAWJ,EAAMI,SAElCxH,IADgBoH,GAAQA,EAAMI,a,KCxCbE,G,qGACK,IvB4BC1O,EuB1BvB,MAAsB,UvB0BCA,EuB3BO0E,EAAMC,WvB4B/BrC,oBAAUtC,EAAM6B,MuB5BbC,KACKC,O,kCAKb2C,EAAMG,SAASwH,EADF,CAAEtK,KAAM,Y,KCFJ4M,G,WAGnB,aAAgB,yBAFNC,iBAEK,EACbhO,KAAKgO,YAAc,IAAIF,G,yDAGD9E,GAClBhJ,KAAKgO,YAAYC,cACnBnK,EAAMG,SAASsE,EAAezG,UAAUkH,M,sCAIjBpH,GACzBkC,EAAMG,SAASsE,EAAexG,oBAAoBH,M,wCAGjCA,GAAuB,IAChCC,EAAWqM,EAAiBpK,EAAMC,YAAlClC,OAER,OADwBnC,eAAKmC,EAAQ,CAAEjF,GAAIgF,M,4BAItCA,EAAsBwE,GAC3BpG,KAAK0J,aAAa9H,GAClB5B,KAAKmO,gBAAgBvM,GAErBwE,EADkBpG,KAAKoO,kB,qCAKvB,OAAOF,EAAiBpK,EAAMC,YAAYnH,K,oCAG7BgF,GAEb,OAD0BsM,EAAiBpK,EAAMC,YAAzCnH,KACcgF,I,sCAGPA,GACf,OAAQ5B,KAAKqO,cAAczM,K,oCAGdA,GAEb,OAAQA,IADqBsM,EAAiBpK,EAAMC,YAA5CnC,e,sCAIOA,GACf,OAAO5B,KAAKgO,YAAYC,eAAiBjO,KAAKqO,cAAczM,K,wCAG3CA,GACjB,OAAQ5B,KAAKqO,cAAczM,KAAkB5B,KAAKsO,kBAAkB1M,K,qCAIpEkC,EAAMG,SAASsE,EAAe9F,a,eCtDb8L,G,WAKnB,aAAgB,yBAJNC,oBAIK,OAFLC,kBAEK,EACbzO,KAAKwO,eAAiB,IAAIT,GAC1B/N,KAAKyO,aAAe,IAAIzB,G,qDAGhBpL,GAAgC,IAChCC,EAAWqM,EAAiBpK,EAAMC,YAAlClC,OACR,OAAOnC,eAAKmC,EAAQ,CAAEjF,GAAIgF,M,kCAI1BA,EACA2K,EACAnG,GASAA,EARc,CACZxJ,GAAIgF,EACJ2K,SACArK,WAAW,EACXwM,aAAc1O,KAAKwO,eAAeG,gBAAgB/M,GAClDS,OAAQrC,KAAKwO,eAAeH,cAAczM,GAC1CgN,SAAUC,mB,+BAKJjN,GAA+C,IAC/CC,EAAWqM,EAAiBpK,EAAMC,YAAlClC,OACR,OAAOqB,eAAKrB,GAAQ,SAAAU,GAAK,OAAIA,EAAM3F,KAAOgF,O,qCAGH,IAC/BA,EAAiBsM,EAAiBpK,EAAMC,YAAxCnC,aACR,OAAO5B,KAAK8O,SAASlN,K,gCAGZW,GACTuB,EAAMG,SAASsE,EAAejG,UAAUC,M,gCAG/BX,GACTkC,EAAMG,SAASsE,EAAe/F,UAAUZ,M,sCAIxC,IAAMmN,EAAY/O,KAAKgP,eACnBD,GAAW/O,KAAKyO,aAAaQ,WAAWF,EAAUxC,Y,eCzDrC2C,G,WAKnB,aAAgB,yBAJNlB,iBAIK,OAFLQ,oBAEK,EACbxO,KAAKgO,YAAc,IAAIF,GACvB9N,KAAKwO,eAAiB,IAAIT,G,0DAGLnM,GACrB,IAAMqM,EAAajO,KAAKgO,YAAYC,aAC9BK,EAAoBtO,KAAKwO,eAAeF,kBAAkB1M,GAChE,OAAOqM,IAAeK,I,sCAGC1M,GACvB,OAAQ5B,KAAKwO,eAAeF,kBAAkB1M,K,yCAIzB,IAAIuN,QAAK,CAAE3O,IAAK,CAAC,8BACzB4O,S,iCAGHxN,GACN5B,KAAKqP,cAAczN,IAAe5B,KAAKsP,qB,mCAG/B1N,GACR5B,KAAKuP,gBAAgB3N,IAAe5B,KAAKsP,uB,KC7B5BE,G,WAKnB,aAAgB,yBAJNnE,oBAIK,OAFL2C,iBAEK,EACbhO,KAAKqL,eAAiB,IAAIZ,GAC1BzK,KAAKgO,YAAc,IAAIF,G,iDAGnBzH,GACerG,KAAKgO,YAAYC,cAElCjO,KAAKqL,eAAelN,IAAI,cAAc,SAAAF,GAC/BA,GAAUoI,EAAQ/C,KAAKnD,GAAO0H,aAAaxH,a,eCjBnCoP,G,uGAIjB,IAAMC,EAAQ,kBAAchS,kBAAd,WACd+R,EAAc1E,OAAS,IAAI4E,UAAOD,K,gCAGlBE,EAAiBxJ,GACjCqJ,EAAc1E,OAAO8E,UAAUD,GAAS,SAAAzN,GAAO,OAAIiE,EAASjE,Q,kCAG1CyN,GAClBH,EAAc1E,OAAO+E,YAAYF,K,8BAGnBA,EAAiBzN,GAC/BsN,EAAc1E,OAAOgF,QAAQH,EAASzN,O,KAjBrBsN,GACF1E,Y,ECDJ,QACb7I,UAAW,CACT0N,QADS,SACA5G,GACP,MAAM,cAAN,OAAqBA,IAEvB6G,UAJS,SAIE7G,EAAmB5C,GAC5BqJ,GAAcI,UACZ7P,KAAK4P,QAAQ5G,IACb,SAACpH,GAAD,OAA0BwE,EAASxE,OAGvCkO,YAVS,SAUI9G,GACXyG,GAAcK,YAAY9P,KAAK4P,QAAQ5G,KAEzC+G,QAbS,SAaA/G,EAAmBpH,GAC1B6N,GAAcM,QAAQ/P,KAAK4P,QAAQ5G,GAAYpH,KAInDoO,eAAgB,CACdJ,QADc,SACL5G,GACP,MAAM,mBAAN,OAA0BA,IAE5B6G,UAJc,SAIH7G,EAAmB5C,GAC5BqJ,GAAcI,UACZ7P,KAAK4P,QAAQ5G,IACb,SAACpH,GAAD,OAA0BwE,EAASxE,OAEvCkO,YATc,SASD9G,GACXyG,GAAcK,YAAY9P,KAAK4P,QAAQ5G,KAEzC+G,QAZc,SAYL/G,EAAmBpH,GAC1B6N,GAAcM,QAAQ/P,KAAK4P,QAAQ5G,GAAYpH,KAInDqO,iBAAkB,CAChBL,QADgB,SACP5G,GACP,MAAM,qBAAN,OAA4BA,IAE9B6G,UAJgB,SAIL7G,EAAmB5C,GAC5BqJ,GAAcI,UACZ7P,KAAK4P,QAAQ5G,IACb,SAACpH,GAAD,OAA0BwE,EAASxE,OAGvCkO,YAVgB,SAUH9G,GACXyG,GAAcK,YAAY9P,KAAK4P,QAAQ5G,KAEzC+G,QAbgB,SAaP/G,EAAmBpH,GAC1B6N,GAAcM,QAAQ/P,KAAK4P,QAAQ5G,GAAYpH,KAInD8M,aAAc,CACZkB,QADY,SACH5G,GACP,MAAM,iBAAN,OAAwBA,IAE1B6G,UAJY,SAID7G,EAAmB5C,GAC5BqJ,GAAcI,UACZ7P,KAAK4P,QAAQ5G,IACb,SAACpH,GAAD,OAA0BwE,EAASxE,OAEvCkO,YATY,SASC9G,GACXyG,GAAcK,YAAY9P,KAAK4P,QAAQ5G,KAEzC+G,QAZY,SAYH/G,EAAmBpH,GAC1B6N,GAAcM,QAAQ/P,KAAK4P,QAAQ5G,GAAYpH,M,oBCxDhCsO,G,uKAkCjB,OAAO,yBAAKnQ,UAAWC,KAAKD,UAAWoQ,MAAOnQ,KAAKM,W,6BAhBnD,MAAO,CACL8P,MAAOpQ,KAAKY,MAAMwP,MAClBC,OAAQrQ,KAAKY,MAAMyP,OACnBC,UAAWtQ,KAAKY,MAAM0P,UACtBC,aAAcvQ,KAAKY,MAAM2P,aACzBC,cAAexQ,KAAKY,MAAM4P,iB,gCAIZ,IACRjJ,EAAUvH,KAAKY,MAAf2G,MACFkJ,EAAalJ,GAASjH,KAAOiH,GACnC,MAAM,GAAN,OAAUjH,KAAOoQ,SAAjB,YAA6BD,O,GA9BKzP,aAAjBkP,GAUZS,aAAe,CACpBL,UAAW,IACXC,aAAc,IACdC,cAAe,IACfjJ,MAAO,a,wBChBUqJ,G,uKAMjB,OAAS5Q,KAAKY,MAAM2B,OAClB,kBAAC,IAAD,CAAQsO,KAAK,MACX,yBAAK9Q,UAAWO,KAAOwQ,eACrB,kBAAC,GAAD,CACEV,MAAM,OACNC,OAAO,IACPG,cAAc,wBAChB,kBAAC,IAAD,CACEzQ,UAAWO,KAAO2E,KAClBA,KAAM8L,Y,GAfyB/P,a,kDCStBgQ,G,uKA4BjB,OACE,yBACEjR,UAAWC,KAAKD,UAChBE,KAAMD,KAAKY,MAAMO,KACjB4D,QAAS/E,KAAKY,MAAM8D,aACpB,kBAAC,IAAD,CAASO,KAAMjF,KAAKiF,U,gCAzBxB,IAAMgM,EAAcjR,KAAKY,MAAMyB,OAAS/B,KAAO+B,OAAS,GACxD,MAAM,GAAN,OAAU/B,KAAO2C,OAAjB,YAA2BgO,K,2BAI3B,OAAQjR,KAAKY,MAAMO,MACjB,IAAK,SACH,OAAO+P,IACT,IAAK,YACH,OAAOC,IACT,IAAK,MACH,OAAOC,IACT,IAAK,QACH,OAAOL,IACT,IAAK,QACH,OAAOM,S,GAvBqBrQ,a,oBCV9BsQ,G,kDACJ,WAAa1Q,GAA4B,IAAD,8BACtC,cAAMA,IACD8D,YAAc,EAAKA,YAAYC,KAAjB,gBAFmB,E,0DAUtC,IAAM9B,GAAY7C,KAAKY,MAAMiC,SAC7BiB,EAAMG,SAAS7C,EAAQ0B,gBAAgBD,M,+BAIvC,OACE,yBAAK9C,UAAWO,KAAOsC,eACrB,yBAAK7C,UAAWO,KAAOgH,OAAQvC,QAAS/E,KAAK0E,aAC3C,kBAAC,IAAD,CAASO,KAAMjF,KAAKiF,KAAMlF,UAAWO,KAAO2E,W,2BAZlD,OAAOjF,KAAKY,MAAMiC,SAAW0O,IAAcC,Q,GAPnBxQ,aA0BbuE,eAAQ9D,EAAWL,EAAnBmE,CAA4B+L,I,oBCZtBG,G,kDAOnB,WAAa7Q,GAAsB,IAAD,8BAChC,cAAMA,IAPE6N,kBAMwB,IAJxBiD,kBAIwB,IAFxBjN,kBAEwB,EAEhC,EAAKgK,aAAe,IAAIzB,GACxB,EAAK0E,aAAe,IAAInD,GACxB,EAAK9J,aAAe,IAAIb,EACxB,EAAKxE,MAAQ,CACXuS,gBAAgB,EAChBC,gBAAgB,GAElB,EAAKC,kBAAoB,EAAKA,kBAAkBlN,KAAvB,gBACzB,EAAKmN,qBAAuB,EAAKA,qBAAqBnN,KAA1B,gBAC5B,EAAKoN,eAAiB,EAAKA,eAAepN,KAApB,gBACtB,EAAKqN,iBAAmB,EAAKA,iBAAiBrN,KAAtB,gBACxB,EAAKsN,iBAAmB,EAAKA,iBAAiBtN,KAAtB,gBAbQ,E,gEAyC5B3E,KAAKkS,YACHrS,YAAW,UACbsS,KAAcC,MAAMpS,KAAKqS,aAEzBC,KAAgBtS,KAAKqS,YACrBrS,KAAKyE,aAAanB,KAAK,0B,6CAM3B,GAAKtD,KAAKuS,kBAAV,CADsB,MAEkBrE,EAAiBpK,EAAMC,YAAnDiF,EAFU,EAEdpM,GAAegF,EAFD,EAECA,aACvB4Q,GAActQ,UAAU6N,QAAQ/G,EAAWpH,M,uCAIvC5B,KAAKyS,QAAQzS,KAAKY,MAAM8R,c,yCAGT,IAAD,OACZnQ,EAAQvC,KAAK0R,aAAa1C,eAC5BzM,GACFvC,KAAKyO,aAAakE,gBAAgBpQ,EAAMgK,QAAQ,SAAAoF,GAC9C,EAAKvI,SAAS,CAAEuI,wB,yCAKD,IAAD,OACZpP,EAAQvC,KAAK0R,aAAa1C,eAC5BzM,GACFvC,KAAKyO,aAAamE,gBAAgBrQ,EAAMgK,QAAQ,SAAAqF,GAC9C,EAAKxI,SAAS,CAAEwI,wB,+BAqCpB,OACE,yBAAK7R,UAAWO,KAAOc,SACrB,kBAAC,GAAD,MACCpB,KAAK6S,W,gCAhGV,OADe3E,EAAiBpK,EAAMC,YAA9BnH,K,gCAKR,OAAOK,QAAQ+C,KAAKgJ,a,6BAIpB,OAAO/L,QAAQ+C,KAAKgJ,a,iCAIpB,IAAMrC,EAAG,kBAAcjJ,eACfd,EAAOsR,EAAiBpK,EAAMC,YAA9BnH,GACR,MAAM,4CAAN,OAAmD+J,EAAnD,oBAAkE/J,K,wCAIlE,IAAM2F,EAAQvC,KAAK0R,aAAa1C,eAChC,OAAOzM,IAASA,EAAML,Y,wCA4CtB,OAD2B4Q,EAAuBhP,EAAMC,YAC9BlB,W,8BAI1B,OAAO7C,KAAK+S,mBACV,yBAAKhT,UAAWO,KAAOuS,SACrB,kBAAC,GAAD,CACE1R,KAAK,SACLkB,OAAQrC,KAAKkS,UACbxN,YAAa1E,KAAK6R,oBACpB,kBAAC,GAAD,CACE1Q,KAAK,YACLkB,OAAQrC,KAAKuS,kBACb7N,YAAa1E,KAAK8R,uBACpB,kBAAC,GAAD,CACE3Q,KAAK,MACLkB,OAAQrC,KAAKyS,OACb/N,YAAa1E,KAAK+R,iBACpB,kBAAC,GAAD,CACE5Q,KAAK,QACLkB,OAAQrC,KAAKZ,MAAMuS,eACnBjN,YAAa1E,KAAKgS,mBACpB,kBAAC,GAAD,CACE7Q,KAAK,QACLkB,OAAQrC,KAAKZ,MAAMwS,eACnBlN,YAAa1E,KAAKiS,wB,GAjHSjR,a,qBCbhBgS,G,uKAQjB,OACE,yBAAKjT,UAAWO,KAAO2S,aACrB,kBAAC,IAAD,CACEC,MAAOlT,KAAKY,MAAMsS,MAClBrC,KAAK,QACL5Q,KAAMD,KAAKY,MAAMX,MACjB,kBAAC,IAAD,CACEgF,KAAMjF,KAAKY,MAAMqE,KACjBhF,KAAK,e,GAhBwBe,a,qBCIpBmS,G,kDASnB,WAAavS,GAA0B,IAAD,8BACpC,cAAMA,IATE4N,oBAQ4B,IAN5BkD,kBAM4B,EAEpC,EAAKtS,MAAQ,CACXwP,SAAU,EAAKhO,MAAMgO,UAEvB,EAAKJ,eAAiB,IAAIT,GAC1B,EAAK2D,aAAe,IAAInD,GANY,E,sDAiB3B6E,GACLA,GAAWpT,KAAKuC,QAAO6Q,EAAQC,UAAYrT,KAAKuC,MAAMgK,U,4CAGrC3L,EAAyBxB,GAA0B,IAChEwP,EAAahO,EAAbgO,SACF0E,EAAY1E,IAAaxP,EAAMwP,SAErC,OADI0E,GAAWtT,KAAKoJ,SAAS,CAAEwF,aACxB0E,I,+BAGE,IAAD,OACR,OACE,2BACEvT,UAAWO,KAAOiC,MAClBgR,UAAU,EACVC,MAAOxT,KAAKyT,QACZC,aAAa,EACbC,IAAK,SAAApR,GAAK,OAAI,EAAKqR,UAAUrR,IAC7BtC,KAAK,Y,4BA1BT,OAAOD,KAAK0R,aAAa5C,SAAS9O,KAAKY,MAAMhE,M,8BAI7C,OAAOoD,KAAKwO,eAAeqF,cAAc7T,KAAKY,MAAMhE,Q,GAvBfoE,a,oBCMpB8S,G,kDAWnB,WAAalT,GAAoB,IAAD,8BAC9B,cAAMA,IAHE4N,oBAEsB,EAE9B,EAAKA,eAAiB,IAAIT,GAC1B,EAAKrJ,YAAc,EAAKA,YAAYC,KAAjB,gBACnB,EAAKoP,wBAA0B,EAAKA,wBAAwBpP,KAA7B,gBAJD,E,oEAqCPuE,GACvBA,EAAM8K,kBACN,IAAMC,EAAYjU,KAAKwO,eAAeJ,eACtCoE,GAAc9D,aAAaqB,QAAQkE,EAAWjU,KAAKY,MAAMhE,M,oCAIzDkH,EAAMG,SAAS7C,EAAQgB,eAAepC,KAAKY,MAAMhE,IAAI,M,+BAIrD,OACE,yBACEmD,UAAWC,KAAKD,UAChBgF,QAAS/E,KAAK0E,YACdzE,KAAK,aACL,yBAAKF,UAAWO,KAAOqF,SACrB,kBAAC,GAAD,CACE/I,GAAIoD,KAAKY,MAAMhE,GACfgS,SAAU5O,KAAKY,MAAMgO,WACtB5O,KAAKkC,UACLlC,KAAK0O,iB,gCAlDZ,MAAM,GAAN,OAAUpO,KAAO2F,UAAjB,YAA8B3F,KAAON,KAAKY,MAAMsT,U,gCAIhD,OACElU,KAAKY,MAAMsB,WACX,yBAAKnC,UAAWO,KAAO4B,WACrB,kBAAC,GAAD,CACEgR,MAAM,UACNjO,KAAMkM,IACNlR,KAAK,iB,mCAMX,OACED,KAAKY,MAAM8N,cACX,yBACE3O,UAAWO,KAAOoO,aAClB3J,QAAS/E,KAAK+T,yBACd,kBAAC,GAAD,CACEb,MAAM,SACNjO,KAAMkP,IACNlU,KAAK,sB,GA3CoBe,a,qBCM7BoT,G,kDAqBJ,WAAaxT,GAAsB,IAAD,8BAChC,cAAMA,IAnBEyT,iBAkBwB,IAhBxB5F,kBAgBwB,IAdxBD,oBAcwB,IAZxBkD,kBAYwB,IAVxB1D,iBAUwB,IARxBvJ,kBAQwB,IANxBiG,wBAMwB,IAJxB4J,yBAIwB,IAFxBC,oBAEwB,EAEhC,EAAKF,YAAc,IAAIpI,GACvB,EAAKwC,aAAe,IAAIzB,GACxB,EAAKwB,eAAiB,IAAIT,GAC1B,EAAK2D,aAAe,IAAInD,GACxB,EAAKP,YAAc,IAAIF,GACvB,EAAKrJ,aAAe,IAAIb,EACxB,EAAK8G,mBAAqB,IAAIJ,GAC9B,EAAKgK,oBAAsB,IAAIpF,GAC/B,EAAKqF,eAAiB,IAAI/E,GAC1B,EAAK+E,eAAerT,KAAK,EAAKN,MAAMyF,SACpC,EAAK0L,eAAiB,EAAKA,eAAepN,KAApB,gBAZU,E,kDAmC3BpC,EAAmBiS,GACxB,OACE,kBAAC,IAAD,CAAQ3D,KAAK,IAAI5Q,KAAK,QAAQ8J,IAAKyK,GACjC,kBAAC,GAAD,CACE5X,GAAI2F,EAAM3F,GACV6X,OAAQlS,EAAMgK,OACd2H,MAAM,SACNhS,UAAWK,EAAML,UACjBwM,aAAcnM,EAAMmM,aACpBrM,OAAQE,EAAMF,OACduM,SAAUrM,EAAMqM,c,sCAUP5F,GACf0L,GAAOxS,UAAU2N,UAAU7G,GAAW,SAAApH,GACpCkC,EAAMG,SAAS7C,EAAQa,kBAAkBL,GAAc,IACvDuC,YAAW,WACTL,EAAMG,SAAS7C,EAAQa,kBAAkBL,GAAc,MACtDwS,EAAQO,uB,yCAIK3L,GAAoB,IAAD,OACrC0L,GAAOhG,aAAamB,UAAU7G,GAAW,SAAApH,GACxB,EAAK4M,eAAeqF,cAAcjS,GACrC,EAAKyS,YAAYO,aACxB,EAAKlD,aAAalP,UAAUZ,Q,wCAIlBoH,GACjB0L,GAAOxS,UAAU4N,YAAY9G,GAC7B0L,GAAO1E,eAAeF,YAAY9G,GAClC0L,GAAOzE,iBAAiBH,YAAY9G,GACpC0L,GAAOhG,aAAaoB,YAAY9G,K,kCAGrBA,GACXhJ,KAAK0R,aAAamD,gBAClB7U,KAAKwO,eAAesG,eACpB9U,KAAK+U,kBAAkB/L,GACvBhJ,KAAKqU,YAAYO,aACjB5U,KAAKY,MAAMyF,QAAQ/C,KAAKnD,GAAOC,KAAKC,MACpCL,KAAKgO,YAAYgH,YACjBhV,KAAK0K,mBAAmBL,W,uCAGRrB,EAAmBsD,GAA4B,IAAD,OAC9DtM,KAAKqU,YAAYY,cAAa,WAC5BP,GAAOzE,iBAAiBF,QAAQ/G,EAAWsD,GAC3C,EAAK4I,YAAYlM,Q,uCAIHsD,EAA2BG,GAA2B,IAAD,OACrEzM,KAAK0R,aAAayD,YAAY7I,EAAmBG,GAAa,SAAA2I,GAC5D,EAAK1D,aAAapP,UAAU8S,Q,0CAIX5I,GAAwB,IAAD,OAC1CxM,KAAKqU,YAAYgB,UAAU7I,GAAM,SAACI,EAAoBD,GACpD,EAAK+E,aAAayD,YAAYvI,EAAoBD,GAAc,SAAA2I,GAC9D,EAAK5D,aAAapP,UAAUgT,W,wCAKftM,EAAmByD,GAA2B,IAAD,OAC9DzM,KAAKqU,YAAYkB,eAAc,SAAA/I,GAAS,IACxB5K,EAAiB4K,EAAvBK,KACR,EAAKwH,YAAYmB,WAAWhJ,EAAMC,GAClCiI,GAAO1E,eAAeD,QAAQ/G,EAAWpH,GACzC,EAAK0S,oBAAoBmB,WAAW7T,GACpC,EAAK8T,oBAAoBlJ,Q,kCAIhBxD,EAAmBsD,EAA2BG,GAA2B,IAAD,OAC/EzM,KAAKwO,eAAemH,gBAAgBrJ,IACtCtM,KAAKqU,YAAY7H,KAAKxD,EAAWyD,GAAa,SAAAD,GAC5C,EAAKkJ,oBAAoBlJ,Q,2CAKTxD,EAAmByD,GAA2B,IAAD,OACjEiI,GAAO1E,eAAeH,UAAU7G,GAAW,SAAApH,GACzC,EAAK0S,oBAAoBsB,aAAahU,GAClC,EAAK4M,eAAeqH,kBAAkBjU,IACxC,EAAKyS,YAAY7H,KAAK5K,EAAc6K,GAAa,SAAAD,GAC/C,EAAKkJ,oBAAoBlJ,W,6CAMTxD,GAAoB,IAAD,OACzC0L,GAAOzE,iBAAiBJ,UAAU7G,GAAW,SAAApH,GACrB,EAAK4M,eAAeH,cAAczM,GACrC,EAAKsT,YAAYlM,GAC/B,EAAK0I,aAAalP,UAAUZ,Q,sCAInB,IAAD,OACPyE,EAAYrG,KAAKY,MAAjByF,QACRrG,KAAKqU,YAAYyB,aAAazP,GAC9BrG,KAAKqU,YAAY0B,QAAO,SAAAzJ,GACtB,EAAKkC,eAAewH,MAAM1J,GAAmB,SAAAtD,GACvCA,GACF,EAAKiN,gBAAgBjN,GACrB,EAAKkN,mBAAmBlN,GACxB,EAAKmN,iBAAiBnN,EAAWsD,GACjC,EAAKmC,aAAa2H,UAAU/P,GAAS,SAAAoG,GACnC,EAAK4J,iBAAiB/J,EAAmBG,GACzC,EAAK6J,kBAAkBtN,EAAWyD,GAClC,EAAK8J,YAAYvN,EAAWsD,EAAmBG,GAC/C,EAAK+J,qBAAqBxN,EAAWyD,GACrC,EAAKgK,uBAAuBzN,OAEzB,EAAKkM,YAAYlM,W,uCAKX,IAAD,OAChBhJ,KAAKyE,aAAanB,KAAK,gCAAgC,WACrD,EAAK+Q,YAAYO,kB,0CAKnB5U,KAAK0W,kB,6CAGkB,IACX1N,EAAchJ,KAAKY,MAAvBhE,GACRoD,KAAKkV,YAAYlM,K,+BAIjB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAYjB,YAAU,GACpB,kBAAC,GAAD,CAAMrC,MAAM,EAAOO,UAAU,SAC3B,yBAAKlG,UAAWO,KAAOqB,SACrB,kBAAC,IAAD,KACE,kBAAC,IAAD,KACG3B,KAAK2W,eACN,kBAAC,GAAD,CAAepU,MAAOvC,KAAKmD,eAE7B,kBAAC,IAAD,KACGnD,KAAK6B,SAGV,kBAAC,GAAD,CAAS6Q,UAAW1S,KAAK+R,uB,kCAtLnC,OAAO7O,eAAKlD,KAAKY,MAAMiB,OAAQ,Y,qCAI/B,OACE7B,KAAKmD,aACL,kBAAC,IAAD,CAAQ0N,KAAK,KAAK5Q,KAAK,eACrB,kBAAC,GAAD,CACErD,GAAIoD,KAAKmD,YAAYvG,GACrB6X,OAAQzU,KAAKmD,YAAYoJ,OACzB2H,MAAM,OACNhS,UAAWlC,KAAKmD,YAAYjB,UAC5BwM,aAAc1O,KAAKmD,YAAYuL,aAC/BrM,OAAQrC,KAAKmD,YAAYd,OACzBuM,SAAU5O,KAAKmD,YAAYyL,c,6BAoBpB,IAAD,OAEZ,OADegI,iBAAO5W,KAAKY,MAAMiB,OAAQ,CAAEQ,QAAQ,IACrCrG,KAAI,SAACuG,EAAmBiS,GAApB,OAAsC,EAAKjS,MAAMA,EAAOiS,U,GAzExDxT,aAAhBoT,GACaO,iBAA2B,IAmO/BvN,mBAAW7B,YAAQ9D,EAAWL,EAAnBmE,CAA4B6O,KCrPjCyC,G,WAGnB,aAAgB,yBAFNxL,oBAEK,EACbrL,KAAKqL,eAAiB,IAAIZ,G,wDAGfqM,EAAwBzQ,GACnCrG,KAAKqL,eAAeJ,KAAK,SAAU6L,GAAO,SAAA7Y,GACpCA,GAAUoI,EAAQ/C,KAAKnD,GAAO4W,YAAY1W,W,sCAIjCgG,GACfrG,KAAKqL,eAAelN,IAAI,UAAU,SAAA2Y,GAC5BA,GAAOzQ,EAAQ/C,KAAKnD,GAAO4W,YAAY1W,a,KCT3C2W,G,kDAGJ,WAAapW,GAAa,IAAD,8BACvB,cAAMA,IAHEgL,aAEe,EAEvB,EAAKA,QAAU,IAAIC,GACnB,EAAKzM,MAAQ,CACX0M,SAAU,GACVC,SAAU,GACVkL,gBAAiB,IAEnB,EAAKhO,kBAAoB,EAAKA,kBAAkBtE,KAAvB,gBACzB,EAAKuS,kBAAoB,EAAKA,kBAAkBvS,KAAvB,gBACzB,EAAKwS,iBAVkB,E,8DAaNjO,GACjB,IAAMC,EAASD,EAAMC,OACbR,EAAgBQ,EAAhBR,MACR,OADwBQ,EAATT,MAEb,IAAK,WACH1I,KAAKoJ,SAAS,CAAE0C,SAAUnD,IAC1B,MACF,IAAK,WACH3I,KAAKoJ,SAAS,CAAE2C,SAAUpD,IAC1B,MACF,IAAK,kBACH3I,KAAKoJ,SAAS,CAAE6N,gBAAiBtO,O,0CAKjB,IAAD,EAC6B3I,KAAKZ,MAC/C0X,EAAQ,CAAEhL,SAFG,EACXA,SACkBC,SAFP,EACDA,SACkBkL,gBAFjB,EACSA,iBAE5BjX,KAAK4L,QAAQwL,YAAYN,EAAO9W,KAAKY,MAAMyF,W,uCAI3CrG,KAAK4L,QAAQyL,gBAAgBrX,KAAKY,MAAMyF,W,+BAIxC,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAY0B,YAAU,GACpB,kBAAC,GAAD,CAAMrC,MAAM,EAAOO,UAAU,SAC3B,kBAAC,WAAD,KACE,kBAAC,GAAD,CACEyC,KAAK,WACLvH,KAAK,OACLwH,MAAO3I,KAAKZ,MAAM0M,SAClBlD,YAAY,WACZE,aAAc9I,KAAKiJ,oBACrB,kBAAC,GAAD,CACEP,KAAK,WACLvH,KAAK,WACLwH,MAAO3I,KAAKZ,MAAM2M,SAClBnD,YAAY,WACZE,aAAc9I,KAAKiJ,oBACrB,kBAAC,GAAD,CACEP,KAAK,kBACLvH,KAAK,WACLwH,MAAO3I,KAAKZ,MAAM6X,gBAClBrO,YAAY,mBACZE,aAAc9I,KAAKiJ,oBACrB,kBAAC,GAAD,CACExB,KAAK,eACL/C,YAAa1E,KAAKkX,4B,GApEZlW,aA6EPoG,eAAW4P,ICnFLM,G,WAKnB,aAAgB,yBAJNjM,oBAIK,OAFLX,wBAEK,EACb1K,KAAKqL,eAAiB,IAAIZ,GAC1BzK,KAAK0K,mBAAqB,IAAIJ,G,mDAGxBgB,EAAgCjF,GAAmB,IAAD,OACxDrG,KAAKqL,eAAeJ,KAAK,gBAAiBK,EAA1C,uCAAuD,WAAMrN,GAAN,eAAAsN,EAAA,0DACjDtN,EADiD,uBAE3CuM,EAAgBvM,EAAhBuM,YAF2C,SAG7C,EAAKE,mBAAmBP,IAAIK,GAHiB,OAInDnE,EAAQ/C,KAAKnD,GAAOuC,MAAMrC,MAJyB,2CAAvD,kCAAAL,KAAA,oB,KCNEuX,G,kDAGJ,WAAa3W,GAAa,IAAD,8BACvB,cAAMA,IAHEgL,aAEe,EAEvB,EAAKA,QAAU,IAAIC,GACnB,EAAKzM,MAAQ,CACX0M,SAAU,GACVC,SAAU,IAEZ,EAAK9C,kBAAoB,EAAKA,kBAAkBtE,KAAvB,gBACzB,EAAK6S,kBAAoB,EAAKA,kBAAkB7S,KAAvB,gBARF,E,8DAWNuE,GACjB,IAAMC,EAASD,EAAMC,OACbR,EAAgBQ,EAAhBR,MACR,OADwBQ,EAATT,MAEb,IAAK,WACH1I,KAAKoJ,SAAS,CAAE0C,SAAUnD,IAC1B,MACF,IAAK,WACH3I,KAAKoJ,SAAS,CAAE2C,SAAUpD,O,0CAKV,IAAD,EACY3I,KAAKZ,MAC9BkM,EAAc,CAAEQ,SAFH,EACXA,SACwBC,SAFb,EACDA,UAElB/L,KAAK4L,QAAQI,OAAOV,EAAatL,KAAKY,MAAMyF,W,+BAI5C,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAY0B,YAAU,GACpB,kBAAC,GAAD,CAAMrC,MAAM,EAAOO,UAAU,SAC3B,kBAAC,WAAD,KACE,kBAAC,GAAD,CACEyC,KAAK,WACLvH,KAAK,OACLwH,MAAO3I,KAAKZ,MAAM0M,SAClBlD,YAAY,WACZE,aAAc9I,KAAKiJ,oBACrB,kBAAC,GAAD,CACEP,KAAK,WACLvH,KAAK,WACLwH,MAAO3I,KAAKZ,MAAM2M,SAClBnD,YAAY,WACZE,aAAc9I,KAAKiJ,oBACrB,kBAAC,GAAD,CACExB,KAAK,UACL/C,YAAa1E,KAAKwX,4B,GArDRxW,aA8DXoG,eAAWmQ,ICzELE,G,WAGnB,aAAgB,yBAFNpM,oBAEK,EACbrL,KAAKqL,eAAiB,IAAIZ,G,wDAI1BzK,KAAKqL,eAAelN,IAAI,UAAU,SAAAuE,GAC5BA,GAAOoB,EAAMG,SAAS7C,EAAqBsB,W,KCThCgV,G,WAGnB,aAAgB,yBAFNrM,oBAEK,EACbrL,KAAKqL,eAAiB,IAAIZ,G,iDAGtBpE,GACJrG,KAAKqL,eAAelN,IAAI,eAAe,SAAAF,GAChCA,GAAUoI,EAAQ/C,KAAKnD,GAAO4W,YAAY1W,a,yBCPhCsX,G,uKAEjB,OACE,kBAAC,IAAD,KACE,yBAAK5X,UAAWO,KAAOqC,MACrB,yBAAK5C,UAAWO,KAAOsX,MACrB,kBAAC,GAAD,CACExH,MAAK,UAAKyH,iBAAO,GAAI,IAAhB,KACLxH,OAAO,OACPE,aAAa,QACf,kBAAC,GAAD,CACEH,MAAK,UAAKyH,iBAAO,GAAI,IAAhB,KACLxH,OAAO,OACPE,aAAa,SACf,kBAAC,GAAD,CACEH,MAAM,MACNC,OAAO,OACPE,aAAa,QACf,kBAAC,GAAD,CACEH,MAAM,MACNC,OAAO,UAEX,yBAAKtQ,UAAWO,KAAOc,SACrB,kBAAC,GAAD,CACEgP,MAAM,OACNC,OAAO,OACP9I,MAAM,iB,GA1BsBvG,aCIrB8W,G,WAGnB,aAAgB,yBAFNzM,oBAEK,EACbrL,KAAKqL,eAAiB,IAAIZ,G,uDAGhB9H,EAAsByD,GAChCpG,KAAKqL,eAAeJ,KAAK,QAAStI,GAAM,SAAA1E,GAClCA,IACF6F,EAAMG,SAAS8T,EAAsB9Z,IACrCmI,Y,KCPa4R,G,kDAKnB,WAAapX,GAAa,IAAD,8BACvB,cAAMA,IALEgL,aAIe,IAFfnH,kBAEe,EAEvB,EAAKrF,MAAQ,CACXsJ,KAAM,GACNqD,SAAU,GACVD,SAAU,IAEZ,EAAKF,QAAU,IAAIC,GACnB,EAAKpH,aAAe,IAAIb,EACxB,EAAKqF,kBAAoB,EAAKA,kBAAkBtE,KAAvB,gBACzB,EAAKsT,mBAAqB,EAAKA,mBAAmBtT,KAAxB,gBAVH,E,8DAaNuE,GACjB,IAAMC,EAASD,EAAMC,OACbR,EAAgBQ,EAAhBR,MACR,OADwBQ,EAATT,MAEb,IAAK,OACH1I,KAAKoJ,SAAS,CAAEV,KAAMC,IACtB,MACF,IAAK,WACH3I,KAAKoJ,SAAS,CAAE2C,SAAUpD,IAC1B,MACF,IAAK,WACH3I,KAAKoJ,SAAS,CAAE0C,SAAUnD,O,wCAM9B,IAAMuP,EAAM,kBAAcxa,eACpBoO,EAAW9L,KAAKZ,MAAM0M,SACtBC,EAAW/L,KAAKZ,MAAM2M,SACtBT,EAAW,aAAStL,KAAKZ,MAAMsJ,KAApB,2CAA2DwP,EAA3D,8DAAuHpM,EAAvH,uBAA8IC,GAC/JuG,KAAgBhH,GAChBtL,KAAKyE,aAAanB,KAAK,yB,kCAIvBtD,KAAKoJ,SAAS,CACZV,KAAM,GACNqD,SAAU,GACVD,SAAU,O,2CAIS,IAAD,SACiB9L,KAAKZ,MACpCkM,EAAc,CAAE5C,KAFF,EACZA,KACoBoD,SAFR,EACNA,SACwBC,SAFlB,EACIA,UAExB/L,KAAK4L,QAAQuM,WAAW7M,GAAa,WACnC,EAAK8M,kBACL,EAAKC,iB,+BAKP,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACE3P,KAAK,OACLvH,KAAK,OACLwH,MAAO3I,KAAKZ,MAAMsJ,KAClBE,YAAY,OACZE,aAAc9I,KAAKiJ,oBACrB,kBAAC,GAAD,CACEP,KAAK,WACLvH,KAAK,WACLwH,MAAO3I,KAAKZ,MAAM2M,SAClBnD,YAAY,WACZE,aAAc9I,KAAKiJ,qBAEvB,kBAAC,IAAD,KACE,kBAAC,GAAD,CACEP,KAAK,WACLvH,KAAK,OACLwH,MAAO3I,KAAKZ,MAAM0M,SAClBlD,YAAY,WACZE,aAAc9I,KAAKiJ,oBACrB,kBAAC,GAAD,CACExB,KAAK,WACL/C,YAAa1E,KAAKiY,4B,GAvFQjX,a,qBCNnBsX,G,WAGnB,aAAgB,yBAFNjN,oBAEK,EACbrL,KAAKqL,eAAiB,IAAIZ,G,mDAGpB9H,GACN3C,KAAKqL,eAAeF,OAAO,QAASxI,GAAM,SAAA1E,GACpCA,GACF6F,EAAMG,SAAS8T,EAAsBpV,EAAK/F,Y,yBCD7B2b,G,kDAYnB,WAAa3X,GAAmB,IAAD,8BAC7B,cAAMA,IAZEgL,aAWqB,IATrBnH,kBASqB,EAE7B,EAAKmH,QAAU,IAAIC,GACnB,EAAKpH,aAAe,IAAIb,EACxB,EAAK4U,kBAAoB,EAAKA,kBAAkB7T,KAAvB,gBAJI,E,gEAaT,IAAD,OACnB3E,KAAKyE,aAAanB,KAAK,oCAAoC,WACzD,IAAMX,EAAO,CAAE/F,GAAI,EAAKgE,MAAMhE,IAC9B,EAAKgP,QAAQT,OAAOxI,Q,+BAKtB,OACE,kBAAC,IAAD,KACE,yBAAK5C,UAAWO,KAAOqC,MACrB,yBAAK5C,UAAWO,KAAOsX,MACrB,wBAAI7X,UAAWO,KAAOoI,MAAO1I,KAAKY,MAAM8H,MACxC,yBAAK3I,UAAWO,KAAOwL,UAAW9L,KAAKY,MAAMkL,UAC7C,yBAAK/L,UAAWO,KAAOmY,aACrB,wBAAI1Y,UAAWO,KAAOoY,SAAtB,gBACA,yBAAK3Y,UAAWO,KAAOqY,MAAO3Y,KAAKyY,eAGvC,yBAAK1Y,UAAWO,KAAOc,SACrB,yBAAK2D,QAAS/E,KAAKwY,mBACjB,kBAAC,GAAD,CACEtF,MAAM,SACNjO,KAAMkP,IACNlU,KAAK,iB,kCA7BjB,OAAOD,KAAKY,MAAMgY,cACdC,KAAO7Y,KAAKY,MAAMgY,eAAeE,OAAO,OACxC,Q,GAtB0B9X,a,oBCT5B+X,G,kDAGJ,WAAanY,GAAwB,IAAD,8BAClC,cAAMA,IAHE8J,wBAE0B,EAElC,EAAKA,mBAAqB,IAAIJ,GAC9B,EAAK0O,mBAAqB,EAAKA,mBAAmBrU,KAAxB,gBAHQ,E,2LAO5B3E,KAAK0K,mBAAmBL,S,OAC9BrK,KAAKY,MAAMyF,QAAQ/C,KAAKnD,GAAO4W,YAAY1W,M,qIAI3C,OACE,yBAAKN,UAAWO,KAAO2Y,WACrB,yBAAKlZ,UAAWO,KAAO4Y,OACrB,kBAAC,IAAD,CACEhZ,GAAIC,GAAOuC,MAAMrC,KACjB8Y,gBAAiB7Y,KAAO+B,QAF1B,SAKA,kBAAC,IAAD,CACEnC,GAAIC,GAAOiZ,YAAY/Y,KACvB8Y,gBAAiB7Y,KAAO+B,QAF1B,kBAKA,kBAAC,IAAD,CACEnC,GAAG,IACH6E,QAAS/E,KAAKgZ,oBAFhB,kB,GA5BchY,aAuCToG,eAAW2R,IC/BpBM,G,kDAKJ,WAAazY,GAAoB,IAAD,8BAC9B,cAAMA,IALEgL,aAIsB,IAFtB0N,qBAEsB,EAE9B,EAAK1N,QAAU,IAAIC,GACnB,EAAKyN,gBAAkB,IAAI5B,GAC3B,EAAK4B,gBAAgBpY,KAAK,EAAKN,MAAMyF,SAJP,E,yDAoBlB1D,GACZ,OACE,kBAAC,IAAD,CACEkO,KAAK,KACL0I,OAAO,IACPxP,IAAKpH,GACL,kBAAC,GAAD,S,2BAKAA,GACJ,OACE,kBAAC,IAAD,CACEkO,KAAK,KACL0I,OAAO,IACPxP,IAAKpH,EAAKmJ,UACV,kBAAC,GAAD,CACElP,GAAI+F,EAAK/F,GACT8L,KAAM/F,EAAK+F,KACXoD,SAAUnJ,EAAKmJ,SACf8M,cAAejW,EAAKiW,mB,0CAM1B5Y,KAAK4L,QAAQ4N,c,+BAIb,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAM9T,MAAM,EAAOO,UAAU,SAC3B,kBAAC,WAAD,KACE,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,KACGjG,KAAK0C,MACL1C,KAAKyZ,sB,4BAtDR,IAAD,OAEX,OADkBzZ,KAAKY,MAAf8B,MACK1G,KAAI,SAAA2G,GAAI,OAAI,EAAKA,KAAKA,Q,oCAGf,IAAD,OACXD,EAAU1C,KAAKY,MAAf8B,MACR,GAAIgX,kBAAQhX,GAEV,OADsBiX,gBAAM,GACP3d,KAAI,SAAA2G,GAAI,OAAI,EAAKiX,aAAajX,U,GArBrC3B,aA6ELoG,eAAW7B,ahDzCnB,SAAoBnG,GACzB,OAAOsC,oBAAUtC,EAAMsD,SgDwCoB,KAAnB6C,CAAyB8T,K,qBC1F9BQ,G,WAKnB,aAAgB,yBAJNxO,oBAIK,OAFL5G,kBAEK,EACbzE,KAAKqL,eAAiB,IAAIZ,GAC1BzK,KAAKyE,aAAe,IAAIb,E,iDAGpBwC,GACJpG,KAAKqL,eAAelN,IAAI,YAAY,SAAAF,GAC9BA,GAAUmI,EAASnI,EAAS6b,W,6BAI5BA,GAAe,IAAD,OACpB9Z,KAAKqL,eAAeJ,KAAK,WAAY,CAAE6O,SAAQ,SAAA7b,GACzCA,GAAU,EAAKwG,aAAanB,KAAK,2B,yBCJrCyW,G,kDAKJ,WAAanZ,GAA0B,IAAD,8BACpC,cAAMA,IALEgL,aAI4B,IAF5B0N,qBAE4B,EAEpC,EAAK1N,QAAU,IAAIC,GACnB,EAAKyN,gBAAkB,IAAI5B,GAC3B,EAAK4B,gBAAgBpY,KAAK,EAAKN,MAAMyF,SACrC,EAAKjH,MAAQ,CACX4I,QAAS,IAEX,EAAKgS,gBAAkB,EAAKA,gBAAgBrV,KAArB,gBARa,E,uDAW1BsV,GAAe,IAAD,OACxBja,KAAK4L,QAAQsO,MAAK,SAAClS,GACjB,EAAKoB,SAAS,CAAEpB,YAChB,IAAMmS,EAAQF,EAAMG,UAAUC,QAAQrS,GACtCiS,EAAMK,YAAYH,EAAO,e,0CAIRF,GAAe,IAAD,OACjCA,EAAM7N,GAAG,eAAe,WACtB,IAAMpE,EAAUiS,EAAMM,KAAKC,UAC3B,EAAKpR,SAAS,CAAEpB,iB,uCAIF5B,GAiBhBA,EATc,IAAIqU,KAAM,gBAAiB,CACvCC,QAAS,CACPC,QATiB,CACnB,CAAC,OAAQ,SAAU,aACnB,CAAC,CAAEC,OAAQ,GAAK,CAAEA,OAAQ,IAC1B,CAAC,CAAEC,KAAM,WAAa,CAAEA,KAAM,WAC9B,CAAC,CAAEC,MAAO,KACV,CAAC,SAKCV,UAAW,CACTW,aAAa,IAGjBC,MAAO,Y,wCAMThb,KAAK4L,QAAQqP,OAAOjb,KAAKZ,MAAM4I,W,0CAGX,IAAD,OACnBhI,KAAKkb,kBAAiB,SAAAjB,GACpB,EAAKkB,WAAWlB,GAChB,EAAKmB,oBAAoBnB,Q,+BAK3B,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAYlS,YAAU,GACpB,kBAAC,GAAD,CAAMrC,MAAM,EAAOO,UAAU,SAC3B,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,MACA,yBAAKlG,UAAWO,KAAO8Y,aACrB,yBAAKxc,GAAG,iBACR,yBAAKmD,UAAWO,KAAO+a,MACrB,kBAAC,GAAD,CAAQ5T,KAAK,OAAO/C,YAAa1E,KAAKga,8B,GA1ElChZ,aAuFXoG,eAAW2S,ICtGLuB,G,WAGnB,aAAgB,yBAFNjQ,oBAEK,EACbrL,KAAKqL,eAAiB,IAAIZ,G,iDAGtBrE,GACJpG,KAAKqL,eAAelN,IAAI,YAAY,SAAAF,GAC9BA,GAAUmI,EAASnI,EAAS6b,a,KCFjByB,G,wKAKRC,GACT,OACE7B,gBAAM6B,GAAOxf,KAAI,SAAAyf,GAAI,OACnB,kBAAC,GAAD,CACErL,MAAK,UAAKyH,iBAAO,GAAI,KAAhB,KACLxH,OAAO,OACPE,aAAa,MACbxG,IAAK0R,S,+BAMX,OAASzb,KAAKY,MAAMoH,SAClB,kBAAC,WAAD,KACE,6BAAMhI,KAAK0b,UAAU,IACrB,kBAAC,GAAD,CACEtL,MAAK,UAAKyH,iBAAO,IAAK,KAAjB,MACLxH,OAAO,OACPE,aAAa,OACbD,UAAU,SACZ,6BAAMtQ,KAAK0b,UAAU,S,GA1BgB1a,a,oBCExB2a,G,kDAGnB,WAAa/a,GAAa,IAAD,8BACvB,cAAMA,IAHEgL,aAEe,EAEvB,EAAKA,QAAU,IAAI0P,GACnB,EAAKlc,MAAQ,CACX4I,QAAS,IAJY,E,yDAQV,IAAD,OACZhI,KAAK4L,QAAQsO,MAAK,SAAAJ,GAChB,EAAK1Q,SAAS,CAAEpB,QAAS8R,S,0CAK3B9Z,KAAK4b,e,+BAIL,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAY7T,YAAU,GACpB,kBAAC,GAAD,CAAMrC,MAAM,EAAOO,UAAU,SAC3B,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,yBAAKlG,UAAWO,KAAO0H,SACrB,8CACA,yBACEjI,UAAWO,KAAOqF,QAClBuC,wBAAyB,CAAEG,OAAQrI,KAAKZ,MAAM4I,WAChD,kBAAC,GAAD,CAAiBA,QAAShI,KAAKZ,MAAM4I,qB,GAlCpBhH,a,oBCD/B6a,G,kDACJ,WAAajb,GAAuB,IAAD,8BACjC,cAAMA,IACDkb,iBAAmB,EAAKA,iBAAiBnX,KAAtB,gBAFS,E,+DAMjC3E,KAAKY,MAAMyF,QAAQ/C,KAAKnD,GAAOC,KAAKC,Q,+BAIpC,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAY0H,YAAU,GACpB,kBAAC,GAAD,CAAMrC,MAAM,EAAOO,UAAU,SAC3B,yBAAKlG,UAAWO,KAAOyb,UACrB,wBAAIhc,UAAWO,KAAOoY,SAAtB,OACA,uBAAG3Y,UAAWO,KAAO0b,aAArB,kBACA,kBAAC,GAAD,CACEvU,KAAK,iBACL/C,YAAa1E,KAAK8b,2B,GApBX9a,aCER,IACbib,QAAS,CAAE5b,KAAM,IAAK6b,UAAW/V,IACjC/F,KAAM,CAAEC,KAAM,QAAS6b,UAAWxU,IAClCI,YAAa,CAAEzH,KAAM,QAAS6b,UAAWnT,IACzClB,aAAc,CAAExH,KAAM,SAAU6b,UAAWvQ,IAC3ChK,QAAS,CAAEtB,KAAM,WAAY6b,UAAW9H,IACxC+H,QAAS,CAAE9b,KAAM,WAAY6b,UAAWlF,IACxCD,YAAa,CAAE1W,KAAM,SAAU6b,UAAW3E,IAC1C7U,MAAO,CAAErC,KAAM,SAAU6b,UAAW7C,IACpCD,YAAa,CAAE/Y,KAAM,gBAAiB6b,UAAWnC,IACjD/R,QAAS,CAAE3H,KAAM,WAAY6b,UAAWP,IACxCI,SAAU,CAAE1b,KAAM,IAAK6b,UDgBV9U,YAAWyU,MErCLO,G,WAKnB,aAAgB,yBAJN7R,oBAIK,OAFL8R,mBAA6B,qBAGrCrc,KAAKuK,eAAiB,IAAIZ,G,mMAIO3J,KAAKuK,eACnCpM,IAAI6B,KAAKqc,oB,cADNA,E,2BAECA,GAAqBpf,QAAQqf,KAAK9S,MAAM6S,K,oJAI/Crc,KAAKuK,eAAeJ,IAAInK,KAAKqc,mBAAoBC,KAAKC,WAAU,Q,eCX/CC,G,uKAMjB,OACE,kBAAC,IAAD,CAAe1Y,MAAOA,GACpB,kBAAC,KAAD,KACE,kBAAC,IAAD,KACG9D,KAAKY,MAAMgF,gB,GAVc5E,aCGjBuF,I,yDAKnB,WAAa3F,GAAwB,IAAD,8BAClC,cAAMA,IALE6D,kBAI0B,IAF1BuF,kBAE0B,EAElC,EAAKvF,aAAe,IAAIb,EACxB,EAAKoG,aAAe,IAAIyS,GACxB,EAAKC,cACLjN,GAAclK,UALoB,E,0DASlCmX,YAAY,CACVC,KAAM,S,8KAKwB3c,KAAKgK,aAAa4S,uB,mEAElD1f,OAAOW,iBAAiB,uBAAuB,SAAAqL,GAC7CA,EAAM2T,iBACN,EAAK7S,aAAa8S,wBAClB,EAAKrY,aAAanB,KAAK,eAAvB,sBAAuC,4BAAAiI,EAAA,6DACjCwR,EAAsB7T,GACX8T,SAFsB,SAGVD,EAAeE,WAHL,OAIR,aAJQ,OAIpBC,SACf,EAAKzY,aAAaH,OAEpByY,EAAiB,KAPoB,+C,gJAazC/c,KAAKmd,qB,+BAIL,OACE,kBAAC,IAAD,KACE,kBAAC,GAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACE9c,KAAMF,GAAO8b,QAAQ5b,KACrB6b,UAAW/b,GAAO8b,QAAQC,UAC1BkB,OAAO,IACT,kBAAC,IAAD,CACE/c,KAAMF,GAAOC,KAAKC,KAClB6b,UAAW/b,GAAOC,KAAK8b,UACvBkB,OAAO,IACT,kBAAC,IAAD,CACE/c,KAAMF,GAAO2H,YAAYzH,KACzB6b,UAAW/b,GAAO2H,YAAYoU,UAC9BkB,OAAO,IACT,kBAAC,IAAD,CACE/c,KAAMF,GAAO0H,aAAaxH,KAC1B6b,UAAW/b,GAAO0H,aAAaqU,UAC/BkB,OAAO,IACT,kBAAC,IAAD,CACE/c,KAAMF,GAAOwB,QAAQtB,KACrB6b,UAAW/b,GAAOwB,QAAQua,UAC1BkB,OAAO,IACT,kBAAC,IAAD,CACE/c,KAAMF,GAAOgc,QAAQ9b,KACrB6b,UAAW/b,GAAOgc,QAAQD,UAC1BkB,OAAO,IACT,kBAAC,IAAD,CACE/c,KAAMF,GAAO4W,YAAY1W,KACzB6b,UAAW/b,GAAO4W,YAAYmF,UAC9BkB,OAAO,IACT,kBAAC,IAAD,CACE/c,KAAMF,GAAOuC,MAAMrC,KACnB6b,UAAW/b,GAAOuC,MAAMwZ,UACxBkB,OAAO,IACT,kBAAC,IAAD,CACE/c,KAAMF,GAAO6H,QAAQ3H,KACrB6b,UAAW/b,GAAO6H,QAAQkU,UAC1BkB,OAAO,IACT,kBAAC,IAAD,CACE/c,KAAMF,GAAOiZ,YAAY/Y,KACzB6b,UAAW/b,GAAOiZ,YAAY8C,UAC9BkB,OAAO,IACT,kBAAC,IAAD,CACE/c,KAAMF,GAAO4b,SAAS1b,KACtB6b,UAAW/b,GAAO4b,SAASG,UAC3BkB,OAAO,W,GAzFYpc,cCLjCqc,IAASC,OACP,kBAAC,GAAD,MACAC,SAASC,eAAe,SAG1B/d,EAAqBge,kB,mBCTrB3hB,EAAOC,QAAU,CAAC,KAAO,mBAAmB,KAAO,mBAAmB,KAAO,mBAAmB,SAAW,uBAAuB,YAAc,0BAA0B,QAAU,sBAAsB,KAAO,mBAAmB,QAAU,wB,mBCA9OD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,OAAS,sBAAsB,eAAiB,8BAA8B,QAAU,uBAAuB,QAAU,uBAAuB,OAAS,sBAAsB,QAAU,yB,mBCAxOD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,OAAS,qBAAqB,KAAO,mBAAmB,QAAU,sBAAsB,OAAS,qBAAqB,WAAa,yBAAyB,KAAO,mBAAmB,MAAQ,oBAAoB,MAAQ,sB,mBCAtQD,EAAOC,QAAU,CAAC,UAAY,yBAAyB,OAAS,sBAAsB,KAAO,oBAAoB,QAAU,uBAAuB,UAAY,yBAAyB,aAAe,8B,mBCAtMD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,KAAO,oBAAoB,QAAU,uBAAuB,OAAS,wB,mBCApHD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,MAAQ,yBAAyB,OAAS,4B,mBCArGD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,OAAS,qBAAqB,UAAY,0B,mBCAtFD,EAAOC,QAAU,CAAC,cAAgB,qCAAqC,OAAS,8BAA8B,KAAO,8B,mBCArHD,EAAOC,QAAU,CAAC,KAAO,2BAA2B,KAAO,2BAA2B,QAAU,gC,mBCAhGD,EAAOC,QAAU,CAAC,SAAW,2BAA2B,QAAU,0BAA0B,YAAc,gC,mBCA1GD,EAAOC,QAAU,CAAC,SAAW,2BAA2B,cAAgB,gCAAgC,MAAQ,0B,mBCAhHD,EAAOC,QAAU,CAAC,cAAgB,qCAAqC,KAAO,8B,mBCA9ED,EAAOC,QAAU,CAAC,OAAS,uBAAuB,OAAS,yB,mBCA3DD,EAAOC,QAAU,CAAC,QAAU,yBAAyB,QAAU,2B,mBCA/DD,EAAOC,QAAU,CAAC,YAAc,iCAAiC,KAAO,4B,mBCAxED,EAAOC,QAAU,CAAC,QAAU,yBAAyB,QAAU,4B","file":"static/js/main.35cc0962.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2Lf63\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Input_input__3rPb3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"floatButton\":\"FloatButton_floatButton__19o4O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"video\":\"VideoNative_video__IavIr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"meeting\":\"Meeting_meeting__3fRJr\"};","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t204,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t205,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t206,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t207,\n\t\t18\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t208,\n\t\t19\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t209,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t210,\n\t\t20\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t211,\n\t\t21\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t212,\n\t\t22\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t213,\n\t\t23\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t214,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t215,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t216,\n\t\t24\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t217,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t218,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t219,\n\t\t25\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t220,\n\t\t26\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t221,\n\t\t27\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t222,\n\t\t28\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t223,\n\t\t29\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t224,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t225,\n\t\t15\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t226,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t227,\n\t\t30\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t228,\n\t\t31\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t229,\n\t\t32\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t230,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t231,\n\t\t17\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t232,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t233,\n\t\t33\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t234,\n\t\t34\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t235,\n\t\t35\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t236,\n\t\t36\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t237,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t238,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t239,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t240,\n\t\t37\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t241,\n\t\t16\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t242,\n\t\t38\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t243,\n\t\t39\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t244,\n\t\t40\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t245,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t246,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 152;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t250,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 154;\nmodule.exports = webpackAsyncContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 178;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n)\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register (config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    )\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config)\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          )\r\n        })\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config)\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nfunction registerValidSW (swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing\r\n        if (installingWorker == null) {\r\n          return\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              )\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration)\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.')\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error)\r\n    })\r\n}\r\n\r\nfunction checkValidServiceWorker (swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type')\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload()\r\n          })\r\n        })\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config)\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      )\r\n    })\r\n}\r\n\r\nexport function unregister () {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister()\r\n    })\r\n  }\r\n}\r\n","import { isPlatform } from '@ionic/react'\r\nimport { Platforms } from '@ionic/core'\r\nimport { some } from 'lodash'\r\nimport * as serviceWorker from '../serviceWorker'\r\n\r\nexport default class ServiceWorkerService {\r\n  private static ignorePlatforms: Platforms[] = ['cordova', 'electron']\r\n\r\n  static registerWorker (): void {\r\n    const isIgnoredPlatform = some(\r\n      ServiceWorkerService.ignorePlatforms,\r\n      (platform: Platforms) => isPlatform(platform)\r\n    )\r\n    if (!isIgnoredPlatform) serviceWorker.register()\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\nimport routes from '../../routes'\r\nimport styles from './Brand.module.scss'\r\n\r\ninterface BrandProps {\r\n  invert: boolean\r\n}\r\n\r\nexport default class Brand extends Component<BrandProps> {\r\n  static propTypes = {\r\n    invert: PropTypes.bool\r\n  }\r\n\r\n  get className () {\r\n    const invertClass = this.props.invert && styles.invert\r\n    return `${styles.brand} ${invertClass}`\r\n  }\r\n\r\n  get logo () {\r\n    const pathResolve = (logo: string) => `/assets/logo/${logo}`\r\n    return this.props.invert\r\n      ? pathResolve('logoInvert.svg')\r\n      : pathResolve('logo.svg')\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={this.className} role=\"brand\">\r\n        <Link to={routes.home.path}>\r\n          <img\r\n            className={styles.logo}\r\n            src={this.logo}\r\n            alt=\"Logo\"\r\n            role=\"logo\" />\r\n        </Link>\r\n        <div\r\n          className={styles.tagline}\r\n          role=\"tagline\">\r\n          {process.env.REACT_APP_TAGLINE}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { cloneDeep } from 'lodash'\r\n\r\nexport interface AuthState {\r\n  type: 'admin' | 'host' | null\r\n}\r\n\r\ninterface AppState {\r\n  auth: AuthState\r\n}\r\n\r\nconst app: AppState = {\r\n  auth: {\r\n    type: null\r\n  }\r\n}\r\n\r\nexport const actions = {\r\n  replaceAuth (auth: AuthState) {\r\n    return { type: 'REPLACE_APP_AUTH', auth }\r\n  }\r\n}\r\n\r\nexport function reducers (state = app, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_APP_AUTH':\r\n      app.auth = action.auth\r\n      return cloneDeep(app)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { app: AppState }) {\r\n  return cloneDeep(state.app)\r\n}\r\n","import { cloneDeep } from 'lodash'\r\n\r\nexport interface AlertState {\r\n  message: string\r\n  handleProceed: (() => void) | null\r\n  timeoutId: number\r\n}\r\n\r\nconst alert: AlertState = {\r\n  message: '',\r\n  handleProceed: null,\r\n  timeoutId: 0\r\n}\r\n\r\nexport const actions = {\r\n  replaceMessage (message: string) {\r\n    return { type: 'REPLACE_ALERT_MESSAGE', message }\r\n  },\r\n  replaceHandleProceed (handleProceed: (() => void) | null) {\r\n    return { type: 'REPLACE_ALERT_HANDLE_PROCEED', handleProceed }\r\n  },\r\n  replaceTimeoutId (timeoutId: number) {\r\n    return { type: 'REPLACE_ALERT_TIMEOUT_ID', timeoutId }\r\n  }\r\n}\r\n\r\nexport function reducers (state = alert, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_ALERT_MESSAGE':\r\n      alert.message = action.message\r\n      return cloneDeep(alert)\r\n    case 'REPLACE_ALERT_HANDLE_PROCEED':\r\n      alert.handleProceed = action.handleProceed\r\n      return cloneDeep(alert)\r\n    case 'REPLACE_ALERT_TIMEOUT_ID': {\r\n      alert.timeoutId = action.timeoutId\r\n      return cloneDeep(alert)\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { alert: AlertState }) {\r\n  return cloneDeep(state.alert)\r\n}\r\n","import { cloneDeep, find, reject, some } from 'lodash'\r\n\r\nexport interface VideoState {\r\n  id: string,\r\n  stream: MediaStream,\r\n  raiseHand: boolean,\r\n  memberRemove: boolean,\r\n  active: boolean,\r\n  renderId: string\r\n}\r\n\r\nexport interface MeetingState {\r\n  id: string,\r\n  connectionId: string,\r\n  videos: VideoState[]\r\n}\r\n\r\nconst meeting: MeetingState = {\r\n  id: '',\r\n  connectionId: '',\r\n  videos: []\r\n}\r\n\r\nexport const actions = {\r\n  replaceId (id: string) {\r\n    return { type: 'REPLACE_MEETING_ID', id }\r\n  },\r\n  replaceConnectionId (connectionId: string) {\r\n    return { type: 'REPLACE_MEETING_CONNECTION_ID', connectionId }\r\n  },\r\n  replaceVideos (videos: VideoState[]) {\r\n    return { type: 'REPLACE_MEETING_VIDEOS', videos }\r\n  },\r\n  setVideoRaiseHand (connectionId: string, raiseHand: boolean) {\r\n    const payload = { connectionId, raiseHand }\r\n    return { type: 'SET_MEETING_VIDEO_RAISE_HAND', payload }\r\n  },\r\n  setVideoActive (connectionId: string, active: boolean) {\r\n    const payload = { connectionId, active }\r\n    return { type: 'SET_MEETING_VIDEO_ACTIVE', payload }\r\n  },\r\n  pushVideo (video: VideoState) {\r\n    return { type: 'PUSH_MEETING_VIDEO', video }\r\n  },\r\n  pullVideo (connectionId: string) {\r\n    return { type: 'PULL_MEETING_VIDEO', connectionId }\r\n  },\r\n  reset () {\r\n    return { type: 'RESET_MEETING' }\r\n  }\r\n}\r\n\r\nexport function reducers (state = meeting, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_MEETING_ID':\r\n      meeting.id = action.id\r\n      return cloneDeep(meeting)\r\n    case 'REPLACE_MEETING_CONNECTION_ID':\r\n      meeting.connectionId = action.connectionId\r\n      return cloneDeep(meeting)\r\n    case 'REPLACE_MEETING_VIDEOS':\r\n      meeting.videos = action.videos\r\n      return cloneDeep(meeting)\r\n    case 'SET_MEETING_VIDEO_RAISE_HAND': {\r\n      const { connectionId, raiseHand } = action.payload\r\n      const video = find(meeting.videos, { id: connectionId })\r\n      if (video) { video.raiseHand = raiseHand }\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'SET_MEETING_VIDEO_ACTIVE': {\r\n      const { connectionId, active } = action.payload\r\n      const activeVideo = find(meeting.videos, { active })\r\n      const targetVideo = find(meeting.videos, { id: connectionId })\r\n      if (activeVideo) { activeVideo.active = !active }\r\n      if (targetVideo) { targetVideo.active = active }\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'PUSH_MEETING_VIDEO': {\r\n      const isExists = some(meeting.videos, { id: action.video.id })\r\n      if (!isExists) meeting.videos.push(action.video)\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'PULL_MEETING_VIDEO': {\r\n      const { connectionId: id } = action\r\n      const isExists = some(meeting.videos, { id })\r\n      if (isExists) {\r\n        meeting.videos = reject(meeting.videos, { id })\r\n      }\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'RESET_MEETING': {\r\n      meeting.id = ''\r\n      meeting.connectionId = ''\r\n      meeting.videos = []\r\n      return cloneDeep(meeting)\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { meeting: MeetingState }) {\r\n  return cloneDeep(state.meeting)\r\n}\r\n","import { cloneDeep, reject, some } from 'lodash'\r\n\r\nexport interface HostState {\r\n  id: number\r\n  name: string\r\n  username: string\r\n  accessToken: string,\r\n  lastMeetingAt: Date,\r\n  password: string\r\n}\r\n\r\nexport interface HostsState {\r\n  hosts: HostState[]\r\n}\r\n\r\nconst hosts: HostsState = {\r\n  hosts: []\r\n}\r\n\r\nexport const actions = {\r\n  replaceHosts (hosts: HostState[]) {\r\n    return { type: 'REPLACE_HOSTS_HOSTS', hosts }\r\n  },\r\n  pushHost (host: HostState) {\r\n    return { type: 'PUSH_HOSTS_HOST', host }\r\n  },\r\n  pullHost (id: number) {\r\n    return { type: 'PULL_HOSTS_HOST', id }\r\n  }\r\n}\r\n\r\nexport function reducers (state = hosts, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_HOSTS_HOSTS':\r\n      hosts.hosts = action.hosts\r\n      return cloneDeep(hosts)\r\n    case 'PUSH_HOSTS_HOST':\r\n      hosts.hosts.unshift(action.host)\r\n      return cloneDeep(hosts)\r\n    case 'PULL_HOSTS_HOST': {\r\n      const id = action.id\r\n      const isExists = some(hosts.hosts, { id })\r\n      if (isExists) {\r\n        hosts.hosts = reject(hosts.hosts, { id })\r\n      }\r\n      return cloneDeep(hosts)\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { hosts: HostsState }) {\r\n  return cloneDeep(state.hosts)\r\n}\r\n","import { cloneDeep } from 'lodash'\r\n\r\nexport interface ActionsToggleState {\r\n  expanded: boolean\r\n}\r\n\r\nconst actionsToggle: ActionsToggleState = {\r\n  expanded: true\r\n}\r\n\r\nexport const actions = {\r\n  replaceExpanded (expanded: boolean) {\r\n    return { type: 'REPLACE_ACTIONS_TOGGLE_EXPANDED', expanded }\r\n  }\r\n}\r\n\r\nexport function reducers (state = actionsToggle, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_ACTIONS_TOGGLE_EXPANDED':\r\n      actionsToggle.expanded = action.expanded\r\n      return cloneDeep(actionsToggle)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { actionsToggle: ActionsToggleState }) {\r\n  return cloneDeep(state.actionsToggle)\r\n}\r\n","import { applyMiddleware, combineReducers, createStore } from 'redux'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\n\r\nimport { reducers as app } from './components/App/App.state'\r\nimport { reducers as alert } from './components/Alert/Alert.state'\r\nimport { reducers as meeting } from './pages/Meeting/Meeting.state'\r\nimport { reducers as hosts } from './pages/Hosts/Hosts.state'\r\nimport { reducers as actionsToggle } from './components/ActionsToggle/ActionsToggle.state'\r\n\r\nconst reducers = combineReducers({\r\n  app,\r\n  alert,\r\n  meeting,\r\n  hosts,\r\n  actionsToggle\r\n})\r\n\r\nexport default createStore(reducers, composeWithDevTools(applyMiddleware()))\r\n","import store from '../store'\r\nimport {\r\n  actions as alertActions,\r\n  selectors as alertSelectors\r\n} from '../components/Alert/Alert.state'\r\n\r\nexport default class AlertService {\r\n  protected static timeout: number = 5000\r\n\r\n  protected clearAutoClose (): void {\r\n    const { timeoutId } = alertSelectors(store.getState())\r\n    clearTimeout(timeoutId)\r\n    store.dispatch(alertActions.replaceTimeoutId(0))\r\n  }\r\n\r\n  protected setAutoClose (): void {\r\n    const timeoutId: number = window.setTimeout(() => {\r\n      store.dispatch(alertActions.replaceMessage(''))\r\n      this.clearAutoClose()\r\n    }, AlertService.timeout)\r\n    store.dispatch(alertActions.replaceTimeoutId(timeoutId))\r\n  }\r\n\r\n  push (message: string, handleProceed?: () => void): void {\r\n    this.pull()\r\n    store.dispatch(alertActions.replaceMessage(message))\r\n    if (handleProceed) {\r\n      store.dispatch(alertActions.replaceHandleProceed(handleProceed))\r\n    } else this.setAutoClose()\r\n  }\r\n\r\n  pull () {\r\n    this.clearAutoClose()\r\n    store.dispatch(alertActions.replaceMessage(''))\r\n    store.dispatch(alertActions.replaceHandleProceed(null))\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { IonIcon } from '@ionic/react'\r\nimport { alertCircleOutline } from 'ionicons/icons'\r\nimport AlertService from '../../services/AlertService'\r\nimport { selectors } from './Alert.state'\r\nimport styles from './Alert.module.scss'\r\n\r\ninterface AlertProps {\r\n  message?: string,\r\n  handleProceed?: () => {}\r\n}\r\n\r\nclass Alert extends Component<AlertProps> {\r\n  protected alertService: AlertService\r\n\r\n  constructor (props: AlertProps) {\r\n    super(props)\r\n    this.alertService = new AlertService()\r\n    this.handleClick = this.handleClick.bind(this)\r\n    this.handleCancelClick = this.handleCancelClick.bind(this)\r\n    this.handleProceedClick = this.handleProceedClick.bind(this)\r\n  }\r\n\r\n  get iconAndMessage () {\r\n    return (\r\n      <div className={styles.iconAndMessage}>\r\n        <IonIcon icon={alertCircleOutline} role=\"icon\"/>\r\n        <span className={styles.message}>{this.props.message}</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  get actions () {\r\n    return (\r\n      this.props.handleProceed &&\r\n      <div className={styles.actions} role=\"actions\">\r\n        <div className={styles.cancel} onClick={this.handleCancelClick}>No</div>\r\n        <div className={styles.proceed} onClick={this.handleProceedClick}>Yes</div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  get alertClass () {\r\n    const cursorStyle = this.props.handleProceed ? '' : styles.cursor\r\n    return `${styles.alert} ${cursorStyle}`\r\n  }\r\n\r\n  handleClick () {\r\n    if (!this.props.handleProceed) this.alertService.pull()\r\n  }\r\n\r\n  handleCancelClick () {\r\n    this.alertService.pull()\r\n  }\r\n\r\n  handleProceedClick () {\r\n    if (this.props.handleProceed) {\r\n      this.props.handleProceed()\r\n      this.alertService.pull()\r\n    }\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      this.props.message &&\r\n      <div className={this.alertClass} onClick={this.handleClick}>\r\n        {this.iconAndMessage}\r\n        {this.actions}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(selectors, null)(Alert)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Brand from '../Brand/Brand'\r\nimport Alert from '../Alert/Alert'\r\nimport styles from './Page.module.scss'\r\n\r\ninterface PageProps {\r\n  flip: boolean,\r\n  container: 'small' | 'large'\r\n}\r\n\r\nexport default class Page extends Component<PageProps> {\r\n  static propTypes = {\r\n    flip: PropTypes.bool.isRequired,\r\n    container: PropTypes.oneOf(['small', 'large']).isRequired,\r\n    children: PropTypes.element\r\n  }\r\n\r\n  get className () {\r\n    const flipClass = this.props.flip && styles.flip\r\n    const containerClass = styles[this.props.container]\r\n    return `${styles.page} ${flipClass} ${containerClass}`\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={this.className} role=\"page\">\r\n        <div className={styles.main}>\r\n          <Brand invert={this.props.flip} />\r\n          <div className={styles.content}>\r\n            {this.props.children}\r\n          </div>\r\n        </div>\r\n        <div className={styles.footer}>\r\n          <img\r\n            className={styles.background}\r\n            src=\"/assets/background.svg\"\r\n            alt=\"Background\" />\r\n        </div>\r\n        <Alert />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { IonContent, IonPage } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport { Plugins } from '@capacitor/core'\r\nimport { includes, startsWith } from 'lodash'\r\nimport routes from '../../routes'\r\nimport Page from '../../components/Page/Page'\r\n\r\ninterface PreloadProps extends RouteComponentProps {}\r\n\r\nclass Preload extends Component<PreloadProps> {\r\n  static timeout: number = 2000\r\n\r\n  autoRouteToHome (callback: (timeoutId: number) => void) {\r\n    const timeoutId: number = window.setTimeout(() => {\r\n      this.props.history.push(routes.home.path)\r\n    }, Preload.timeout)\r\n    callback(timeoutId)\r\n  }\r\n\r\n  initializeDeeplink (callback: () => void) {\r\n    Plugins.App.addListener('appUrlOpen', (data: any) => {\r\n      const slug = data.url.split(process.env.REACT_APP_HOST).pop()\r\n      const isJoin = startsWith(slug, '/join?id=')\r\n      const isStart = includes(['/start', '/start/'], slug)\r\n      if (isJoin || isStart) {\r\n        this.props.history.push(slug)\r\n        callback()\r\n      }\r\n    })\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.autoRouteToHome(timeoutId => {\r\n      this.initializeDeeplink(() => {\r\n        clearTimeout(timeoutId)\r\n      })\r\n    })\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page flip={true} container=\"small\" />\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Preload)\r\n","import React, { MouseEvent, Component } from 'react'\r\nimport { IonButton } from '@ionic/react'\r\nimport PropTypes from 'prop-types'\r\nimport styles from './Button.module.scss'\r\n\r\nexport interface ButtonProps {\r\n  text: string,\r\n  handleClick: (event: MouseEvent) => void\r\n}\r\n\r\nexport default class Button extends Component<ButtonProps> {\r\n  static propTypes = {\r\n    text: PropTypes.string.isRequired,\r\n    handleClick: PropTypes.func.isRequired\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.button}>\r\n        <IonButton\r\n          shape=\"round\"\r\n          expand=\"block\"\r\n          onClick={this.props.handleClick}>\r\n          {this.props.text}\r\n        </IonButton>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { IonContent, IonPage } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport { Link } from 'react-router-dom'\r\nimport routes from '../../routes'\r\nimport Button from '../../components/Button/Button'\r\nimport Page from '../../components/Page/Page'\r\nimport styles from './Home.module.scss'\r\n\r\ninterface HomeProps extends RouteComponentProps {}\r\n\r\nclass Home extends Component<HomeProps> {\r\n  constructor (props: HomeProps) {\r\n    super(props)\r\n    this.handleStartClick = this.handleStartClick.bind(this)\r\n    this.handleJoinClick = this.handleJoinClick.bind(this)\r\n  }\r\n\r\n  handleStartClick () {\r\n    this.props.history.push(routes.meetingStart.path)\r\n  }\r\n\r\n  handleJoinClick () {\r\n    this.props.history.push(routes.meetingJoin.path)\r\n  }\r\n\r\n  get copyright () {\r\n    const text = `${process.env.REACT_APP_NAME} ${new Date().getFullYear()}`\r\n    return { __html: `&copy; ${text}` }\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent fullscreen>\r\n          <Page flip={false} container=\"small\">\r\n            <div className={styles.home}>\r\n              <Button\r\n                text=\"Start a Meeting\"\r\n                handleClick={this.handleStartClick} />\r\n              <Button\r\n                text=\"Join a Meeting\"\r\n                handleClick={this.handleJoinClick} />\r\n              <div className={styles.footer}>\r\n                <Link to={routes.privacy.path}>Privacy Policy</Link>\r\n                <p\r\n                  className={styles.copyright}\r\n                  dangerouslySetInnerHTML={this.copyright} />\r\n              </div>\r\n            </div>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Home)\r\n","import { actions as meetingActions } from '../Meeting/Meeting.state'\r\n\r\nexport interface MeetingJoinActions {\r\n  replaceMeetingId: (id: string) => {\r\n    type: string;\r\n    id: string;\r\n  }\r\n}\r\n\r\nexport const actions: MeetingJoinActions = {\r\n  replaceMeetingId (id: string) {\r\n    return meetingActions.replaceId(id)\r\n  }\r\n}\r\n","import React, { ChangeEvent, Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styles from './Input.module.scss'\r\n\r\nexport interface InputProps {\r\n  name: string\r\n  type: string\r\n  value: string\r\n  placeholder: string\r\n  handleChange: (event: ChangeEvent) => void\r\n}\r\n\r\nexport default class Input extends Component<InputProps> {\r\n  static propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    type: PropTypes.string.isRequired,\r\n    value: PropTypes.string.isRequired,\r\n    placeholder: PropTypes.string.isRequired,\r\n    handleChange: PropTypes.func.isRequired\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <input\r\n        className={styles.input}\r\n        name={this.props.name}\r\n        type={this.props.type}\r\n        value={this.props.value}\r\n        placeholder={this.props.placeholder}\r\n        role=\"input\"\r\n        onChange={this.props.handleChange} />\r\n    )\r\n  }\r\n}\r\n","import { IonContent, IonPage } from '@ionic/react'\r\nimport React, { ChangeEvent, Component, Fragment } from 'react'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport { connect } from 'react-redux'\r\nimport { trim } from 'lodash'\r\nimport qs from 'qs'\r\nimport routes from '../../routes'\r\nimport AlertService from '../../services/AlertService'\r\nimport { actions, MeetingJoinActions } from './MeetingJoin.state'\r\nimport Page from '../../components/Page/Page'\r\nimport Input from '../../components/Input/Input'\r\nimport Button from '../../components/Button/Button'\r\n\r\ninterface MeetingProps extends MeetingJoinActions, RouteComponentProps {}\r\n\r\ninterface MeetingState {\r\n  meetingId: string\r\n}\r\n\r\nclass MeetingJoin extends Component<MeetingProps, MeetingState> {\r\n  protected alertService: AlertService\r\n\r\n  constructor (props: any) {\r\n    super(props)\r\n    this.state = {\r\n      meetingId: ''\r\n    }\r\n    this.alertService = new AlertService()\r\n    this.handleInputChange = this.handleInputChange.bind(this)\r\n    this.handleJoinClick = this.handleJoinClick.bind(this)\r\n  }\r\n\r\n  handleInputChange (event: ChangeEvent) {\r\n    const target = event.target as HTMLInputElement\r\n    const { value, name } = target\r\n    if (name === 'meetingId') this.setState({ meetingId: value })\r\n  }\r\n\r\n  handleJoinClick () {\r\n    const meetingId = trim(this.state.meetingId)\r\n    if (!meetingId) {\r\n      const message = 'Meeting ID is not allowed to be empty'\r\n      return this.alertService.push(message)\r\n    }\r\n    this.props.replaceMeetingId(meetingId)\r\n    this.props.history.push(routes.meeting.path)\r\n  }\r\n\r\n  setMeetingId () {\r\n    const { search } = this.props.history.location\r\n    const query = qs.parse(search, { ignoreQueryPrefix: true })\r\n    const meetingId = query.id as string\r\n    if (meetingId) this.setState({ meetingId })\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.setMeetingId()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page flip={false} container=\"small\">\r\n            <Fragment>\r\n              <Input\r\n                name=\"meetingId\"\r\n                type=\"text\"\r\n                value={this.state.meetingId}\r\n                placeholder=\"Meeting ID\"\r\n                handleChange={this.handleInputChange} />\r\n              <Button\r\n                text=\"Join Meeting\"\r\n                handleClick={this.handleJoinClick} />\r\n            </Fragment>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(null, actions)(MeetingJoin))\r\n","import { Plugins, StoragePlugin } from '@capacitor/core'\r\nimport { isPlatform } from '@ionic/react'\r\n\r\nexport default class StorageService {\r\n  protected storage: StoragePlugin = Plugins.Storage\r\n\r\n  protected isElectron: boolean = isPlatform('electron')\r\n\r\n  async get (key: string) {\r\n    if (this.isElectron) {\r\n      return window.localStorage.getItem(key)\r\n    } else {\r\n      const { value } = await this.storage.get({ key })\r\n      return value\r\n    }\r\n  }\r\n\r\n  async set (key: string, value: any) {\r\n    if (this.isElectron) {\r\n      window.localStorage.setItem(key, value)\r\n    } else {\r\n      await this.storage.set({ key, value })\r\n    }\r\n  }\r\n\r\n  async remove (key: string) {\r\n    if (this.isElectron) {\r\n      window.localStorage.removeItem(key)\r\n    } else {\r\n      await this.storage.remove({ key })\r\n    }\r\n  }\r\n}\r\n","import StorageService from './StorageService'\r\n\r\nexport default class AccessTokenService {\r\n  protected key: string = 'accessToken'\r\n\r\n  protected storageService: StorageService\r\n\r\n  constructor () {\r\n    this.storageService = new StorageService()\r\n  }\r\n\r\n  get (): Promise<string | null> {\r\n    return this.storageService.get(this.key)\r\n  }\r\n\r\n  set (accessToken: string): Promise<void> {\r\n    return this.storageService.set(this.key, accessToken)\r\n  }\r\n\r\n  remove () {\r\n    return this.storageService.remove(this.key)\r\n  }\r\n}\r\n","import axios from 'axios'\r\nimport AccessTokenService from './AccessTokenService'\r\nimport AlertService from './AlertService'\r\n\r\nexport default class RequestService {\r\n  protected alertService: AlertService\r\n\r\n  protected accessTokenService: AccessTokenService\r\n\r\n  constructor () {\r\n    this.alertService = new AlertService()\r\n    this.accessTokenService = new AccessTokenService()\r\n  }\r\n\r\n  protected async client () {\r\n    const accessToken = await this.accessTokenService.get()\r\n    return axios.create({\r\n      baseURL: `https://${process.env.REACT_APP_API_HOST}`,\r\n      headers: { Authorization: `Bearer ${accessToken}` }\r\n    })\r\n  }\r\n\r\n  protected handleError (error: any) {\r\n    const serverError = (error.response && error.response.data.message)\r\n    const message = serverError || error.message\r\n    this.alertService.push(message)\r\n  }\r\n\r\n  async get (path: string, callback: ((data: any) => void)) {\r\n    const client = await this.client()\r\n    client.get(path)\r\n      .then(response => callback(response.data))\r\n      .catch(error => {\r\n        callback(null)\r\n        this.handleError(error)\r\n      })\r\n  }\r\n\r\n  async post (path: string, payload: any, callback: ((data: any) => void)) {\r\n    const client = await this.client()\r\n    client.post(path, payload)\r\n      .then(response => callback(response.data))\r\n      .catch(error => {\r\n        callback(null)\r\n        this.handleError(error)\r\n      })\r\n  }\r\n\r\n  async patch (path: string, payload: any, callback: ((data: object | null) => void)) {\r\n    const client = await this.client()\r\n    client.patch(path, payload)\r\n      .then(response => callback(response.data))\r\n      .catch(error => {\r\n        callback(null)\r\n        this.handleError(error)\r\n      })\r\n  }\r\n\r\n  async delete (path: string, payload: any, callback: ((data: object | null) => void)) {\r\n    const client = await this.client()\r\n    client.delete(path, { data: payload })\r\n      .then(response => callback(response.data))\r\n      .catch(error => {\r\n        callback(null)\r\n        this.handleError(error)\r\n      })\r\n  }\r\n}\r\n","import { History } from 'history'\r\nimport routes from '../../routes'\r\nimport store from '../../store'\r\nimport RequestService from '../../services/RequestService'\r\nimport AccessTokenService from '../../services/AccessTokenService'\r\nimport {\r\n  AuthState,\r\n  actions as appActions\r\n} from '../../components/App/App.state'\r\n\r\ninterface SignInCredentials {\r\n  username: string,\r\n  password: string\r\n}\r\n\r\ninterface UpdateLastMeetingAtHost {\r\n  id: string\r\n}\r\n\r\nexport default class MeetingStartRequest {\r\n  protected requestService: RequestService\r\n\r\n  protected accessTokenService: AccessTokenService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n    this.accessTokenService = new AccessTokenService()\r\n  }\r\n\r\n  signIn (credentials: SignInCredentials, history: History) {\r\n    this.requestService.post('/host/signIn', credentials, async response => {\r\n      if (response) {\r\n        const { id, accessToken } = response\r\n        await this.accessTokenService.set(accessToken)\r\n        const host: UpdateLastMeetingAtHost = { id }\r\n        this.updateLastMeetingAt(host, () => {\r\n          const auth: AuthState = { type: 'host' }\r\n          store.dispatch(appActions.replaceAuth(auth))\r\n          history.push(routes.meeting.path)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  updateLastMeetingAt (host: UpdateLastMeetingAtHost, callback: () => void) {\r\n    this.requestService.patch('/host/lastMeetingAt', host, response => {\r\n      if (response) callback()\r\n    })\r\n  }\r\n}\r\n","import { actions as appActions, AuthState } from '../../components/App/App.state'\r\n\r\nexport interface MeetingStartActions {\r\n  replaceAppAuth: (auth: AuthState) => {\r\n    type: string;\r\n    auth: AuthState;\r\n  }\r\n}\r\n\r\nexport const actions: MeetingStartActions = {\r\n  replaceAppAuth (auth) {\r\n    return appActions.replaceAuth(auth)\r\n  }\r\n}\r\n","import React, { ChangeEvent, Component, Fragment } from 'react'\r\nimport { IonContent, IonPage } from '@ionic/react'\r\nimport { connect } from 'react-redux'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport Request from './MeetingStart.request'\r\nimport { actions, MeetingStartActions } from './MeetingStart.state'\r\nimport Page from '../../components/Page/Page'\r\nimport Button from '../../components/Button/Button'\r\nimport Input from '../../components/Input/Input'\r\n\r\ninterface MeetingProps extends MeetingStartActions, RouteComponentProps {}\r\n\r\ninterface MeetingState {\r\n  username: string\r\n  password: string\r\n}\r\n\r\nclass MeetingStart extends Component<MeetingProps, MeetingState> {\r\n  protected request: Request\r\n\r\n  constructor (props: any) {\r\n    super(props)\r\n    this.request = new Request()\r\n    this.state = {\r\n      username: '',\r\n      password: ''\r\n    }\r\n    this.handleInputChange = this.handleInputChange.bind(this)\r\n    this.handleStartClick = this.handleStartClick.bind(this)\r\n  }\r\n\r\n  handleInputChange (event: ChangeEvent) {\r\n    const target = event.target as HTMLInputElement\r\n    const { value, name } = target\r\n    switch (name) {\r\n      case 'username':\r\n        this.setState({ username: value })\r\n        break\r\n      case 'password':\r\n        this.setState({ password: value })\r\n        break\r\n    }\r\n  }\r\n\r\n  handleStartClick () {\r\n    const { username, password } = this.state\r\n    const credentials = { username, password }\r\n    this.request.signIn(credentials, this.props.history)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent fullscreen>\r\n          <Page flip={false} container=\"small\">\r\n            <Fragment>\r\n              <Input\r\n                name=\"username\"\r\n                type=\"text\"\r\n                value={this.state.username}\r\n                placeholder=\"Username\"\r\n                handleChange={this.handleInputChange} />\r\n              <Input\r\n                name=\"password\"\r\n                type=\"password\"\r\n                value={this.state.password}\r\n                placeholder=\"Password\"\r\n                handleChange={this.handleInputChange} />\r\n              <Button\r\n                text=\"Start Meeting\"\r\n                handleClick={this.handleStartClick} />\r\n            </Fragment>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(null, actions)(MeetingStart))\r\n","import Peer, { MediaConnection } from 'peerjs'\r\nimport { History } from 'history'\r\nimport { includes } from 'lodash'\r\nimport routes from '../routes'\r\nimport AlertService from './AlertService'\r\n\r\nexport default class PeerService {\r\n  protected static options = {\r\n    host: process.env.REACT_APP_API_HOST,\r\n    path: '/peer',\r\n    secure: true\r\n  }\r\n\r\n  protected client: Peer\r\n\r\n  protected alertService: AlertService\r\n\r\n  constructor () {\r\n    this.client = new Peer(PeerService.options)\r\n    this.alertService = new AlertService()\r\n  }\r\n\r\n  protected getErrorMessage (type: string): string {\r\n    switch (type) {\r\n      case 'browser-incompatible':\r\n        return 'Device doesn\\'t support WebRTC'\r\n      case 'disconnected':\r\n        return 'Already disconnected meeting'\r\n      case 'invalid-id':\r\n        return 'Invalid connection ID'\r\n      case 'invalid-key':\r\n        return 'Invalid API key'\r\n      case 'network':\r\n        return 'Can\\'t establish network connection'\r\n      case 'peer-unavailable':\r\n        return 'Meeting ID doesn\\'t exist'\r\n      case 'ssl-unavailable':\r\n        return 'Server doesn\\'t support SSL'\r\n      case 'server-error':\r\n        return 'Unable to reach server'\r\n      case 'socket-error':\r\n        return 'Underlying socket error'\r\n      case 'socket-closed':\r\n        return 'Underlying socket closed'\r\n      case 'unavailable-id':\r\n        return 'Connection ID already taken'\r\n      case 'webrtc':\r\n        return 'Device doesn\\'t support WebRTC'\r\n      default:\r\n        return 'Something went wrong'\r\n    }\r\n  }\r\n\r\n  handleErrors (history: History) {\r\n    this.client.on('error', error => {\r\n      const { type } = error\r\n      const message = this.getErrorMessage(type)\r\n      this.alertService.push(message)\r\n      const routeErrorTypes = ['network', 'server-error', 'peer-unavailable']\r\n      const canRoute = includes(routeErrorTypes, type)\r\n      if (canRoute) history.push(routes.home.path)\r\n    })\r\n  }\r\n\r\n  onOpen (callback: (localConnectionId: string) => void): void {\r\n    this.client.on('open', localConnectionId => callback(localConnectionId))\r\n  }\r\n\r\n  call (\r\n    meetingId: string,\r\n    stream: MediaStream,\r\n    callback: (call: MediaConnection) => void): void {\r\n    const call = this.client.call(meetingId, stream)\r\n    callback(call)\r\n  }\r\n\r\n  onReceiveCall (callback: (call: MediaConnection) => void): void {\r\n    this.client.on('call', call => callback(call))\r\n  }\r\n\r\n  answerCall (call: MediaConnection, localStream: MediaStream): void {\r\n    call.answer(localStream)\r\n  }\r\n\r\n  onCalling (\r\n    call: MediaConnection,\r\n    callback: (remoteConnectionId: string,\r\n    remoteStream: MediaStream) => void): void {\r\n    call.on('stream', remoteStream => {\r\n      const remoteConnectionId = call.peer\r\n      callback(remoteConnectionId, remoteStream)\r\n    })\r\n  }\r\n\r\n  disconnect (): void {\r\n    this.client.destroy()\r\n  }\r\n\r\n  onDisconnect (callback: () => void): void {\r\n    this.client.on('close', () => callback())\r\n  }\r\n}\r\n","import { History } from 'history'\r\nimport { first, forEach } from 'lodash'\r\nimport routes from '../routes'\r\nimport AlertService from './AlertService'\r\n\r\nexport default class MediaService {\r\n  protected alertService: AlertService\r\n\r\n  constructor () {\r\n    this.alertService = new AlertService()\r\n  }\r\n\r\n  async getStream (history: History, callback: (localStream: MediaStream) => void): Promise<void> {\r\n    try {\r\n      const { getUserMedia } = navigator.mediaDevices\r\n      const constraints = { video: true, audio: true }\r\n      const localStream: MediaStream = await getUserMedia(constraints)\r\n      callback(localStream)\r\n    } catch (error) {\r\n      this.alertService.push('Device doesn\\'t support WebRTC')\r\n      history.push(routes.home.path)\r\n    }\r\n  }\r\n\r\n  stopStream (localStream: MediaStream): void {\r\n    const tracks = localStream.getTracks()\r\n    forEach(tracks, track => track.stop())\r\n  }\r\n\r\n  toggleVideoMute (\r\n    stream: MediaStream,\r\n    callback: (enabled: boolean) => void): void {\r\n    const track = first(stream.getVideoTracks())\r\n    if (track) track.enabled = !track.enabled\r\n    const enabled = track ? track.enabled : false\r\n    callback(enabled)\r\n  }\r\n\r\n  toggleAudioMute (\r\n    stream: MediaStream,\r\n    callback: (enabled: boolean) => void): void {\r\n    const track = first(stream.getAudioTracks())\r\n    if (track) track.enabled = !track.enabled\r\n    const enabled = track ? track.enabled : false\r\n    callback(enabled)\r\n  }\r\n}\r\n","import store from '../store'\r\nimport { actions as appActions, selectors as appSelectors } from '../components/App/App.state'\r\n\r\nexport default class AuthService {\r\n  isHostAuth (): boolean {\r\n    const { auth } = appSelectors(store.getState())\r\n    return (auth.type === 'host')\r\n  }\r\n\r\n  resetType (): void {\r\n    const auth = { type: null }\r\n    store.dispatch(appActions.replaceAuth(auth))\r\n  }\r\n}\r\n","import { some } from 'lodash'\r\nimport store from '../store'\r\nimport AuthService from './AuthService'\r\nimport {\r\n  actions as meetingActions,\r\n  selectors as meetingSelectors\r\n} from '../pages/Meeting/Meeting.state'\r\n\r\nexport default class MeetingService {\r\n  protected authService: AuthService\r\n\r\n  constructor () {\r\n    this.authService = new AuthService()\r\n  }\r\n\r\n  protected setMeetingId (meetingId: string): void {\r\n    if (this.authService.isHostAuth()) {\r\n      store.dispatch(meetingActions.replaceId(meetingId))\r\n    }\r\n  }\r\n\r\n  protected setConnectionId (connectionId: string): void {\r\n    store.dispatch(meetingActions.replaceConnectionId(connectionId))\r\n  }\r\n\r\n  isExistsUserVideo (connectionId: string) {\r\n    const { videos } = meetingSelectors(store.getState())\r\n    const existsUserVideo = some(videos, { id: connectionId })\r\n    return existsUserVideo\r\n  }\r\n\r\n  setId (connectionId: string, callback: (meetingId: string) => void): void {\r\n    this.setMeetingId(connectionId)\r\n    this.setConnectionId(connectionId)\r\n    const meetingId = this.getMeetingId()\r\n    callback(meetingId)\r\n  }\r\n\r\n  getMeetingId (): string {\r\n    return meetingSelectors(store.getState()).id\r\n  }\r\n\r\n  isHostMeeting (connectionId: string): boolean {\r\n    const { id: meetingId } = meetingSelectors(store.getState())\r\n    return (meetingId === connectionId)\r\n  }\r\n\r\n  isMemberMeeting (connectionId: string): boolean {\r\n    return !this.isHostMeeting(connectionId)\r\n  }\r\n\r\n  isUserMeeting (connectionId: string): boolean {\r\n    const { connectionId: id } = meetingSelectors(store.getState())\r\n    return (connectionId === id)\r\n  }\r\n\r\n  canMemberRemove (connectionId: string): boolean {\r\n    return this.authService.isHostAuth() && !this.isHostMeeting(connectionId)\r\n  }\r\n\r\n  canConferenceCall (connectionId: string) {\r\n    return !this.isHostMeeting(connectionId) && !this.isExistsUserVideo(connectionId)\r\n  }\r\n\r\n  resetMeeting (): void {\r\n    store.dispatch(meetingActions.reset())\r\n  }\r\n}\r\n","import { find, some } from 'lodash'\r\nimport { nanoid } from 'nanoid'\r\nimport store from '../store'\r\nimport MeetingService from './MeetingService'\r\nimport MediaService from './MediaService'\r\nimport {\r\n  actions as meetingActions,\r\n  selectors as meetingSelectors,\r\n  VideoState\r\n} from '../pages/Meeting/Meeting.state'\r\n\r\nexport default class VideoService {\r\n  protected meetingService: MeetingService\r\n\r\n  protected mediaService: MediaService\r\n\r\n  constructor () {\r\n    this.meetingService = new MeetingService()\r\n    this.mediaService = new MediaService()\r\n  }\r\n\r\n  hasVideo (connectionId: string): boolean {\r\n    const { videos } = meetingSelectors(store.getState())\r\n    return some(videos, { id: connectionId })\r\n  }\r\n\r\n  createVideo (\r\n    connectionId: string,\r\n    stream: MediaStream,\r\n    callback: (video: VideoState) => void): void {\r\n    const video = {\r\n      id: connectionId,\r\n      stream,\r\n      raiseHand: false,\r\n      memberRemove: this.meetingService.canMemberRemove(connectionId),\r\n      active: this.meetingService.isHostMeeting(connectionId),\r\n      renderId: nanoid()\r\n    }\r\n    callback(video)\r\n  }\r\n\r\n  getVideo (connectionId: string): VideoState | undefined {\r\n    const { videos } = meetingSelectors(store.getState())\r\n    return find(videos, video => video.id === connectionId)\r\n  }\r\n\r\n  getUserVideo (): VideoState | undefined {\r\n    const { connectionId } = meetingSelectors(store.getState())\r\n    return this.getVideo(connectionId)\r\n  }\r\n\r\n  pushVideo (video: VideoState): void {\r\n    store.dispatch(meetingActions.pushVideo(video))\r\n  }\r\n\r\n  pullVideo (connectionId: string): void {\r\n    store.dispatch(meetingActions.pullVideo(connectionId))\r\n  }\r\n\r\n  stopUserVideo () {\r\n    const userVideo = this.getUserVideo()\r\n    if (userVideo) this.mediaService.stopStream(userVideo.stream)\r\n  }\r\n}\r\n","import { Howl } from 'howler'\r\nimport AuthService from './AuthService'\r\nimport MeetingService from './MeetingService'\r\n\r\nexport default class NotificationService {\r\n  protected authService: AuthService\r\n\r\n  protected meetingService: MeetingService\r\n\r\n  constructor () {\r\n    this.authService = new AuthService()\r\n    this.meetingService = new MeetingService()\r\n  }\r\n\r\n  private canNotifyHost (connectionId: string) {\r\n    const isHostAuth = this.authService.isHostAuth()\r\n    const isExistsUserVideo = this.meetingService.isExistsUserVideo(connectionId)\r\n    return isHostAuth && !isExistsUserVideo\r\n  }\r\n\r\n  private canNotifyMember (connectionId: string) {\r\n    return !this.meetingService.isExistsUserVideo(connectionId)\r\n  }\r\n\r\n  private playNotification () {\r\n    const notification = new Howl({ src: ['/assets/notification.mp3'] })\r\n    notification.play()\r\n  }\r\n\r\n  notifyHost (connectionId: string) {\r\n    if (this.canNotifyHost(connectionId)) this.playNotification()\r\n  }\r\n\r\n  notifyMember (connectionId: string) {\r\n    if (this.canNotifyMember(connectionId)) this.playNotification()\r\n  }\r\n}\r\n","import { History } from 'history'\r\nimport routes from '../routes'\r\nimport RequestService from '../services/RequestService'\r\nimport AuthService from '../services/AuthService'\r\n\r\nexport default class HostMiddleware {\r\n  protected requestService: RequestService\r\n\r\n  protected authService: AuthService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n    this.authService = new AuthService()\r\n  }\r\n\r\n  auth (history: History) {\r\n    const isHostAuth = this.authService.isHostAuth()\r\n    if (isHostAuth) {\r\n      this.requestService.get('/host/auth', response => {\r\n        if (!response) history.push(routes.meetingStart.path)\r\n      })\r\n    }\r\n  }\r\n}\r\n","import { Client } from 'faye'\r\n\r\nexport default class SocketService {\r\n  protected static client: Client\r\n\r\n  static connect (): void {\r\n    const endpoint = `https://${process.env.REACT_APP_API_HOST}/socket`\r\n    SocketService.client = new Client(endpoint)\r\n  }\r\n\r\n  static subscribe (channel: string, callback: (payload: any) => void): void {\r\n    SocketService.client.subscribe(channel, payload => callback(payload))\r\n  }\r\n\r\n  static unsubscribe (channel: string): void {\r\n    SocketService.client.unsubscribe(channel)\r\n  }\r\n\r\n  static publish (channel: string, payload: any): void {\r\n    SocketService.client.publish(channel, payload)\r\n  }\r\n}\r\n","import SocketService from '../../services/SocketService'\r\n\r\nexport default {\r\n  raiseHand: {\r\n    channel (meetingId: string) {\r\n      return `/raiseHand/${meetingId}`\r\n    },\r\n    subscribe (meetingId: string, callback: (connectionId: string) => void) {\r\n      SocketService.subscribe(\r\n        this.channel(meetingId),\r\n        (connectionId: string) => callback(connectionId)\r\n      )\r\n    },\r\n    unsubscribe (meetingId: string) {\r\n      SocketService.unsubscribe(this.channel(meetingId))\r\n    },\r\n    publish (meetingId: string, connectionId: string) {\r\n      SocketService.publish(this.channel(meetingId), connectionId)\r\n    }\r\n  },\r\n\r\n  conferenceCall: {\r\n    channel (meetingId: string) {\r\n      return `/conferenceCall/${meetingId}`\r\n    },\r\n    subscribe (meetingId: string, callback: (connectionId: string) => void) {\r\n      SocketService.subscribe(\r\n        this.channel(meetingId),\r\n        (connectionId: string) => callback(connectionId))\r\n    },\r\n    unsubscribe (meetingId: string) {\r\n      SocketService.unsubscribe(this.channel(meetingId))\r\n    },\r\n    publish (meetingId: string, connectionId: string) {\r\n      SocketService.publish(this.channel(meetingId), connectionId)\r\n    }\r\n  },\r\n\r\n  remoteDisconnect: {\r\n    channel (meetingId: string) {\r\n      return `/remoteDisconnect/${meetingId}`\r\n    },\r\n    subscribe (meetingId: string, callback: (connectionId: string) => void) {\r\n      SocketService.subscribe(\r\n        this.channel(meetingId),\r\n        (connectionId: string) => callback(connectionId)\r\n      )\r\n    },\r\n    unsubscribe (meetingId: string) {\r\n      SocketService.unsubscribe(this.channel(meetingId))\r\n    },\r\n    publish (meetingId: string, connectionId: string) {\r\n      SocketService.publish(this.channel(meetingId), connectionId)\r\n    }\r\n  },\r\n\r\n  memberRemove: {\r\n    channel (meetingId: string) {\r\n      return `/memberRemove/${meetingId}`\r\n    },\r\n    subscribe (meetingId: string, callback: (connectionId: string) => void) {\r\n      SocketService.subscribe(\r\n        this.channel(meetingId),\r\n        (connectionId: string) => callback(connectionId))\r\n    },\r\n    unsubscribe (meetingId: string) {\r\n      SocketService.unsubscribe(this.channel(meetingId))\r\n    },\r\n    publish (meetingId: string, connectionId: string) {\r\n      SocketService.publish(this.channel(meetingId), connectionId)\r\n    }\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styles from './Skeleton.module.scss'\r\n\r\ninterface SkeletonProps {\r\n  width: string,\r\n  height: string,\r\n  marginTop?: string,\r\n  marginBottom?: string,\r\n  paddingBottom?: string,\r\n  shape?: 'rectangle' | 'round'\r\n}\r\n\r\nexport default class Skeleton extends Component<SkeletonProps> {\r\n  static propTypes = {\r\n    width: PropTypes.string.isRequired,\r\n    height: PropTypes.string.isRequired,\r\n    marginTop: PropTypes.string,\r\n    marginBottom: PropTypes.string,\r\n    paddingBottom: PropTypes.string,\r\n    shape: PropTypes.string\r\n  }\r\n\r\n  static defaultProps = {\r\n    marginTop: '0',\r\n    marginBottom: '0',\r\n    paddingBottom: '0',\r\n    shape: 'rectangle'\r\n  }\r\n\r\n  get styles () {\r\n    return {\r\n      width: this.props.width,\r\n      height: this.props.height,\r\n      marginTop: this.props.marginTop,\r\n      marginBottom: this.props.marginBottom,\r\n      paddingBottom: this.props.paddingBottom\r\n    }\r\n  }\r\n\r\n  get className () {\r\n    const { shape } = this.props\r\n    const shapeClass = shape && styles[shape]\r\n    return `${styles.skeleton} ${shapeClass}`\r\n  }\r\n\r\n  render () {\r\n    return <div className={this.className} style={this.styles} />\r\n  }\r\n}\r\n","import { IonCol, IonIcon } from '@ionic/react'\r\nimport { videocamOutline } from 'ionicons/icons'\r\nimport React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Skeleton from '../Skeleton/Skeleton'\r\nimport styles from './VideoSkeleton.module.scss'\r\n\r\ninterface VideoSkeletonProps {\r\n  video: any\r\n}\r\n\r\nexport default class VideoSkeleton extends Component<VideoSkeletonProps> {\r\n  static propTypes = {\r\n    video: PropTypes.any\r\n  }\r\n\r\n  render () {\r\n    return (!this.props.video) &&\r\n      <IonCol size=\"12\">\r\n        <div className={styles.videoSkeleton}>\r\n          <Skeleton\r\n            width=\"100%\"\r\n            height=\"0\"\r\n            paddingBottom=\"calc(100% / (16/9))\" />\r\n          <IonIcon\r\n            className={styles.icon}\r\n            icon={videocamOutline} />\r\n        </div>\r\n      </IonCol>\r\n  }\r\n}\r\n","import React, { MouseEvent, Component } from 'react'\r\nimport { IonIcon } from '@ionic/react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  closeCircleOutline,\r\n  handRightOutline,\r\n  micOutline,\r\n  personAddOutline,\r\n  videocamOutline\r\n} from 'ionicons/icons'\r\nimport styles from './Action.module.scss'\r\n\r\ntype Types = 'invite' | 'raiseHand' | 'end' | 'video' | 'audio'\r\n\r\nexport interface ActionProps {\r\n  type: Types,\r\n  active: boolean,\r\n  handleClick: (event: MouseEvent) => void\r\n}\r\n\r\nexport default class Action extends Component<ActionProps> {\r\n  static propTypes = {\r\n    type: PropTypes.string.isRequired,\r\n    active: PropTypes.bool.isRequired,\r\n    handleClick: PropTypes.func.isRequired\r\n  }\r\n\r\n  get className () {\r\n    const activeClass = this.props.active ? styles.active : ''\r\n    return `${styles.action} ${activeClass}`\r\n  }\r\n\r\n  get icon () {\r\n    switch (this.props.type) {\r\n      case 'invite':\r\n        return personAddOutline\r\n      case 'raiseHand':\r\n        return handRightOutline\r\n      case 'end':\r\n        return closeCircleOutline\r\n      case 'video':\r\n        return videocamOutline\r\n      case 'audio':\r\n        return micOutline\r\n    }\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div\r\n        className={this.className}\r\n        role={this.props.type}\r\n        onClick={this.props.handleClick}>\r\n        <IonIcon icon={this.icon} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { IonIcon } from '@ionic/react'\r\nimport { chevronDown, chevronUp } from 'ionicons/icons'\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport store from '../../store'\r\nimport { actions, ActionsToggleState, selectors } from './ActionsToggle.state'\r\nimport styles from './ActionsToggle.module.scss'\r\n\r\ninterface ActionsToggleProps extends ActionsToggleState {}\r\n\r\nclass ActionsToggle extends Component<ActionsToggleProps> {\r\n  constructor (props: ActionsToggleProps) {\r\n    super(props)\r\n    this.handleClick = this.handleClick.bind(this)\r\n  }\r\n\r\n  get icon () {\r\n    return this.props.expanded ? chevronDown : chevronUp\r\n  }\r\n\r\n  handleClick () {\r\n    const expanded = !this.props.expanded\r\n    store.dispatch(actions.replaceExpanded(expanded))\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.actionsToggle}>\r\n        <div className={styles.button} onClick={this.handleClick}>\r\n          <IonIcon icon={this.icon} className={styles.icon} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(selectors, actions)(ActionsToggle)\r\n","import React, { Component } from 'react'\r\nimport { isPlatform } from '@ionic/react'\r\nimport { SocialSharing } from '@ionic-native/social-sharing'\r\nimport copyToClipboard from 'copy-to-clipboard'\r\nimport store from '../../store'\r\nimport meetingSocket from '../../pages/Meeting/Meeting.socket'\r\nimport MediaService from '../../services/MediaService'\r\nimport VideoService from '../../services/VideoService'\r\nimport AlertService from '../../services/AlertService'\r\nimport { selectors as meetingSelectors } from '../../pages/Meeting/Meeting.state'\r\nimport { selectors as actionsToggleSelectors } from '../ActionsToggle/ActionsToggle.state'\r\nimport Action from '../Action/Action'\r\nimport ActionsToggle from '../ActionsToggle/ActionsToggle'\r\nimport styles from './Actions.module.scss'\r\n\r\ninterface ActionsProps {\r\n  handleEnd: () => void\r\n}\r\n\r\ninterface ActionsState {\r\n  isVideoEnabled: boolean\r\n  isAudioEnabled: boolean\r\n}\r\n\r\nexport default class Actions extends Component<ActionsProps, ActionsState> {\r\n  protected mediaService: MediaService\r\n\r\n  protected videoService: VideoService\r\n\r\n  protected alertService: AlertService\r\n\r\n  constructor (props: ActionsProps) {\r\n    super(props)\r\n    this.mediaService = new MediaService()\r\n    this.videoService = new VideoService()\r\n    this.alertService = new AlertService()\r\n    this.state = {\r\n      isVideoEnabled: true,\r\n      isAudioEnabled: true\r\n    }\r\n    this.handleInviteClick = this.handleInviteClick.bind(this)\r\n    this.handleRaiseHandClick = this.handleRaiseHandClick.bind(this)\r\n    this.handleEndClick = this.handleEndClick.bind(this)\r\n    this.handleVideoClick = this.handleVideoClick.bind(this)\r\n    this.handleAudioClick = this.handleAudioClick.bind(this)\r\n  }\r\n\r\n  get meetingId () {\r\n    const { id } = meetingSelectors(store.getState())\r\n    return id\r\n  }\r\n\r\n  get canInvite () {\r\n    return Boolean(this.meetingId)\r\n  }\r\n\r\n  get canEnd () {\r\n    return Boolean(this.meetingId)\r\n  }\r\n\r\n  get inviteText () {\r\n    const url = `https://${process.env.REACT_APP_HOST}`\r\n    const { id } = meetingSelectors(store.getState())\r\n    return `Hi there,\\nYou can join the meeting from ${url}/join?id=${id}`\r\n  }\r\n\r\n  get isRaiseHandActive (): boolean {\r\n    const video = this.videoService.getUserVideo()\r\n    return video ? !video.raiseHand : true\r\n  }\r\n\r\n  handleInviteClick () {\r\n    if (this.canInvite) {\r\n      if (isPlatform('hybrid')) {\r\n        SocialSharing.share(this.inviteText)\r\n      } else {\r\n        copyToClipboard(this.inviteText)\r\n        this.alertService.push('Invitation copied.')\r\n      }\r\n    }\r\n  }\r\n\r\n  handleRaiseHandClick () {\r\n    if (!this.isRaiseHandActive) return\r\n    const { id: meetingId, connectionId } = meetingSelectors(store.getState())\r\n    meetingSocket.raiseHand.publish(meetingId, connectionId)\r\n  }\r\n\r\n  handleEndClick () {\r\n    if (this.canEnd) this.props.handleEnd()\r\n  }\r\n\r\n  handleVideoClick () {\r\n    const video = this.videoService.getUserVideo()\r\n    if (video) {\r\n      this.mediaService.toggleVideoMute(video.stream, isVideoEnabled => {\r\n        this.setState({ isVideoEnabled })\r\n      })\r\n    }\r\n  }\r\n\r\n  handleAudioClick () {\r\n    const video = this.videoService.getUserVideo()\r\n    if (video) {\r\n      this.mediaService.toggleAudioMute(video.stream, isAudioEnabled => {\r\n        this.setState({ isAudioEnabled })\r\n      })\r\n    }\r\n  }\r\n\r\n  get canVisibleButtons () {\r\n    const actionsToggleState = actionsToggleSelectors(store.getState())\r\n    return actionsToggleState.expanded\r\n  }\r\n\r\n  get buttons () {\r\n    return this.canVisibleButtons &&\r\n      <div className={styles.buttons}>\r\n        <Action\r\n          type=\"invite\"\r\n          active={this.canInvite}\r\n          handleClick={this.handleInviteClick} />\r\n        <Action\r\n          type=\"raiseHand\"\r\n          active={this.isRaiseHandActive}\r\n          handleClick={this.handleRaiseHandClick} />\r\n        <Action\r\n          type=\"end\"\r\n          active={this.canEnd}\r\n          handleClick={this.handleEndClick} />\r\n        <Action\r\n          type=\"video\"\r\n          active={this.state.isVideoEnabled}\r\n          handleClick={this.handleVideoClick} />\r\n        <Action\r\n          type=\"audio\"\r\n          active={this.state.isAudioEnabled}\r\n          handleClick={this.handleAudioClick} />\r\n      </div>\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.actions}>\r\n        <ActionsToggle />\r\n        {this.buttons}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { IonFabButton, IonIcon } from '@ionic/react'\r\nimport PropTypes from 'prop-types'\r\nimport styles from './FloatButton.module.scss'\r\n\r\nexport interface FloatButtonProps {\r\n  color: 'warning' | 'danger',\r\n  icon: string,\r\n  role: string\r\n}\r\n\r\nexport default class FloatButton extends Component<FloatButtonProps> {\r\n  static propTypes = {\r\n    color: PropTypes.oneOf(['warning', 'danger']).isRequired,\r\n    icon: PropTypes.string.isRequired,\r\n    role: PropTypes.string.isRequired\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.floatButton}>\r\n        <IonFabButton\r\n          color={this.props.color}\r\n          size=\"small\"\r\n          role={this.props.role}>\r\n          <IonIcon\r\n            icon={this.props.icon}\r\n            role=\"icon\" />\r\n        </IonFabButton>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport MeetingService from '../../services/MeetingService'\r\nimport VideoService from '../../services/VideoService'\r\nimport styles from './VideoNative.module.scss'\r\n\r\nexport interface VideoNativeProps {\r\n  id: string,\r\n  renderId: string\r\n}\r\n\r\ninterface VideoNativeState {\r\n  renderId: string\r\n}\r\n\r\nexport default class VideoNative extends Component<VideoNativeProps, VideoNativeState> {\r\n  protected meetingService: MeetingService\r\n\r\n  protected videoService: VideoService\r\n\r\n  static propTypes = {\r\n    id: PropTypes.string.isRequired\r\n  }\r\n\r\n  constructor (props: VideoNativeProps) {\r\n    super(props)\r\n    this.state = {\r\n      renderId: this.props.renderId\r\n    }\r\n    this.meetingService = new MeetingService()\r\n    this.videoService = new VideoService()\r\n  }\r\n\r\n  get video () {\r\n    return this.videoService.getVideo(this.props.id)\r\n  }\r\n\r\n  get isMuted () {\r\n    return this.meetingService.isUserMeeting(this.props.id)\r\n  }\r\n\r\n  setSource (element: HTMLVideoElement | null) {\r\n    if (element && this.video) element.srcObject = this.video.stream\r\n  }\r\n\r\n  shouldComponentUpdate (props: VideoNativeProps, state: VideoNativeState) {\r\n    const { renderId } = props\r\n    const hasChange = renderId !== state.renderId\r\n    if (hasChange) this.setState({ renderId })\r\n    return hasChange\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <video\r\n        className={styles.video}\r\n        autoPlay={true}\r\n        muted={this.isMuted}\r\n        playsInline={true}\r\n        ref={video => this.setSource(video)} // Fix blank video\r\n        role=\"video\">\r\n      </video>\r\n    )\r\n  }\r\n}\r\n","import React, { Component, MouseEvent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { handRightOutline, personRemoveOutline } from 'ionicons/icons'\r\nimport store from '../../store'\r\nimport MeetingService from '../../services/MeetingService'\r\nimport { actions } from '../../pages/Meeting/Meeting.state'\r\nimport meetingSocket from '../../pages/Meeting/Meeting.socket'\r\nimport FloatButton from '../FloatButton/FloatButton'\r\nimport VideoNative from '../VideoNative/VideoNative'\r\nimport styles from './Video.module.scss'\r\n\r\nexport interface VideoProps {\r\n  id: string,\r\n  source: MediaStream,\r\n  ratio: 'wide' | 'square',\r\n  raiseHand: boolean,\r\n  memberRemove: boolean,\r\n  active: boolean,\r\n  renderId: string\r\n}\r\n\r\nexport default class Video extends Component<VideoProps> {\r\n  static propTypes = {\r\n    source: PropTypes.object,\r\n    ratio: PropTypes.oneOf(['wide', 'square']).isRequired,\r\n    raiseHand: PropTypes.bool.isRequired,\r\n    memberRemove: PropTypes.bool.isRequired,\r\n    active: PropTypes.bool.isRequired\r\n  }\r\n\r\n  protected meetingService: MeetingService\r\n\r\n  constructor (props: VideoProps) {\r\n    super(props)\r\n    this.meetingService = new MeetingService()\r\n    this.handleClick = this.handleClick.bind(this)\r\n    this.handleMemberRemoveClick = this.handleMemberRemoveClick.bind(this)\r\n  }\r\n\r\n  get className () {\r\n    return `${styles.container} ${styles[this.props.ratio]}`\r\n  }\r\n\r\n  get raiseHand () {\r\n    return (\r\n      this.props.raiseHand &&\r\n      <div className={styles.raiseHand}>\r\n        <FloatButton\r\n          color=\"warning\"\r\n          icon={handRightOutline}\r\n          role=\"raiseHand\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  get memberRemove () {\r\n    return (\r\n      this.props.memberRemove &&\r\n      <div\r\n        className={styles.memberRemove}\r\n        onClick={this.handleMemberRemoveClick}>\r\n        <FloatButton\r\n          color=\"danger\"\r\n          icon={personRemoveOutline}\r\n          role=\"memberRemove\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  handleMemberRemoveClick (event: MouseEvent) {\r\n    event.stopPropagation()\r\n    const meetignId = this.meetingService.getMeetingId()\r\n    meetingSocket.memberRemove.publish(meetignId, this.props.id)\r\n  }\r\n\r\n  handleClick () {\r\n    store.dispatch(actions.setVideoActive(this.props.id, true))\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div\r\n        className={this.className}\r\n        onClick={this.handleClick}\r\n        role=\"container\">\r\n        <div className={styles.content}>\r\n          <VideoNative\r\n            id={this.props.id}\r\n            renderId={this.props.renderId}/>\r\n          {this.raiseHand}\r\n          {this.memberRemove}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { IonCol, IonContent, IonGrid, IonPage, IonRow } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport { filter, find } from 'lodash'\r\nimport { MediaConnection } from 'peerjs'\r\nimport PeerService from '../../services/PeerService'\r\nimport MediaService from '../../services/MediaService'\r\nimport MeetingService from '../../services/MeetingService'\r\nimport VideoService from '../../services/VideoService'\r\nimport AuthService from '../../services/AuthService'\r\nimport AlertService from '../../services/AlertService'\r\nimport AccessTokenService from '../../services/AccessTokenService'\r\nimport NotificationService from '../../services/NotificationService'\r\nimport HostMiddleware from '../../middleware/HostMiddleware'\r\nimport store from '../../store'\r\nimport routes from '../../routes'\r\nimport { actions, selectors, VideoState, MeetingState } from './Meeting.state'\r\nimport socket from './Meeting.socket'\r\nimport VideoSkeleton from '../../components/VideoSkeleton/VideoSkeleton'\r\nimport Actions from '../../components/Actions/Actions'\r\nimport Video from '../../components/Video/Video'\r\nimport Page from '../../components/Page/Page'\r\nimport styles from './Meeting.module.scss'\r\n\r\ninterface MeetingProps extends MeetingState, RouteComponentProps {}\r\n\r\nclass Meeting extends Component<MeetingProps> {\r\n  protected static raiseHandTimeout: number = 5000\r\n\r\n  protected peerService: PeerService\r\n\r\n  protected mediaService: MediaService\r\n\r\n  protected meetingService: MeetingService\r\n\r\n  protected videoService: VideoService\r\n\r\n  protected authService: AuthService\r\n\r\n  protected alertService: AlertService\r\n\r\n  protected accessTokenService: AccessTokenService\r\n\r\n  protected notificationService: NotificationService\r\n\r\n  protected hostMiddleware: HostMiddleware\r\n\r\n  constructor (props: MeetingProps) {\r\n    super(props)\r\n    this.peerService = new PeerService()\r\n    this.mediaService = new MediaService()\r\n    this.meetingService = new MeetingService()\r\n    this.videoService = new VideoService()\r\n    this.authService = new AuthService()\r\n    this.alertService = new AlertService()\r\n    this.accessTokenService = new AccessTokenService()\r\n    this.notificationService = new NotificationService()\r\n    this.hostMiddleware = new HostMiddleware()\r\n    this.hostMiddleware.auth(this.props.history)\r\n    this.handleEndClick = this.handleEndClick.bind(this)\r\n  }\r\n\r\n  get activeVideo () {\r\n    return find(this.props.videos, 'active')\r\n  }\r\n\r\n  get activeVideoCol () {\r\n    return (\r\n      this.activeVideo &&\r\n      <IonCol size=\"12\" role=\"activeVideo\">\r\n        <Video\r\n          id={this.activeVideo.id}\r\n          source={this.activeVideo.stream}\r\n          ratio=\"wide\"\r\n          raiseHand={this.activeVideo.raiseHand}\r\n          memberRemove={this.activeVideo.memberRemove}\r\n          active={this.activeVideo.active}\r\n          renderId={this.activeVideo.renderId} />\r\n      </IonCol>\r\n    )\r\n  }\r\n\r\n  video (video: VideoState, index: number) {\r\n    return (\r\n      <IonCol size=\"4\" role=\"video\" key={index}>\r\n        <Video\r\n          id={video.id}\r\n          source={video.stream}\r\n          ratio=\"square\"\r\n          raiseHand={video.raiseHand}\r\n          memberRemove={video.memberRemove}\r\n          active={video.active}\r\n          renderId={video.renderId} />\r\n      </IonCol>\r\n    )\r\n  }\r\n\r\n  get videos () {\r\n    const videos = filter(this.props.videos, { active: false })\r\n    return videos.map((video: VideoState, index: number) => this.video(video, index))\r\n  }\r\n\r\n  handleRaiseHand (meetingId: string) {\r\n    socket.raiseHand.subscribe(meetingId, connectionId => {\r\n      store.dispatch(actions.setVideoRaiseHand(connectionId, true))\r\n      setTimeout(() => {\r\n        store.dispatch(actions.setVideoRaiseHand(connectionId, false))\r\n      }, Meeting.raiseHandTimeout)\r\n    })\r\n  }\r\n\r\n  handleMemberRemove (meetingId: string) {\r\n    socket.memberRemove.subscribe(meetingId, connectionId => {\r\n      const isUser = this.meetingService.isUserMeeting(connectionId)\r\n      if (isUser) this.peerService.disconnect()\r\n      else this.videoService.pullVideo(connectionId)\r\n    })\r\n  }\r\n\r\n  socketUnsubscribe (meetingId: string) {\r\n    socket.raiseHand.unsubscribe(meetingId)\r\n    socket.conferenceCall.unsubscribe(meetingId)\r\n    socket.remoteDisconnect.unsubscribe(meetingId)\r\n    socket.memberRemove.unsubscribe(meetingId)\r\n  }\r\n\r\n  exitMeeting (meetingId: string) {\r\n    this.videoService.stopUserVideo()\r\n    this.meetingService.resetMeeting()\r\n    this.socketUnsubscribe(meetingId)\r\n    this.peerService.disconnect()\r\n    this.props.history.push(routes.home.path)\r\n    this.authService.resetType()\r\n    this.accessTokenService.remove()\r\n  }\r\n\r\n  handleDisconnect (meetingId: string, localConnectionId: string) {\r\n    this.peerService.onDisconnect(() => {\r\n      socket.remoteDisconnect.publish(meetingId, localConnectionId)\r\n      this.exitMeeting(meetingId)\r\n    })\r\n  }\r\n\r\n  handleUserStream (localConnectionId: string, localStream: MediaStream) {\r\n    this.videoService.createVideo(localConnectionId, localStream, localVideo => {\r\n      this.videoService.pushVideo(localVideo)\r\n    })\r\n  }\r\n\r\n  handleCallStreaming (call: MediaConnection) {\r\n    this.peerService.onCalling(call, (remoteConnectionId, remoteStream) => {\r\n      this.videoService.createVideo(remoteConnectionId, remoteStream, remoteVideo => {\r\n        this.videoService.pushVideo(remoteVideo)\r\n      })\r\n    })\r\n  }\r\n\r\n  handleReceiveCall (meetingId: string, localStream: MediaStream) {\r\n    this.peerService.onReceiveCall(call => {\r\n      const { peer: connectionId } = call\r\n      this.peerService.answerCall(call, localStream)\r\n      socket.conferenceCall.publish(meetingId, connectionId)\r\n      this.notificationService.notifyHost(connectionId)\r\n      this.handleCallStreaming(call)\r\n    })\r\n  }\r\n\r\n  joinMeeting (meetingId: string, localConnectionId: string, localStream: MediaStream) {\r\n    if (this.meetingService.isMemberMeeting(localConnectionId)) {\r\n      this.peerService.call(meetingId, localStream, call => {\r\n        this.handleCallStreaming(call)\r\n      })\r\n    }\r\n  }\r\n\r\n  handleConferenceCall (meetingId: string, localStream: MediaStream) {\r\n    socket.conferenceCall.subscribe(meetingId, connectionId => {\r\n      this.notificationService.notifyMember(connectionId)\r\n      if (this.meetingService.canConferenceCall(connectionId)) {\r\n        this.peerService.call(connectionId, localStream, call => {\r\n          this.handleCallStreaming(call)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  handleRemoteDisconnect (meetingId: string) {\r\n    socket.remoteDisconnect.subscribe(meetingId, connectionId => {\r\n      const isHostMeeting = this.meetingService.isHostMeeting(connectionId)\r\n      if (isHostMeeting) this.exitMeeting(meetingId)\r\n      else this.videoService.pullVideo(connectionId)\r\n    })\r\n  }\r\n\r\n  handleMeeting () {\r\n    const { history } = this.props\r\n    this.peerService.handleErrors(history)\r\n    this.peerService.onOpen(localConnectionId => {\r\n      this.meetingService.setId(localConnectionId, meetingId => {\r\n        if (meetingId) {\r\n          this.handleRaiseHand(meetingId)\r\n          this.handleMemberRemove(meetingId)\r\n          this.handleDisconnect(meetingId, localConnectionId)\r\n          this.mediaService.getStream(history, localStream => {\r\n            this.handleUserStream(localConnectionId, localStream)\r\n            this.handleReceiveCall(meetingId, localStream)\r\n            this.joinMeeting(meetingId, localConnectionId, localStream)\r\n            this.handleConferenceCall(meetingId, localStream)\r\n            this.handleRemoteDisconnect(meetingId)\r\n          })\r\n        } else this.exitMeeting(meetingId)\r\n      })\r\n    })\r\n  }\r\n\r\n  handleEndClick () {\r\n    this.alertService.push('Are you sure to end meeting?', () => {\r\n      this.peerService.disconnect()\r\n    })\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.handleMeeting()\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    const { id: meetingId } = this.props\r\n    this.exitMeeting(meetingId)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent fullscreen>\r\n          <Page flip={false} container=\"large\">\r\n            <div className={styles.meeting}>\r\n              <IonGrid>\r\n                <IonRow>\r\n                  {this.activeVideoCol}\r\n                  <VideoSkeleton video={this.activeVideo} />\r\n                </IonRow>\r\n                <IonRow>\r\n                  {this.videos}\r\n                </IonRow>\r\n              </IonGrid>\r\n              <Actions handleEnd={this.handleEndClick} />\r\n            </div>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(selectors, actions)(Meeting))\r\n","import { History } from 'history'\r\nimport routes from '../../routes'\r\nimport RequestService from '../../services/RequestService'\r\n\r\ninterface CreateAdminData {\r\n  username: string,\r\n  password: string,\r\n  confirmPassword: string\r\n}\r\n\r\nexport default class InstallRequest {\r\n  protected requestService: RequestService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n  }\r\n\r\n  createAdmin (admin: CreateAdminData, history: History) {\r\n    this.requestService.post('/admin', admin, response => {\r\n      if (response) history.push(routes.adminSignIn.path)\r\n    })\r\n  }\r\n\r\n  validateInstall (history: History) {\r\n    this.requestService.get('/admin', admin => {\r\n      if (admin) history.push(routes.adminSignIn.path)\r\n    })\r\n  }\r\n}\r\n","import React, { ChangeEvent, Component, Fragment } from 'react'\r\nimport { IonContent, IonPage } from '@ionic/react'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport Request from './Install.request'\r\nimport Page from '../../components/Page/Page'\r\nimport Input from '../../components/Input/Input'\r\nimport Button from '../../components/Button/Button'\r\n\r\ninterface InstallProps extends RouteComponentProps {}\r\n\r\ninterface InstallState {\r\n  username: string\r\n  password: string\r\n  confirmPassword: string\r\n}\r\n\r\nclass Install extends Component<InstallProps, InstallState> {\r\n  protected request: Request\r\n\r\n  constructor (props: any) {\r\n    super(props)\r\n    this.request = new Request()\r\n    this.state = {\r\n      username: '',\r\n      password: '',\r\n      confirmPassword: ''\r\n    }\r\n    this.handleInputChange = this.handleInputChange.bind(this)\r\n    this.handleCreateClick = this.handleCreateClick.bind(this)\r\n    this.validateIntall()\r\n  }\r\n\r\n  handleInputChange (event: ChangeEvent) {\r\n    const target = event.target as HTMLInputElement\r\n    const { value, name } = target\r\n    switch (name) {\r\n      case 'username':\r\n        this.setState({ username: value })\r\n        break\r\n      case 'password':\r\n        this.setState({ password: value })\r\n        break\r\n      case 'confirmPassword':\r\n        this.setState({ confirmPassword: value })\r\n        break\r\n    }\r\n  }\r\n\r\n  handleCreateClick () {\r\n    const { username, password, confirmPassword } = this.state\r\n    const admin = { username, password, confirmPassword }\r\n    this.request.createAdmin(admin, this.props.history)\r\n  }\r\n\r\n  validateIntall () {\r\n    this.request.validateInstall(this.props.history)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent fullscreen>\r\n          <Page flip={false} container=\"small\">\r\n            <Fragment>\r\n              <Input\r\n                name=\"username\"\r\n                type=\"text\"\r\n                value={this.state.username}\r\n                placeholder=\"Username\"\r\n                handleChange={this.handleInputChange} />\r\n              <Input\r\n                name=\"password\"\r\n                type=\"password\"\r\n                value={this.state.password}\r\n                placeholder=\"Password\"\r\n                handleChange={this.handleInputChange} />\r\n              <Input\r\n                name=\"confirmPassword\"\r\n                type=\"password\"\r\n                value={this.state.confirmPassword}\r\n                placeholder=\"Confirm password\"\r\n                handleChange={this.handleInputChange} />\r\n              <Button\r\n                text=\"Create Admin\"\r\n                handleClick={this.handleCreateClick} />\r\n            </Fragment>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Install)\r\n","import { History } from 'history'\r\nimport routes from '../../routes'\r\nimport RequestService from '../../services/RequestService'\r\nimport AccessTokenService from '../../services/AccessTokenService'\r\n\r\ninterface SignInCredentials {\r\n  username: string,\r\n  password: string\r\n}\r\n\r\nexport default class AdminSignInRequest {\r\n  protected requestService: RequestService\r\n\r\n  protected accessTokenService: AccessTokenService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n    this.accessTokenService = new AccessTokenService()\r\n  }\r\n\r\n  signIn (credentials: SignInCredentials, history: History) {\r\n    this.requestService.post('/admin/signIn', credentials, async response => {\r\n      if (response) {\r\n        const { accessToken } = response\r\n        await this.accessTokenService.set(accessToken)\r\n        history.push(routes.hosts.path)\r\n      }\r\n    })\r\n  }\r\n}\r\n","import React, { ChangeEvent, Component, Fragment } from 'react'\r\nimport { IonContent, IonPage } from '@ionic/react'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport Request from './AdminSignIn.request'\r\nimport Page from '../../components/Page/Page'\r\nimport Input from '../../components/Input/Input'\r\nimport Button from '../../components/Button/Button'\r\n\r\ninterface AdminSignInProps extends RouteComponentProps {}\r\n\r\ninterface AdminSignInState {\r\n  username: string\r\n  password: string\r\n}\r\n\r\nclass AdminSignIn extends Component<AdminSignInProps, AdminSignInState> {\r\n  protected request: Request\r\n\r\n  constructor (props: any) {\r\n    super(props)\r\n    this.request = new Request()\r\n    this.state = {\r\n      username: '',\r\n      password: ''\r\n    }\r\n    this.handleInputChange = this.handleInputChange.bind(this)\r\n    this.handleSignInClick = this.handleSignInClick.bind(this)\r\n  }\r\n\r\n  handleInputChange (event: ChangeEvent) {\r\n    const target = event.target as HTMLInputElement\r\n    const { value, name } = target\r\n    switch (name) {\r\n      case 'username':\r\n        this.setState({ username: value })\r\n        break\r\n      case 'password':\r\n        this.setState({ password: value })\r\n        break\r\n    }\r\n  }\r\n\r\n  handleSignInClick () {\r\n    const { username, password } = this.state\r\n    const credentials = { username, password }\r\n    this.request.signIn(credentials, this.props.history)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent fullscreen>\r\n          <Page flip={false} container=\"small\">\r\n            <Fragment>\r\n              <Input\r\n                name=\"username\"\r\n                type=\"text\"\r\n                value={this.state.username}\r\n                placeholder=\"Username\"\r\n                handleChange={this.handleInputChange} />\r\n              <Input\r\n                name=\"password\"\r\n                type=\"password\"\r\n                value={this.state.password}\r\n                placeholder=\"Password\"\r\n                handleChange={this.handleInputChange} />\r\n              <Button\r\n                text=\"Sign In\"\r\n                handleClick={this.handleSignInClick} />\r\n            </Fragment>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(AdminSignIn)\r\n","import store from '../../store'\r\nimport RequestService from '../../services/RequestService'\r\nimport { actions } from './Hosts.state'\r\n\r\nexport default class HostsRequest {\r\n  protected requestService: RequestService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n  }\r\n\r\n  listHosts () {\r\n    this.requestService.get('/hosts', hosts => {\r\n      if (hosts) store.dispatch(actions.replaceHosts(hosts))\r\n    })\r\n  }\r\n}\r\n","import { History } from 'history'\r\nimport routes from '../routes'\r\nimport RequestService from '../services/RequestService'\r\n\r\nexport default class AdminMiddleware {\r\n  protected requestService: RequestService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n  }\r\n\r\n  auth (history: History) {\r\n    this.requestService.get('/admin/auth', response => {\r\n      if (!response) history.push(routes.adminSignIn.path)\r\n    })\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { IonCard } from '@ionic/react'\r\nimport { random } from 'lodash'\r\nimport Skeleton from '../Skeleton/Skeleton'\r\nimport styles from './HostSkeleton.module.scss'\r\n\r\nexport default class HostSkeleton extends Component {\r\n  render () {\r\n    return (\r\n      <IonCard>\r\n        <div className={styles.host}>\r\n          <div className={styles.user}>\r\n            <Skeleton\r\n              width={`${random(25, 35)}%`}\r\n              height=\"12px\"\r\n              marginBottom=\"8px\" />\r\n            <Skeleton\r\n              width={`${random(25, 35)}%`}\r\n              height=\"12px\"\r\n              marginBottom=\"22px\" />\r\n            <Skeleton\r\n              width=\"40%\"\r\n              height=\"15px\"\r\n              marginBottom=\"8px\" />\r\n            <Skeleton\r\n              width=\"65%\"\r\n              height=\"12px\" />\r\n          </div>\r\n          <div className={styles.actions}>\r\n            <Skeleton\r\n              width=\"35px\"\r\n              height=\"35px\"\r\n              shape=\"round\" />\r\n          </div>\r\n        </div>\r\n      </IonCard>\r\n    )\r\n  }\r\n}\r\n","import store from '../../store'\r\nimport RequestService from '../../services/RequestService'\r\nimport { actions as hostsActions } from '../../pages/Hosts/Hosts.state'\r\n\r\ninterface CreateHostData {\r\n  name: string\r\n  username: string\r\n  password: string\r\n}\r\n\r\nexport default class HostCreateRequest {\r\n  protected requestService: RequestService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n  }\r\n\r\n  createHost (host: CreateHostData, callback: () => void) {\r\n    this.requestService.post('/host', host, response => {\r\n      if (response) {\r\n        store.dispatch(hostsActions.pushHost(response))\r\n        callback()\r\n      }\r\n    })\r\n  }\r\n}\r\n","import { IonCol, IonGrid, IonRow } from '@ionic/react'\r\nimport React, { ChangeEvent, Component } from 'react'\r\nimport copyToClipboard from 'copy-to-clipboard'\r\nimport AlertService from '../../services/AlertService'\r\nimport Request from './HostCreate.request'\r\nimport Button from '../Button/Button'\r\nimport Input from '../Input/Input'\r\n\r\ninterface HostState {\r\n  name: string\r\n  password: string\r\n  username: string\r\n}\r\n\r\nexport default class HostCreate extends Component<any, HostState> {\r\n  protected request: Request\r\n\r\n  protected alertService: AlertService\r\n\r\n  constructor (props: any) {\r\n    super(props)\r\n    this.state = {\r\n      name: '',\r\n      password: '',\r\n      username: ''\r\n    }\r\n    this.request = new Request()\r\n    this.alertService = new AlertService()\r\n    this.handleInputChange = this.handleInputChange.bind(this)\r\n    this.handleAddHostClick = this.handleAddHostClick.bind(this)\r\n  }\r\n\r\n  handleInputChange (event: ChangeEvent) {\r\n    const target = event.target as HTMLInputElement\r\n    const { value, name } = target\r\n    switch (name) {\r\n      case 'name':\r\n        this.setState({ name: value })\r\n        break\r\n      case 'password':\r\n        this.setState({ password: value })\r\n        break\r\n      case 'username':\r\n        this.setState({ username: value })\r\n        break\r\n    }\r\n  }\r\n\r\n  copyCredentials () {\r\n    const appUrl = `https://${process.env.REACT_APP_HOST}`\r\n    const username = this.state.username\r\n    const password = this.state.password\r\n    const credentials = `Hi ${this.state.name},\\nYou can start a meeting from ${appUrl}/start using the following credentials:\\nUsername: ${username}\\nPassword: ${password}`\r\n    copyToClipboard(credentials)\r\n    this.alertService.push('Credentials copied.')\r\n  }\r\n\r\n  clearForm () {\r\n    this.setState({\r\n      name: '',\r\n      password: '',\r\n      username: ''\r\n    })\r\n  }\r\n\r\n  handleAddHostClick () {\r\n    const { name, username, password } = this.state\r\n    const credentials = { name, username, password }\r\n    this.request.createHost(credentials, () => {\r\n      this.copyCredentials()\r\n      this.clearForm()\r\n    })\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonGrid>\r\n        <IonRow>\r\n          <IonCol>\r\n            <Input\r\n              name=\"name\"\r\n              type=\"text\"\r\n              value={this.state.name}\r\n              placeholder=\"Name\"\r\n              handleChange={this.handleInputChange} />\r\n            <Input\r\n              name=\"password\"\r\n              type=\"password\"\r\n              value={this.state.password}\r\n              placeholder=\"Password\"\r\n              handleChange={this.handleInputChange} />\r\n          </IonCol>\r\n          <IonCol>\r\n            <Input\r\n              name=\"username\"\r\n              type=\"text\"\r\n              value={this.state.username}\r\n              placeholder=\"Username\"\r\n              handleChange={this.handleInputChange} />\r\n            <Button\r\n              text=\"Add Host\"\r\n              handleClick={this.handleAddHostClick} />\r\n          </IonCol>\r\n        </IonRow>\r\n      </IonGrid>\r\n    )\r\n  }\r\n}\r\n","import store from '../../store'\r\nimport RequestService from '../../services/RequestService'\r\nimport { actions as hostsActions } from '../../pages/Hosts/Hosts.state'\r\n\r\ninterface DeleteHostData {\r\n  id: number\r\n}\r\n\r\nexport default class HostRequest {\r\n  protected requestService: RequestService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n  }\r\n\r\n  delete (host: DeleteHostData) {\r\n    this.requestService.delete('/host', host, response => {\r\n      if (response) {\r\n        store.dispatch(hostsActions.pullHost(host.id))\r\n      }\r\n    })\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { IonCard } from '@ionic/react'\r\nimport { personRemoveOutline } from 'ionicons/icons'\r\nimport PropTypes from 'prop-types'\r\nimport moment from 'moment'\r\nimport AlertService from '../../services/AlertService'\r\nimport Request from './Host.request'\r\nimport FloatButton from '../FloatButton/FloatButton'\r\nimport styles from './Host.module.scss'\r\n\r\nexport interface HostProps {\r\n  id: number\r\n  name: string\r\n  username: string\r\n  lastMeetingAt: Date | null\r\n}\r\n\r\nexport default class Host extends Component<HostProps> {\r\n  protected request: Request\r\n\r\n  protected alertService: AlertService\r\n\r\n  static propTypes = {\r\n    id: PropTypes.number.isRequired,\r\n    name: PropTypes.string.isRequired,\r\n    username: PropTypes.string.isRequired,\r\n    lastMeetingAt: PropTypes.string\r\n  }\r\n\r\n  constructor (props: HostProps) {\r\n    super(props)\r\n    this.request = new Request()\r\n    this.alertService = new AlertService()\r\n    this.handleDeleteClick = this.handleDeleteClick.bind(this)\r\n  }\r\n\r\n  get lastMeeting () {\r\n    return this.props.lastMeetingAt\r\n      ? moment(this.props.lastMeetingAt).format('LLL')\r\n      : '-'\r\n  }\r\n\r\n  handleDeleteClick () {\r\n    this.alertService.push('Are you sure to delete the host?', () => {\r\n      const host = { id: this.props.id }\r\n      this.request.delete(host)\r\n    })\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonCard>\r\n        <div className={styles.host}>\r\n          <div className={styles.user}>\r\n            <h3 className={styles.name}>{this.props.name}</h3>\r\n            <div className={styles.username}>{this.props.username}</div>\r\n            <div className={styles.lastMeeting}>\r\n              <h3 className={styles.heading}>Last Meeting</h3>\r\n              <div className={styles.time}>{this.lastMeeting}</div>\r\n            </div>\r\n          </div>\r\n          <div className={styles.actions}>\r\n            <div onClick={this.handleDeleteClick} >\r\n              <FloatButton\r\n                color=\"danger\"\r\n                icon={personRemoveOutline}\r\n                role=\"delete\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </IonCard>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { NavLink, RouteComponentProps, withRouter } from 'react-router-dom'\r\nimport routes from '../../routes'\r\nimport AccessTokenService from '../../services/AccessTokenService'\r\nimport styles from './AdminMenu.module.scss'\r\n\r\ninterface AdminMenuProps extends RouteComponentProps {}\r\n\r\nclass AdminMenu extends Component<AdminMenuProps> {\r\n  protected accessTokenService: AccessTokenService\r\n\r\n  constructor (props: AdminMenuProps) {\r\n    super(props)\r\n    this.accessTokenService = new AccessTokenService()\r\n    this.handleSignOutClick = this.handleSignOutClick.bind(this)\r\n  }\r\n\r\n  async handleSignOutClick () {\r\n    await this.accessTokenService.remove()\r\n    this.props.history.push(routes.adminSignIn.path)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.adminMenu}>\r\n        <div className={styles.links}>\r\n          <NavLink\r\n            to={routes.hosts.path}\r\n            activeClassName={styles.active}>\r\n            Hosts\r\n          </NavLink>\r\n          <NavLink\r\n            to={routes.privacyEdit.path}\r\n            activeClassName={styles.active}>\r\n            Privacy Policy\r\n          </NavLink>\r\n          <NavLink\r\n            to=\"#\"\r\n            onClick={this.handleSignOutClick}>\r\n            Sign Out\r\n          </NavLink>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(AdminMenu)\r\n","import { IonCol, IonContent, IonGrid, IonPage, IonRow } from '@ionic/react'\r\nimport React, { Component, Fragment } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport { isEmpty, range } from 'lodash'\r\nimport Request from './Hosts.request'\r\nimport AdminMiddleware from '../../middleware/AdminMiddleware'\r\nimport { selectors, HostState, HostsState } from './Hosts.state'\r\nimport HostSkeleton from '../../components/HostSkeleton/HostSkeleton'\r\nimport Page from '../../components/Page/Page'\r\nimport HostCreate from '../../components/HostCreate/HostCreate'\r\nimport Host from '../../components/Host/Host'\r\nimport AdminMenu from '../../components/AdminMenu/AdminMenu'\r\n\r\ninterface HostsProps extends RouteComponentProps, HostsState {}\r\n\r\nclass Hosts extends Component<HostsProps> {\r\n  protected request: Request\r\n\r\n  protected adminMiddleware: AdminMiddleware\r\n\r\n  constructor (props: HostsProps) {\r\n    super(props)\r\n    this.request = new Request()\r\n    this.adminMiddleware = new AdminMiddleware()\r\n    this.adminMiddleware.auth(this.props.history)\r\n  }\r\n\r\n  get hosts () {\r\n    const { hosts } = this.props\r\n    return hosts.map(host => this.host(host))\r\n  }\r\n\r\n  get hostsSkeleton () {\r\n    const { hosts } = this.props\r\n    if (isEmpty(hosts)) {\r\n      const hostsSkeleton = range(2)\r\n      return hostsSkeleton.map(host => this.hostSkeleton(host))\r\n    }\r\n  }\r\n\r\n  hostSkeleton (host: any) {\r\n    return (\r\n      <IonCol\r\n        size=\"12\"\r\n        sizeSm=\"6\"\r\n        key={host}>\r\n        <HostSkeleton />\r\n      </IonCol>\r\n    )\r\n  }\r\n\r\n  host (host: HostState) {\r\n    return (\r\n      <IonCol\r\n        size=\"12\"\r\n        sizeSm=\"6\"\r\n        key={host.username}>\r\n        <Host\r\n          id={host.id}\r\n          name={host.name}\r\n          username={host.username}\r\n          lastMeetingAt={host.lastMeetingAt} />\r\n      </IonCol>\r\n    )\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.request.listHosts()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page flip={false} container=\"large\">\r\n            <Fragment>\r\n              <AdminMenu />\r\n              <HostCreate />\r\n              <IonGrid>\r\n                <IonRow>\r\n                  {this.hosts}\r\n                  {this.hostsSkeleton}\r\n                </IonRow>\r\n              </IonGrid>\r\n            </Fragment>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(selectors, null)(Hosts))\r\n","import RequestService from '../../services/RequestService'\r\nimport AlertService from '../../services/AlertService'\r\n\r\nexport default class PrivacyEditRequest {\r\n  protected requestService: RequestService\r\n\r\n  protected alertService: AlertService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n    this.alertService = new AlertService()\r\n  }\r\n\r\n  read (callback: (body: string) => void) {\r\n    this.requestService.get('/privacy', response => {\r\n      if (response) callback(response.body)\r\n    })\r\n  }\r\n\r\n  update (body: string) {\r\n    this.requestService.post('/privacy', { body }, response => {\r\n      if (response) this.alertService.push('Privacy updated.')\r\n    })\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { IonCol, IonContent, IonGrid, IonPage, IonRow } from '@ionic/react'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport Quill from 'quill'\r\nimport Request from './PrivacyEdit.request'\r\nimport AdminMiddleware from '../../middleware/AdminMiddleware'\r\nimport Page from '../../components/Page/Page'\r\nimport Button from '../../components/Button/Button'\r\nimport AdminMenu from '../../components/AdminMenu/AdminMenu'\r\nimport styles from './PrivacyEdit.module.scss'\r\n\r\ninterface PrivacyEditProps extends RouteComponentProps {}\r\n\r\ninterface PrivacyEditState {\r\n  privacy: string\r\n}\r\n\r\nclass PrivacyEdit extends Component<PrivacyEditProps, PrivacyEditState> {\r\n  protected request: Request\r\n\r\n  protected adminMiddleware: AdminMiddleware\r\n\r\n  constructor (props: PrivacyEditProps) {\r\n    super(props)\r\n    this.request = new Request()\r\n    this.adminMiddleware = new AdminMiddleware()\r\n    this.adminMiddleware.auth(this.props.history)\r\n    this.state = {\r\n      privacy: ''\r\n    }\r\n    this.handleSaveClick = this.handleSaveClick.bind(this)\r\n  }\r\n\r\n  setContent (quill: Quill) {\r\n    this.request.read((privacy: any) => {\r\n      this.setState({ privacy })\r\n      const delta = quill.clipboard.convert(privacy)\r\n      quill.setContents(delta, 'silent')\r\n    })\r\n  }\r\n\r\n  handleContentChange (quill: Quill) {\r\n    quill.on('text-change', () => {\r\n      const privacy = quill.root.innerHTML\r\n      this.setState({ privacy })\r\n    })\r\n  }\r\n\r\n  initializeEditor (callback: (quill: Quill) => void) {\r\n    var toolbarOptions = [\r\n      ['bold', 'italic', 'underline'],\r\n      [{ header: 1 }, { header: 2 }],\r\n      [{ list: 'ordered' }, { list: 'bullet' }],\r\n      [{ align: [] }],\r\n      ['link']\r\n    ]\r\n    const quill = new Quill('#privacyEitor', {\r\n      modules: {\r\n        toolbar: toolbarOptions,\r\n        clipboard: {\r\n          matchVisual: false\r\n        }\r\n      },\r\n      theme: 'snow'\r\n    })\r\n    callback(quill)\r\n  }\r\n\r\n  handleSaveClick () {\r\n    this.request.update(this.state.privacy)\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.initializeEditor(quill => {\r\n      this.setContent(quill)\r\n      this.handleContentChange(quill)\r\n    })\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent fullscreen>\r\n          <Page flip={false} container=\"large\">\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <AdminMenu />\r\n                  <div className={styles.privacyEdit}>\r\n                    <div id=\"privacyEitor\" />\r\n                    <div className={styles.save}>\r\n                      <Button text=\"Save\" handleClick={this.handleSaveClick} />\r\n                    </div>\r\n                  </div>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(PrivacyEdit)\r\n","import RequestService from '../../services/RequestService'\r\n\r\nexport default class PrivacyRequest {\r\n  protected requestService: RequestService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n  }\r\n\r\n  read (callback: (body: string) => void) {\r\n    this.requestService.get('/privacy', response => {\r\n      if (response) callback(response.body)\r\n    })\r\n  }\r\n}\r\n","import React, { Component, Fragment } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { random, range } from 'lodash'\r\nimport Skeleton from '../Skeleton/Skeleton'\r\n\r\ninterface PrivacySkeletonProps {\r\n  privacy: any\r\n}\r\n\r\nexport default class PrivacySkeleton extends Component<PrivacySkeletonProps> {\r\n  static propTypes = {\r\n    privacy: PropTypes.any\r\n  }\r\n\r\n  paragraph (lines: number) {\r\n    return (\r\n      range(lines).map(line =>\r\n        <Skeleton\r\n          width={`${random(80, 100)}%`}\r\n          height=\"11px\"\r\n          marginBottom=\"5px\"\r\n          key={line} />\r\n      )\r\n    )\r\n  }\r\n\r\n  render () {\r\n    return (!this.props.privacy) &&\r\n      <Fragment>\r\n        <div>{this.paragraph(3)}</div>\r\n        <Skeleton\r\n          width={`${random(175, 200)}px`}\r\n          height=\"18px\"\r\n          marginBottom=\"25px\"\r\n          marginTop=\"25px\" />\r\n        <div>{this.paragraph(5)}</div>\r\n      </Fragment>\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { IonContent, IonPage, IonCol, IonGrid, IonRow } from '@ionic/react'\r\nimport PrivacyRequest from './Privacy.request'\r\nimport Page from '../../components/Page/Page'\r\nimport PrivacySkeleton from '../../components/PrivacySkeleton/PrivacySkeleton'\r\nimport styles from './Privacy.module.scss'\r\n\r\ninterface PrivacyState {\r\n  privacy: string\r\n}\r\n\r\nexport default class Privacy extends Component<any, PrivacyState> {\r\n  protected request: PrivacyRequest\r\n\r\n  constructor (props: any) {\r\n    super(props)\r\n    this.request = new PrivacyRequest()\r\n    this.state = {\r\n      privacy: ''\r\n    }\r\n  }\r\n\r\n  setPrivacy () {\r\n    this.request.read(body => {\r\n      this.setState({ privacy: body })\r\n    })\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.setPrivacy()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent fullscreen>\r\n          <Page flip={false} container=\"large\">\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <div className={styles.privacy}>\r\n                    <h1>Privacy Policy</h1>\r\n                    <div\r\n                      className={styles.content}\r\n                      dangerouslySetInnerHTML={{ __html: this.state.privacy }} />\r\n                    <PrivacySkeleton privacy={this.state.privacy} />\r\n                  </div>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { IonContent, IonPage } from '@ionic/react'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport routes from '../../routes'\r\nimport Page from '../../components/Page/Page'\r\nimport Button from '../../components/Button/Button'\r\nimport styles from './NotFound.module.scss'\r\n\r\ninterface NotFoundProps extends RouteComponentProps {}\r\n\r\nclass NotFound extends Component<NotFoundProps> {\r\n  constructor (props: NotFoundProps) {\r\n    super(props)\r\n    this.handleRouteClick = this.handleRouteClick.bind(this)\r\n  }\r\n\r\n  handleRouteClick () {\r\n    this.props.history.push(routes.home.path)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent fullscreen>\r\n          <Page flip={false} container=\"small\">\r\n            <div className={styles.notFound}>\r\n              <h1 className={styles.heading}>404</h1>\r\n              <p className={styles.description}>Page Not Found</p>\r\n              <Button\r\n                text=\"Return to Home\"\r\n                handleClick={this.handleRouteClick} />\r\n            </div>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(NotFound)\r\n","import Preload from './pages/Preload/Preload'\r\nimport Home from './pages/Home/Home'\r\nimport MeetingJoin from './pages/MeetingJoin/MeetingJoin'\r\nimport MeetingStart from './pages/MeetingStart/MeetingStart'\r\nimport Meeting from './pages/Meeting/Meeting'\r\nimport Install from './pages/Install/Install'\r\nimport AdminSignIn from './pages/AdminSignIn/AdminSignIn'\r\nimport Hosts from './pages/Hosts/Hosts'\r\nimport PrivacyEdit from './pages/PrivacyEdit/PrivacyEdit'\r\nimport Privacy from './pages/Privacy/Privacy'\r\nimport NotFound from './pages/NotFound/NotFound'\r\n\r\nexport default {\r\n  preload: { path: '/', component: Preload },\r\n  home: { path: '/home', component: Home },\r\n  meetingJoin: { path: '/join', component: MeetingJoin },\r\n  meetingStart: { path: '/start', component: MeetingStart },\r\n  meeting: { path: '/meeting', component: Meeting },\r\n  install: { path: '/install', component: Install },\r\n  adminSignIn: { path: '/admin', component: AdminSignIn },\r\n  hosts: { path: '/hosts', component: Hosts },\r\n  privacyEdit: { path: '/privacy/edit', component: PrivacyEdit },\r\n  privacy: { path: '/privacy', component: Privacy },\r\n  notFound: { path: '*', component: NotFound }\r\n}\r\n","import StorageService from '../../services/StorageService'\r\n\r\nexport default class AppLocalStorage {\r\n  protected storageService: StorageService\r\n\r\n  protected pwaInstallPrompted: string = 'pwaInstallPrompted'\r\n\r\n  constructor () {\r\n    this.storageService = new StorageService()\r\n  }\r\n\r\n  async isPwaAlreadyPrompted (): Promise<boolean> {\r\n    const pwaInstallPrompted = await this.storageService\r\n      .get(this.pwaInstallPrompted)\r\n    return pwaInstallPrompted ? Boolean(JSON.parse(pwaInstallPrompted)) : false\r\n  }\r\n\r\n  setPwaInstallPrompted (): void {\r\n    this.storageService.set(this.pwaInstallPrompted, JSON.stringify(true))\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { IonReactRouter } from '@ionic/react-router'\r\nimport { IonRouterOutlet } from '@ionic/react'\r\nimport { Provider as ReduxProvider } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport store from '../../store'\r\n\r\nexport default class Provider extends Component {\r\n  static propTypes = {\r\n    children: PropTypes.element.isRequired\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <ReduxProvider store={store}>\r\n        <IonReactRouter>\r\n          <IonRouterOutlet>\r\n            {this.props.children}\r\n          </IonRouterOutlet>\r\n        </IonReactRouter>\r\n      </ReduxProvider>\r\n    )\r\n  }\r\n}\r\n","import React, { Component, ReactPropTypes } from 'react'\r\nimport { Route, Switch } from 'react-router-dom'\r\nimport { IonApp, setupConfig } from '@ionic/react'\r\nimport routes from '../../routes'\r\nimport SocketService from '../../services/SocketService'\r\nimport AlertService from '../../services/AlertService'\r\nimport LocalStorage from './App.localStorage'\r\nimport Provider from '../Provider/Provider'\r\nimport '../../theme/bootstrap.scss'\r\n\r\nexport default class App extends Component {\r\n  protected alertService: AlertService\r\n\r\n  protected localStorage: LocalStorage\r\n\r\n  constructor (props: ReactPropTypes) {\r\n    super(props)\r\n    this.alertService = new AlertService()\r\n    this.localStorage = new LocalStorage()\r\n    this.setupConfig()\r\n    SocketService.connect()\r\n  }\r\n\r\n  setupConfig () {\r\n    setupConfig({\r\n      mode: 'md'\r\n    })\r\n  }\r\n\r\n  async promptPwaInstall () {\r\n    const isAlreadyPrompted = await this.localStorage.isPwaAlreadyPrompted()\r\n    if (isAlreadyPrompted) return\r\n    window.addEventListener('beforeinstallprompt', event => {\r\n      event.preventDefault()\r\n      this.localStorage.setPwaInstallPrompted()\r\n      this.alertService.push('Install app?', async () => {\r\n        let deferredPrompt: any = event\r\n        deferredPrompt.prompt()\r\n        const choiceResult = await deferredPrompt.userChoice\r\n        if (choiceResult.outcome === 'accepted') {\r\n          this.alertService.pull()\r\n        }\r\n        deferredPrompt = null\r\n      })\r\n    })\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.promptPwaInstall()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonApp>\r\n        <Provider>\r\n          <Switch>\r\n            <Route\r\n              path={routes.preload.path}\r\n              component={routes.preload.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.home.path}\r\n              component={routes.home.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.meetingJoin.path}\r\n              component={routes.meetingJoin.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.meetingStart.path}\r\n              component={routes.meetingStart.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.meeting.path}\r\n              component={routes.meeting.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.install.path}\r\n              component={routes.install.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.adminSignIn.path}\r\n              component={routes.adminSignIn.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.hosts.path}\r\n              component={routes.hosts.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.privacy.path}\r\n              component={routes.privacy.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.privacyEdit.path}\r\n              component={routes.privacyEdit.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.notFound.path}\r\n              component={routes.notFound.component}\r\n              exact={true} />\r\n          </Switch>\r\n        </Provider>\r\n      </IonApp>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport ServiceWorkerService from './services/ServiceWorkerService'\r\nimport App from './components/App/App'\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n)\r\n\r\nServiceWorkerService.registerWorker()\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"host\":\"Host_host__5UBHq\",\"user\":\"Host_user__gNOv3\",\"name\":\"Host_name__388jT\",\"username\":\"Host_username__3vIjJ\",\"lastMeeting\":\"Host_lastMeeting__Rz7Vu\",\"heading\":\"Host_heading__1H5l_\",\"time\":\"Host_time__2_weU\",\"actions\":\"Host_actions__1p3R3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alert\":\"Alert_alert__2j1qM\",\"cursor\":\"Alert_cursor__1gESW\",\"iconAndMessage\":\"Alert_iconAndMessage__2cFeq\",\"message\":\"Alert_message__3Q1cm\",\"actions\":\"Alert_actions__xNWp7\",\"cancel\":\"Alert_cancel__2hV9X\",\"proceed\":\"Alert_proceed__1WEvF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Page_page__A7lqB\",\"fadeIn\":\"Page_fadeIn__3vNfI\",\"main\":\"Page_main__1BVN_\",\"content\":\"Page_content__1d0Vb\",\"footer\":\"Page_footer__itCy_\",\"background\":\"Page_background__isKCT\",\"flip\":\"Page_flip__LYGoY\",\"small\":\"Page_small__2IQaH\",\"large\":\"Page_large__1Ok4v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Video_container__3eMZ-\",\"square\":\"Video_square__3P6xv\",\"wide\":\"Video_wide__Yue-M\",\"content\":\"Video_content__1L4di\",\"raiseHand\":\"Video_raiseHand__1Jpq7\",\"memberRemove\":\"Video_memberRemove__3ShKR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"brand\":\"Brand_brand__SvLWJ\",\"logo\":\"Brand_logo__1KriI\",\"tagline\":\"Brand_tagline__3ruMl\",\"invert\":\"Brand_invert__2CW7P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"adminMenu\":\"AdminMenu_adminMenu__3X4sH\",\"links\":\"AdminMenu_links__agx5Y\",\"active\":\"AdminMenu_active__aA2dh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"Home_home__1JXvv\",\"footer\":\"Home_footer__3oZSW\",\"copyright\":\"Home_copyright__2neRE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"actionsToggle\":\"ActionsToggle_actionsToggle__7Iv65\",\"button\":\"ActionsToggle_button__2jefv\",\"icon\":\"ActionsToggle_icon__6tRbL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"host\":\"HostSkeleton_host__1bWhC\",\"user\":\"HostSkeleton_user__1MMZ8\",\"actions\":\"HostSkeleton_actions__1bFH1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notFound\":\"NotFound_notFound__3CEjn\",\"heading\":\"NotFound_heading__2lNQV\",\"description\":\"NotFound_description__1uh8N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"skeleton\":\"Skeleton_skeleton__zRo__\",\"gradientFlash\":\"Skeleton_gradientFlash___3LKB\",\"round\":\"Skeleton_round__3k965\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"videoSkeleton\":\"VideoSkeleton_videoSkeleton__1fKFa\",\"icon\":\"VideoSkeleton_icon__2ILIk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"action\":\"Action_action__3Fdlp\",\"active\":\"Action_active__vA-VW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"actions\":\"Actions_actions__3XhRV\",\"buttons\":\"Actions_buttons__1Yn3G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"privacyEdit\":\"PrivacyEdit_privacyEdit__1amDH\",\"save\":\"PrivacyEdit_save__3cUl5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"privacy\":\"Privacy_privacy__3bH6U\",\"content\":\"Privacy_content__3-zUr\"};"],"sourceRoot":""}